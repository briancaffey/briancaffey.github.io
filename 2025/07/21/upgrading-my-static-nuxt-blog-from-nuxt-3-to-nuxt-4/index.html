<!DOCTYPE html><html  lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Upgrading my Blog to Nuxt 4</title><style>html{font-family:Montserrat,Arial,Sans Serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{border:1px solid #3b8070;border-radius:4px;color:#3b8070;display:inline-block;padding:10px 30px;text-decoration:none}.button--green:hover{background-color:#3b8070;color:#fff}.button--grey{border:1px solid #35495e;border-radius:4px;color:#35495e;display:inline-block;margin-left:15px;padding:10px 30px;text-decoration:none}.button--grey:hover{background-color:#35495e;color:#fff}</style><style>span.emoji-mart-emoji[data-v-d2ff5fdf]{padding:0}.selected[data-v-d2ff5fdf]{text-shadow:.25px 0 0 #000}.picker[data-v-d2ff5fdf]{margin-left:auto;margin-right:auto;position:absolute;top:10px;transform:translate(50%,50%)}.top[data-v-d2ff5fdf]{background-color:var(--color-primary);height:3px;width:100%}</style><style>.selected[data-v-ed0088f5]{text-shadow:.9px 0 0}</style><style>span.emoji-mart-emoji[data-v-2649ce61]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-2649ce61]:hover{transform:scale(1.3)}.centered[data-v-2649ce61]{left:50vw;margin-left:auto;margin-right:auto;position:absolute;right:50vw}</style><style>.emoji-mart,.emoji-mart *{-webkit-box-sizing:border-box;box-sizing:border-box;line-height:1.15}.emoji-mart{display:-webkit-box;display:-ms-flexbox;display:flex;font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,sans-serif;font-size:16px;-webkit-box-orient:vertical;-webkit-box-direction:normal;background:#fff;border:1px solid #d9d9d9;border-radius:5px;color:#222427;-ms-flex-direction:column;flex-direction:column;height:420px}.emoji-mart-emoji{background:none;border:none;-webkit-box-shadow:none;box-shadow:none;padding:6px}.emoji-mart-emoji span{display:inline-block}.emoji-mart-preview-emoji .emoji-mart-emoji span{font-size:32px;height:38px;width:38px}.emoji-type-native{font-family:Segoe UI Emoji,Segoe UI Symbol,Segoe UI,Apple Color Emoji,Twemoji Mozilla,Noto Color Emoji,EmojiOne Color,Android Emoji;word-break:keep-all}.emoji-type-image{background-size:6100%}.emoji-type-image.emoji-set-apple{background-image:url(https://unpkg.com/emoji-datasource-apple@15.0.1/img/apple/sheets-256/64.png)}.emoji-type-image.emoji-set-facebook{background-image:url(https://unpkg.com/emoji-datasource-facebook@15.0.1/img/facebook/sheets-256/64.png)}.emoji-type-image.emoji-set-google{background-image:url(https://unpkg.com/emoji-datasource-google@15.0.1/img/google/sheets-256/64.png)}.emoji-type-image.emoji-set-twitter{background-image:url(https://unpkg.com/emoji-datasource-twitter@15.0.1/img/twitter/sheets-256/64.png)}.emoji-mart-bar{border:0 solid #d9d9d9}.emoji-mart-bar:first-child{border-bottom-width:1px;border-top-left-radius:5px;border-top-right-radius:5px}.emoji-mart-bar:last-child{border-bottom-left-radius:5px;border-bottom-right-radius:5px;border-top-width:1px}.emoji-mart-scroll{overflow-y:scroll;position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 6px 6px;will-change:transform;z-index:0;-webkit-overflow-scrolling:touch}.emoji-mart-anchors{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;color:#858585;justify-content:space-between;line-height:0;padding:0 6px}.emoji-mart-anchor{display:block;position:relative;-webkit-box-flex:1;background:none;border:none;-webkit-box-shadow:none;box-shadow:none;-ms-flex:1 1 auto;flex:1 1 auto;overflow:hidden;padding:12px 4px;text-align:center;-webkit-transition:color .1s ease-out;transition:color .1s ease-out}.emoji-mart-anchor-selected,.emoji-mart-anchor:hover{color:#464646}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0}.emoji-mart-anchor-bar{background-color:#464646;bottom:-3px;height:3px;left:0;position:absolute;width:100%}.emoji-mart-anchors i{display:inline-block;max-width:22px;width:100%}.emoji-mart-anchors svg{fill:currentColor;max-height:18px}.emoji-mart .scroller{height:250px;position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 6px 6px;will-change:transform;z-index:0;-webkit-overflow-scrolling:touch}.emoji-mart-search{margin-top:6px;padding:0 6px}.emoji-mart-search input{border:1px solid #d9d9d9;border-radius:25px;display:block;font-size:16px;outline:0;padding:.2em .6em;width:100%}.emoji-mart-search-results{height:250px;overflow-y:scroll}.emoji-mart-category{position:relative}.emoji-mart-category .emoji-mart-emoji span{cursor:default;position:relative;text-align:center;z-index:1}.emoji-mart-category .emoji-mart-emoji:hover:before,.emoji-mart-emoji-selected:before{background-color:#f4f4f4;border-radius:100%;content:"";height:100%;left:0;opacity:1;position:absolute;top:0;width:100%;z-index:0}.emoji-mart-category-label{position:-webkit-sticky;position:sticky;top:0}.emoji-mart-static .emoji-mart-category-label{position:relative;z-index:2}.emoji-mart-category-label h3{background-color:#fff;background-color:#fffffff2;display:block;font-size:16px;font-weight:500;padding:5px 6px;width:100%}.emoji-mart-emoji{display:inline-block;font-size:0;position:relative}.emoji-mart-no-results{color:#858585;font-size:14px;padding-top:70px;text-align:center}.emoji-mart-no-results .emoji-mart-category-label{display:none}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:.2em}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none}.emoji-mart-preview{height:70px;position:relative}.emoji-mart-preview-data,.emoji-mart-preview-emoji,.emoji-mart-preview-skins{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.emoji-mart-preview-emoji{left:12px}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all}.emoji-mart-preview-skins{right:30px;text-align:right}.emoji-mart-preview-name{font-size:14px}.emoji-mart-preview-shortname{color:#888;font-size:12px}.emoji-mart-preview-emoticon+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-shortname{margin-left:.5em}.emoji-mart-preview-emoticon{color:#bbb;font-size:11px}.emoji-mart-title span{display:inline-block;vertical-align:middle}.emoji-mart-title .emoji-mart-emoji{padding:0}.emoji-mart-title-label{color:#999a9c;font-size:21px;font-weight:300}.emoji-mart-skin-swatches{background-color:#fff;border:1px solid #d9d9d9;border-radius:12px;font-size:0;padding:2px 0}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch{padding:0 2px;width:16px}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after{opacity:.75}.emoji-mart-skin-swatch{display:inline-block;-webkit-transition-duration:.125s;transition-duration:.125s;-webkit-transition-property:width,padding;transition-property:width,padding;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;vertical-align:middle;width:0}.emoji-mart-skin-swatch:first-child{-webkit-transition-delay:0s;transition-delay:0s}.emoji-mart-skin-swatch:nth-child(2){-webkit-transition-delay:.03s;transition-delay:.03s}.emoji-mart-skin-swatch:nth-child(3){-webkit-transition-delay:.06s;transition-delay:.06s}.emoji-mart-skin-swatch:nth-child(4){-webkit-transition-delay:.09s;transition-delay:.09s}.emoji-mart-skin-swatch:nth-child(5){-webkit-transition-delay:.12s;transition-delay:.12s}.emoji-mart-skin-swatch:nth-child(6){-webkit-transition-delay:.15s;transition-delay:.15s}.emoji-mart-skin-swatch-selected{padding:0 2px;position:relative;width:16px}.emoji-mart-skin-swatch-selected:after{background-color:#fff;border-radius:100%;content:"";height:4px;left:50%;margin:-2px 0 0 -2px;opacity:0;pointer-events:none;position:absolute;top:50%;-webkit-transition:opacity .2s ease-out;transition:opacity .2s ease-out;width:4px}.emoji-mart-skin{border-radius:100%;display:inline-block;max-width:12px;padding-top:100%;width:100%}.emoji-mart-skin-tone-1{background-color:#ffc93a}.emoji-mart-skin-tone-2{background-color:#fadcbc}.emoji-mart-skin-tone-3{background-color:#e0bb95}.emoji-mart-skin-tone-4{background-color:#bf8f68}.emoji-mart-skin-tone-5{background-color:#9b643d}.emoji-mart-skin-tone-6{background-color:#594539}.emoji-mart .vue-recycle-scroller{position:relative}.emoji-mart .vue-recycle-scroller.direction-vertical:not(.page-mode){overflow-y:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal:not(.page-mode){overflow-x:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal{display:-webkit-box;display:-ms-flexbox;display:flex}.emoji-mart .vue-recycle-scroller__slot{-webkit-box-flex:1;-ms-flex:auto 0 0px;flex:auto 0 0}.emoji-mart .vue-recycle-scroller__item-wrapper{-webkit-box-flex:1;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex:1;flex:1;overflow:hidden;position:relative}.emoji-mart .vue-recycle-scroller.ready .vue-recycle-scroller__item-view{left:0;position:absolute;top:0;will-change:transform}.emoji-mart .vue-recycle-scroller.direction-vertical .vue-recycle-scroller__item-wrapper{width:100%}.emoji-mart .vue-recycle-scroller.direction-horizontal .vue-recycle-scroller__item-wrapper{height:100%}.emoji-mart .vue-recycle-scroller.ready.direction-vertical .vue-recycle-scroller__item-view{width:100%}.emoji-mart .vue-recycle-scroller.ready.direction-horizontal .vue-recycle-scroller__item-view{height:100%}.emoji-mart .resize-observer[data-v-b329ee4c]{background-color:transparent;border:none;opacity:0}.emoji-mart .resize-observer[data-v-b329ee4c],.emoji-mart .resize-observer[data-v-b329ee4c] object{display:block;height:100%;left:0;overflow:hidden;pointer-events:none;position:absolute;top:0;width:100%;z-index:-1}.emoji-mart-search .hidden{display:none;visibility:hidden}</style><style>span.emoji-mart-emoji[data-v-03afe4fa]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-03afe4fa]:hover{transform:scale(1.3)}.picker[data-v-03afe4fa]{left:0;margin-left:auto;margin-right:auto;position:absolute;right:0;z-index:10000000000}.localepicker[data-v-03afe4fa]{background-color:var(--bg)}.localeText[data-v-03afe4fa]{color:var(--color-primary)}</style><style>.tag[data-v-eb2063c1]{background-color:var(--color-tag);transition:transform .2s}.tag[data-v-eb2063c1]:hover{transform:scale(1.05)}</style><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.C_qR6n1r.css" crossorigin><link rel="stylesheet" href="/_nuxt/app.BAXwoxDU.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/2025/07/21/upgrading-my-static-nuxt-blog-from-nuxt-3-to-nuxt-4/_payload.json?711989cd-b755-45e7-b273-f0754c0f755f"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/U2gz5u3s.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D3Q7tgbv.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CAEbC5FA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BE4wn3fs.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ivQeT1ix.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BwRoW_yn.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cz9IHiFo.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C_-EP1mu.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CeeZmN6j.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CDdUvEIO.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/PV-tEdEs.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CZYsndi7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/iyVKi4R7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C94jHEjt.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dp5pXjnV.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BWfwsB7c.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CE5h_3Zy.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Fo6dHlhp.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/711989cd-b755-45e7-b273-f0754c0f755f.json"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Dk67likk.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BU1UZLbD.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CZvWFDQc.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/yEdly4JE.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CvvIFhEj.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/B5fv-1Xq.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DFI9gCi9.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DE3BAxce.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/uYY1jy-2.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BiTVazLu.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DnLIRtEt.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CZsi5-5V.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BDjFqGfp.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Cebmboq7.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CRRfaG9P.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/fV3BeRRD.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/6PKCu2pi.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/HSA0rOnf.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Dbk39hGM.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DlT8tiJO.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/b04OUO_Q.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DPR8_a9D.js"><meta hid="description" name="description" content="Brian Caffey's personal website"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="robots" content="all"><meta property="twitter:creator" content="@briancaffey"><meta property="twitter:site" content="@briancaffey"><meta property="og:title" content="Upgrading my Blog to Nuxt 4"><meta property="og:description" content="This article details my process of upgrading my static GitHub Pages Blog from Nuxt 3 to Nuxt 4, and an upgrade of the headless CMS that powers my site, Nuxt Content, from v2 to v3"><meta property="og:image" content="https://briancaffey.github.io/static/nuxt4/nuxt4.png"><meta property="twitter:image" content="https://briancaffey.github.io/static/nuxt4/nuxt4.png"><meta property="twitter:card" content="summary_large_image"><script type="module" src="/_nuxt/U2gz5u3s.js" crossorigin></script><script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"-mode",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"-mode",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}</script></head><body><div id="__nuxt"><div><div><div data-v-d2ff5fdf><div class="mx-auto flex py-2 px-2 sm:px-4 items-center max-w-6xl justify-center" data-v-d2ff5fdf><div class="justify-left flex-grow flex-cols-4" data-v-d2ff5fdf><a href="/" class="text-xl" data-v-d2ff5fdf><span class="hidden sm:inline text-2xl" data-v-d2ff5fdf>Brian Caffey</span><span class="inline sm:hidden" data-v-d2ff5fdf>JBC</span></a></div><div class="flex-grow relative" data-v-d2ff5fdf><nav z-index="10000" data-v-d2ff5fdf data-v-ed0088f5><div data-v-ed0088f5><ul class="items-right float-right hidden md:flex" data-v-ed0088f5><li class="px-4 text-lg" data-v-ed0088f5><a href="/blog/1" class="" data-v-ed0088f5>Blog</a></li><li class="px-4 text-lg" data-v-ed0088f5><a href="/contact" class="" data-v-ed0088f5>Contact</a></li></ul><div class="flex justify-end md:hidden z-1000" data-v-ed0088f5><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-ed0088f5><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-ed0088f5><title data-v-ed0088f5>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-ed0088f5></path></svg></button></div><!----></div></nav></div></div><div class="picker" data-v-d2ff5fdf><div class="centered" data-v-d2ff5fdf data-v-2649ce61><div class="grid items-center justify-center" data-v-2649ce61><ul class="flex px-4" data-v-2649ce61><!--[--><li class="md:px-1 px-1 cursor-pointer" data-v-2649ce61><span aria-label="🖥️, desktop_computer" class="emoji-mart-emoji" data-v-2649ce61><span class="emoji-set-apple emoji-type-image" style="background-position:51.67% 95%;width:32px;height:32px;"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-2649ce61><span aria-label="🌞, sun_with_face" class="emoji-mart-emoji" data-v-2649ce61><span class="emoji-set-apple emoji-type-image" style="background-position:8.33% 48.33%;width:32px;height:32px;"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-2649ce61><span aria-label="🌚, new_moon_with_face" class="emoji-mart-emoji" data-v-2649ce61><span class="emoji-set-apple emoji-type-image" style="background-position:8.33% 41.67%;width:32px;height:32px;"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-2649ce61><span aria-label="☕, coffee" class="emoji-mart-emoji" data-v-2649ce61><span class="emoji-set-apple emoji-type-image" style="background-position:95% 30%;width:32px;height:32px;"></span></span></li><!--]--><li class="md:px-1 px-1 cursor-pointer" data-v-2649ce61><div data-v-2649ce61 data-v-03afe4fa><ul data-v-03afe4fa><li class="md:px-1 px-1 cursor-pointer" data-v-03afe4fa><span aria-label="🇺🇸, us, flag-us" class="emoji-mart-emoji" data-v-03afe4fa><span class="emoji-set-apple emoji-type-image" style="background-position:6.67% 45%;width:32px;height:32px;"></span></span></li></ul><div class="rounded-md z-10 picker" data-v-03afe4fa><!----></div></div></li></ul></div></div></div></div><!--[--><article><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="This article details my process of upgrading my static GitHub Pages Blog from Nuxt 3 to Nuxt 4, and an upgrade of the headless CMS that powers my site, Nuxt Content, from v2 to v3" data-nuxt-img srcset="/_ipx/f_webp/static/nuxt4/nuxt4.png 1x, /_ipx/f_webp/static/nuxt4/nuxt4.png 2x" class="pt-2 w-full object-cover" style="height:32rem;" src="/_ipx/f_webp/static/nuxt4/nuxt4.png"><div class="mx-auto max-w-5xl px-2 sm:px-4 md:px-4 lg:px-16 mt-2"><h1 class="prose text-4xl leading-9 py-4 font-bold">Upgrading my Blog to Nuxt 4</h1><div class="flex flex-wrap -ml-1 py-2"><!--[--><a href="/blog/tags/nuxt/" class="" data-v-eb2063c1><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-eb2063c1>nuxt 🏷️ <!----></div></a><a href="/blog/tags/vue/" class="" data-v-eb2063c1><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-eb2063c1>vue 🏷️ <!----></div></a><a href="/blog/tags/blogging/" class="" data-v-eb2063c1><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-eb2063c1>blogging 🏷️ <!----></div></a><a href="/blog/tags/cms/" class="" data-v-eb2063c1><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-eb2063c1>cms 🏷️ <!----></div></a><!--]--></div><!----><p class="blog-date text-gray-500 mb-4">Last updated July 21, 2025</p><!----><div class="markdown"><p><!--[-->This article will share my experience upgrading my Nuxt blog from Nuxt 3 to Nuxt 4. I&#39;m following the official <a href="https://nuxt.com/docs/4.x/getting-started/upgrade" rel="nofollow"><!--[-->Upgrade Guide<!--]--></a> from Nuxt. It will be mostly unfiltered and I&#39;ll try to document things as they happen. Let&#39;s go!<!--]--></p><p><!--[-->First, I&#39;ll do this on a new branch:<!--]--></p><pre class="language-text"><!--[--><code>git branch -b nuxt4-upgrade
</code><!--]--></pre><p><!--[-->The first step in the migration guide says to run:<!--]--></p><pre class="language-text"><!--[--><code>yarn nuxt upgrade
</code><!--]--></pre><p><!--[-->This gave me an error.<!--]--></p><pre class="language-text"><!--[--><code>error @nuxt/vite-builder@4.0.0: The engine &quot;node&quot; is incompatible with this module. Expected version &quot;^20.19.0 || &gt;=22.12.0&quot;. Got &quot;20.18.0&quot;
error Found incompatible module.
info Visit https://yarnpkg.com/en/docs/cli/add for documentation about this command.

 ERROR  Command failed: yarn add -D nuxt                                                  3:41:22 PM

  at genericNodeError (node:internal/errors:984:15)
  at wrappedFn (node:internal/errors:538:14)
  at checkExecSyncError (node:child_process:891:11)
  at execSync (node:child_process:963:15)
  at Object.run (node_modules/nuxi/dist/chunks/upgrade.mjs:99:5)
  at async runCommand$1 (node_modules/nuxi/dist/shared/nuxi.6aad497e.mjs:1648:16)
  at async runCommand$1 (node_modules/nuxi/dist/shared/nuxi.6aad497e.mjs:1639:11)
  at async runMain$1 (node_modules/nuxi/dist/shared/nuxi.6aad497e.mjs:1777:7)



 ERROR  Command failed: yarn add -D nuxt                                                  3:41:22 PM

error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
</code><!--]--></pre><p><!--[-->First, I need to upgrade node. I use nvm, so this is easy. Let&#39;s see what node versions I have installed:<!--]--></p><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ nvm list
-&gt;     v20.18.0
       v22.15.0
default -&gt; 20 (-&gt; v20.18.0)
iojs -&gt; N/A (default)
unstable -&gt; N/A (default)
node -&gt; stable (-&gt; v22.15.0) (default)
stable -&gt; 22.15 (-&gt; v22.15.0) (default)
lts/* -&gt; lts/jod (-&gt; v22.15.0)
lts/argon -&gt; v4.9.1 (-&gt; N/A)
lts/boron -&gt; v6.17.1 (-&gt; N/A)
lts/carbon -&gt; v8.17.0 (-&gt; N/A)
lts/dubnium -&gt; v10.24.1 (-&gt; N/A)
lts/erbium -&gt; v12.22.12 (-&gt; N/A)
lts/fermium -&gt; v14.21.3 (-&gt; N/A)
lts/gallium -&gt; v16.20.2 (-&gt; N/A)
lts/hydrogen -&gt; v18.20.8 (-&gt; N/A)
lts/iron -&gt; v20.19.1 (-&gt; N/A)
lts/jod -&gt; v22.15.0
</code><!--]--></pre><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ nvm install 22.17.1
Downloading and installing node v22.17.1...
Downloading https://nodejs.org/dist/v22.17.1/node-v22.17.1-darwin-arm64.tar.xz...
###################################################################################################################################################################################### 100.0%
Computing checksum with sha256sum
Checksums matched!
Now using node v22.17.1 (npm v10.9.2)
</code><!--]--></pre><p><!--[-->OK, great, now let&#39;s run that <code><!--[-->yarn nuxt upgrade<!--]--></code> again:<!--]--></p><pre class="language-text"><!--[--><code>yarn nuxt upgrade
</code><!--]--></pre><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ yarn nuxt upgrade
yarn run v1.22.22
error Command &quot;nuxt&quot; not found.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
</code><!--]--></pre><p><!--[-->Hmm, I&#39;ll try adding nuxt again:<!--]--></p><pre class="language-text"><!--[--><code>yarn add nuxt@^4.0.0

...
✨  Done in 36.03s.
</code><!--]--></pre><p><!--[-->OK, great! Now I have Nuxt 4 installed.<!--]--></p><p><!--[-->The next section is about <code><!--[-->Migrating Using Codemods<!--]--></code>. I&#39;ll try running this:<!--]--></p><blockquote><!--[--><p><!--[-->This command will execute all codemods in sequence, with the option to deselect any that you do not wish to run. Each codemod is also listed below alongside its respective change and can be executed independently.<!--]--></p><!--]--></blockquote><pre class="language-text"><!--[--><code>yarn dlx codemod@latest nuxt/4/migration-recipe
</code><!--]--></pre><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ yarn dlx codemod@latest nuxt/4/migration-recipe
yarn run v1.22.22
error Command &quot;dlx&quot; not found.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
</code><!--]--></pre><p><!--[-->OK, I guess I need to add <code><!--[-->dlx<!--]--></code> with yarn first:<!--]--></p><pre class="language-text"><!--[--><code>yarn add dlx
</code><!--]--></pre><pre class="language-text"><!--[--><code>success Saved lockfile.
success Saved 2 new dependencies.
info Direct dependencies
└─ dlx@0.2.1
info All dependencies
├─ dlx@0.2.1
└─ underscore@1.13.7
✨  Done in 2.52s.
</code><!--]--></pre><p><!--[-->But I still got the same error about <code><!--[-->dlx<!--]--></code>, so I asked cursor:<!--]--></p><pre class="language-text"><!--[--><code>I&#39;m trying to run this yarn command:

yarn dlx codemod@latest nuxt/4/migration-recipe


But I&#39;m getting an error:

yarn dlx codemod@latest nuxt/4/migration-recipe
yarn run v1.22.22
error Command &quot;dlx&quot; not found.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.

How can I fix this?
</code><!--]--></pre><hr><p><!--[-->The issue is that you&#39;re using Yarn v1.22.22, which doesn&#39;t have the <code><!--[-->dlx<!--]--></code> command. The <code><!--[-->dlx<!--]--></code> command was introduced in Yarn v2+ (Berry). Here are several ways to fix this:<!--]--></p><h2 id="option-1-use-npx-recommended"><a href="#option-1-use-npx-recommended"><!--[-->Option 1: Use npx (Recommended)<!--]--></a></h2><p><!--[-->Since you&#39;re using Yarn v1, you can use <code><!--[-->npx<!--]--></code> instead:<!--]--></p><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span class="sScJk">npx</span><span class="sZZnC"> codemod@latest</span><span class="sZZnC"> nuxt/4/migration-recipe
</span></span></code><!--]--></pre><h2 id="option-2-use-yarn-create-alternative"><a href="#option-2-use-yarn-create-alternative"><!--[-->Option 2: Use yarn create (Alternative)<!--]--></a></h2><p><!--[-->You can try using yarn&#39;s create command:<!--]--></p><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span class="sScJk">yarn</span><span class="sZZnC"> create</span><span class="sZZnC"> codemod@latest</span><span class="sZZnC"> nuxt/4/migration-recipe
</span></span></code><!--]--></pre><h2 id="option-3-install-codemod-globally-first"><a href="#option-3-install-codemod-globally-first"><!--[-->Option 3: Install codemod globally first<!--]--></a></h2><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span class="sScJk">yarn</span><span class="sZZnC"> global</span><span class="sZZnC"> add</span><span class="sZZnC"> codemod
</span></span><span class="line" line="2"><span class="sScJk">codemod@latest</span><span class="sZZnC"> nuxt/4/migration-recipe
</span></span></code><!--]--></pre><h2 id="option-4-use-the-full-path"><a href="#option-4-use-the-full-path"><!--[-->Option 4: Use the full path<!--]--></a></h2><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span class="sScJk">yarn</span><span class="sZZnC"> exec</span><span class="sZZnC"> codemod@latest</span><span class="sZZnC"> nuxt/4/migration-recipe
</span></span></code><!--]--></pre><h2 id="option-5-upgrade-to-yarn-v2-optional"><a href="#option-5-upgrade-to-yarn-v2-optional"><!--[-->Option 5: Upgrade to Yarn v2+ (Optional)<!--]--></a></h2><p><!--[-->If you want to use <code><!--[-->yarn dlx<!--]--></code>, you could upgrade to Yarn v2+:<!--]--></p><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span class="sJ8bj"># Enable Yarn v2+ for this project
</span></span><span class="line" line="2"><span class="sScJk">yarn</span><span class="sZZnC"> set</span><span class="sZZnC"> version</span><span class="sZZnC"> berry
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="sJ8bj"># Then you can use dlx
</span></span><span class="line" line="5"><span class="sScJk">yarn</span><span class="sZZnC"> dlx</span><span class="sZZnC"> codemod@latest</span><span class="sZZnC"> nuxt/4/migration-recipe
</span></span></code><!--]--></pre><p><!--[--><strong><!--[-->I recommend using Option 1 (<code><!--[-->npx<!--]--></code>)<!--]--></strong> since it&#39;s the most straightforward and doesn&#39;t require changing your package manager setup. The <code><!--[-->npx<!--]--></code> command is available by default with Node.js and will work perfectly for running the codemod.<!--]--></p><p><!--[-->After running the codemod, you can continue with the manual upgrade steps I outlined in the previous plan.<!--]--></p><hr><p><!--[-->OK, I&#39;ll try upgrading yarn later, and for now I&#39;ll go with using <code><!--[-->npx<!--]--></code>:<!--]--></p><pre class="language-text"><!--[--><code>npx codemod@latest nuxt/4/migration-recipe
</code><!--]--></pre><p><!--[-->OK, that worked, now I got the list of options to choose from for my Nuxt 4 upgrade:<!--]--></p><pre class="language-text"><!--[--><code>✔ Successfully downloaded &quot;nuxt/4/migration-recipe&quot; from the registry.
? Press Enter to run the selected codemods in order. You can deselect anything you don’t want. (Press
&lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection, and &lt;enter&gt; to proceed)
❯◉ nuxt/4/absolute-watch-path
 ◉ nuxt/4/default-data-error-value
 ◉ nuxt/4/deprecated-dedupe-value
 ◉ nuxt/4/file-structure
 ◉ nuxt/4/shallow-function-reactivity
 ◉ nuxt/4/template-compilation-changes
</code><!--]--></pre><p><!--[-->OK! That seems to work! It ran each codemod, for example:<!--]--></p><pre class="language-text"><!--[--><code>╭──────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                                  │
│                                                                                                  │
│      Codemod: nuxt/4/absolute-watch-path@1.0.3                                                   │
│      Target: /Users/brian/git/briancaffey.github.io                                              │
│                                                                                                  │
│      Using paths provided by codemod settings                                                    │
│      Included patterns: **/*.js, **/*.jsx, **/*.ts, **/*.tsx, **/*.vue                           │
│      Patterns excluded by default: **/*.d.ts, **/node_modules/**/*.*, **/.next/**/*.*,           │
│      **/dist/**/*.*, **/build/**/*.*, **/.git/**/*.*,                                            │
│      **/.svn/**/*.*, **/.hg/**/*.*, **/.bzr/**/*.*,                                              │
│      **/_darcs/**/*.*, **/_MTN/**/*.*, **/_FOSSIL_, **/.fslckout,                                │
│      **/.view/**/*.*                                                                             │
│      Patterns excluded from gitignore: **/.vscode/**/*.*, **/node_modules, /logs, **/*.log,      │
│      **/npm-debug.log*, **/yarn-debug.log*, **/yarn-error.log*,                                  │
│      **/pids, **/*.pid, **/*.seed, **/*.pid.lock, **/lib-cov,                                    │
│      **/coverage, **/.nyc_output, **/.grunt, **/bower_components,                                │
│      **/.lock-wscript, **/build/Release, **/node_modules/**/*.*,                                 │
│      **/jspm_packages/**/*.*, **/typings/**/*.*, **/.npm,                                        │
│      **/.eslintcache, **/.node_repl_history, **/*.tgz,                                           │
│      **/.yarn-integrity, **/.env, **/.cache, **/.next, **/.nuxt,                                 │
│      **/dist, **/.vuepress/dist, **/.serverless, **/.idea,                                       │
│      **/sw.*, **/.DS_Store, **/*.swp, **/notes, **/.output                                       │
│                                                                                                  │
│      Running in 4 threads                                                                        │
│      File formatting disabled                                                                    │
│                                                                                                  │
│                                                                                                  │
╰──────────────────────────────────────────────────────────────────────────────────────────────────╯
</code><!--]--></pre><p><!--[-->The big change at this point is that most of the code was moved to the <code><!--[-->/app<!--]--></code> directory:<!--]--></p><pre class="language-text"><!--[--><code>Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)
        app/
        content/2025/07/21/

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
</code><!--]--></pre><p><!--[-->Is that it? Let&#39;s try running <code><!--[-->yarn dev<!--]--></code><!--]--></p><pre class="language-text"><!--[--><code>yarn dev
...
 ERROR  Cannot start nuxt:  ENOENT: no such file or directory, open &#39;/Users/brian/git/briancaffey.github.io/app/i18n/en-US.js&#39;                           4:12:36 PM
</code><!--]--></pre><p><!--[-->OK, we have an error related to i18n. I have struggled with i18n a fair bit when doing major changes to my site.<!--]--></p><p><!--[-->It looks like Nuxt 4 expects the i18n folder to be under tha new <code><!--[-->/app<!--]--></code> directory, but it is still in the root directory, so let&#39;s move that and try running <code><!--[-->yarn dev<!--]--></code> again.<!--]--></p><p><!--[-->Cool, no errors:<!--]--></p><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ yarn dev
yarn run v1.22.22
$ nuxi dev --host
Nuxt 4.0.0 with Nitro 2.12.0                                              nuxi 4:16:03 PM
                                                                               4:16:03 PM

              █▀▀▀▀▀▀▀██▀▀▀█▀██▀█▀▀▀▀▀▀▀█
              █ █▀▀▀█ ██▀▀ ▄▄██▀█ █▀▀▀█ █
              █ █   █ █ █ ▄▀▄ ▄▄█ █   █ █
              █ ▀▀▀▀▀ █▀▄ █▀▄▀█ █ ▀▀▀▀▀ █
              █▀▀███▀▀▀█ ▀█ ▀█▀ ███▀▀████
              ██ ▄ ▄▀▀▀█▀▄▀▀▀▀ ▄▄▀▀▄ ▄ ▀█
              █▀█▄▀▀ ▀▀ ▀ ▄▀█▀▄ ▀▀█▄▄██ █
              █ ▄██ █▀█▀▀▄█▄ ▄ █▀█▀█▀█ ▀█
              █ █▀█  ▀▄▄█▄ ▀▀▄█ ▀▀▀ █ █▄█
              █▀▀▀▀▀▀▀█ ▀▄  █ ▄ █▀█ ▀▄█▀█
              █ █▀▀▀█ █▄ ▀█▄▀▄▀ ▀▀▀ ▀▀███
              █ █   █ ██▄▀▄ ████▀▄▄█▄▀▄ █
              █ ▀▀▀▀▀ █ ▀ ▀▄█▀  █ ▄▄▀██ █
              ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀

  ➜ Local:    http://localhost:3000/
  ➜ Network:  http://192.168.5.226:3000/ [QR code]

ℹ Using default Tailwind CSS file                            nuxt:tailwindcss 4:16:04 PM

[4:16:04 PM]  WARN  Locales en-US, fr-FR, zh-ZH, ru-RU, ja-JP, hi-IN uses deprecated iso property, this will be replaced with language in v9

  ➜ DevTools: press Shift + Option + D in the browser (v2.6.2)                 4:16:04 PM

✔ Vite client built in 45ms                                                   4:16:05 PM
✔ Vite server built in 30ms                                                   4:16:05 PM
✔ Nuxt Nitro server built in 1071ms                                     nitro 4:16:07 PM
ℹ Vite client warmed up in 1ms                                                4:16:07 PM
ℹ Vite server warmed up in 63ms                                               4:16:07 PM
[4:16:25 PM] ℹ ✨ new dependencies optimized: @vue/devtools-core, @vue/devtools-kit, vue-disqus, vue3-apexcharts, pinia, @intlify/shared, is-https, @intlify/core-base
ℹ ✨ optimized dependencies changed. reloading                                4:16:25 PM
</code><!--]--></pre><p><!--[-->But I am getting a big <code><!--[-->500<!--]--></code> error in the browser:<!--]--></p><pre class="language-text"><!--[--><code>500
orgTransform.apply is not a function

Customize this page
at createError (/Users/brian/git/briancaffey.github.io/node_modules/h3/dist/index.mjs:71:15)
at /Users/brian/git/briancaffey.github.io/node_modules/@nuxt/vite-builder/dist/index.mjs:403:21)
at async processMessage (/Users/brian/git/briancaffey.github.io/node_modules/@nuxt/vite-builder/dist/index.mjs:386:30)
</code><!--]--></pre><p><!--[-->Searching GitHub&#39;s code, I it looks like <code><!--[-->orgTransform.apply<!--]--></code> comes from <code><!--[-->rdhainaut/unplugin-vue-i18n · lib/index.mjs<!--]--></code>, so this is likely another i18n issue.<!--]--></p><pre class="language-text"><!--[--><code>&quot;@nuxtjs/i18n@^8.3.3&quot;:
  version &quot;8.5.6&quot;
  resolved &quot;https://registry.yarnpkg.com/@nuxtjs/i18n/-/i18n-8.5.6.tgz#d65b375fba5244d83fc6833a604e2b532a64bef2&quot;
  integrity sha512-L+g+LygKNoaS/AXExk7tzS9wSNn9QdP1T9VdTjjEGYftpeFgv2U8AQsY0dQAhgPIbXXhIAkNYxTk4YcINj9CfA==
  dependencies:
    &quot;@intlify/h3&quot; &quot;^0.5.0&quot;
    &quot;@intlify/shared&quot; &quot;^9.14.1&quot;
    &quot;@intlify/unplugin-vue-i18n&quot; &quot;^3.0.1&quot;
</code><!--]--></pre><p><!--[-->Let&#39;s make sure that I&#39;m on the latest version of Nuxt&#39;s i18n:<!--]--></p><pre class="language-text"><!--[--><code>npx nuxi module add i18n
</code><!--]--></pre><pre class="language-text"><!--[--><code>yarn add @nuxtjs/i18n@^10.0.0
</code><!--]--></pre><p><!--[-->After upgrading <code><!--[-->@nuxtjs/i18n<!--]--></code> to v10.0.0 I got another i18n error when running <code><!--[-->yarn dev<!--]--></code>:<!--]--></p><pre class="language-text"><!--[--><code>[4:26:12 PM]  ERROR  Cannot start nuxt:  ENOENT: no such file or directory, open &#39;/Users/brian/git/briancaffey.github.io/i18n/locales/i18n/en-US.js&#39;

    at readFileSync (node:fs:441:20)
    at getLocaleType (node_modules/@nuxtjs/i18n/dist/module.mjs:143:34)
    at resolveLocales (node_modules/@nuxtjs/i18n/dist/module.mjs:128:20)
    at resolveLocaleInfo (node_modules/@nuxtjs/i18n/dist/module.mjs:1511:20)
    at async node_modules/@nuxtjs/i18n/dist/module.mjs:1926:7
    at async initNuxt (node_modules/nuxt/dist/index.mjs:5613:3)
    at async NuxtDevServer._load (node_modules/@nuxt/cli/dist/chunks/index.mjs:211:5)
    at async NuxtDevServer.load (node_modules/@nuxt/cli/dist/chunks/index.mjs:139:7)
    at async NuxtDevServer.init (node_modules/@nuxt/cli/dist/chunks/index.mjs:130:5)
    at async initialize (node_modules/@nuxt/cli/dist/chunks/index.mjs:426:3)
</code><!--]--></pre><p><!--[-->OK! So I rarranged my <code><!--[-->i18n<!--]--></code> folder to match watch it was looking for:<!--]--></p><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ tree i18n -L 3
i18n
├── i18n.config.js
└── locales
    └── i18n
        ├── en-US.js
        ├── fr-FR.js
        ├── hi-IN.js
        ├── jp-JP.js
        ├── ru-RU.js
        └── zh-ZH.js
</code><!--]--></pre><p><!--[-->Now I have my language files duplicated, however. But at least I&#39;m able to visit my site in the browser! And I can see in the NuxtDevTools window that I am using <code><!--[-->v4.0.0<!--]--></code>!<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="NuxtDevTools" data-nuxt-img srcset="/_ipx/_/static/nuxt4/nuxt-dev-tools.png 1x, /_ipx/_/static/nuxt4/nuxt-dev-tools.png 2x" src="/_ipx/_/static/nuxt4/nuxt-dev-tools.png"><!--]--></p><pre class="language-text"><!--[--><code>  ➜ Local:    http://localhost:3000/
  ➜ Network:  http://192.168.5.226:3000/ [QR code]

ℹ Using default Tailwind CSS file                                                    nuxt:tailwindcss 4:31:24 PM
  ➜ DevTools: press Shift + Option + D in the browser (v2.6.2)                                         4:31:24 PM

ℹ Re-optimizing dependencies because lockfile has changed                                             4:31:25 PM
✔ Vite client built in 61ms                                                                           4:31:25 PM
✔ Vite server built in 42ms                                                                           4:31:26 PM
✔ Nuxt Nitro server built in 1422ms                                                             nitro 4:31:27 PM
ℹ Vite client warmed up in 1ms                                                                        4:31:27 PM
ℹ Vite server warmed up in 164ms                                                                      4:31:27 PM
[4:31:38 PM]  WARN  [@nuxtjs/mdc] Language &quot;Dockerfile&quot; is not loaded to the Shiki highlighter, fallback to plain text. Add the language to &quot;mdc.highlight.langs&quot; to fix this.
[4:31:38 PM]  WARN  [@nuxtjs/mdc] Language &quot;Dockerfile&quot; is not loaded to the Shiki highlighter, fallback to plain text. Add the language to &quot;mdc.highlight.langs&quot; to fix this.
[4:31:38 PM]  WARN  [@nuxtjs/mdc] Language &quot;vue&quot; is not loaded to the Shiki highlighter, fallback to plain text. Add the language to &quot;mdc.highlight.langs&quot; to fix this.
[4:31:48 PM] ℹ ✨ new dependencies optimized: @vue/devtools-core, @vue/devtools-kit, vue-disqus, vue3-apexcharts, pinia
ℹ ✨ optimized dependencies changed. reloading                                                        4:31:48 PM
ℹ ✨ new dependencies optimized: @vueuse/components                                                   4:31:50 PM
ℹ ✨ optimized dependencies changed. reloading                                                        4:31:50 PM
</code><!--]--></pre><p><!--[-->I went through each of my project dependencies and updated them to the latest versions. After doing this and resolving some small issues, I got the following when running <code><!--[-->yarn dev<!--]--></code>:<!--]--></p><pre class="language-text"><!--[--><code>[@nuxt/content 7:10:17 PM]  WARN  No content configuration found, falling back to default collection. In order to have full control over your collections, create the config file in project root. See: https://content.nuxt.com/docs/getting-started/installation

ℹ Using default Tailwind CSS file                                                                 nuxt:tailwindcss 7:10:17 PM
  ➜ DevTools: press Shift + Option + D in the browser (v2.6.2)                                                      7:10:17 PM


 ERROR  Nuxt Content requires better-sqlite3 module to operate.                                       @nuxt/content 7:10:18 PM

                                                                                                                    7:10:18 PM
                                                                                                                    7:10:18 PM
❯ Do you want to install better-sqlite3 package?
● Yes / ○ No
</code><!--]--></pre><p><!--[-->After installing this I got another error!<!--]--></p><p><!--[-->Upgrading from Nuxt Content v2 to v3 introduced some breaking changes, so I had to work through those. <a href="https://content.nuxt.com/docs/getting-started/migration" rel="nofollow"><!--[-->https://content.nuxt.com/docs/getting-started/migration<!--]--></a><!--]--></p><p><!--[-->This is one of the errors I got after upgrading Nuxt Content from v2 to v3.<!--]--></p><pre class="language-text"><!--[--><code> ERROR  [request error] [unhandled] [GET] http://localhost:3000/blog/1                                                                                                                      7:14:09 PM


ℹ Error: Cannot read properties of undefined (reading &#39;length&#39;)

 ⁃ at _sfc_ssrRender (app/pages/blog/[number].vue:78:62)

   37 ┃
   38 ┃  const { data: paginatedItems } = await useAsyncData(route.path, () =&gt;
   39 ┃    queryCollection(&quot;/&quot;)
   40 ┃      .where({ draft: { $ne: true } })
   41 ┃      .sort({&#39;date&#39;: -1})
   42 ┃      .limit(10)
   43 ┃      .skip(9 * (pageNo - 1))
   44 ┃      .find()
   45 ┃  )
   46 ┃  &lt;/script&gt;
   47 ┃
</code><!--]--></pre><p><!--[-->The API changed and it uses a SQL-like query language. The migration docs mentioned this:<!--]--></p><blockquote><!--[--><p><!--[-->The new API is backed by SQL and content queries happens within a specific collection.<!--]--></p><!--]--></blockquote><p><!--[-->Now the above query is written more like this with the new version of Nuxt Content:<!--]--></p><pre class="language-js shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span class="szBVR">const</span><span class="sVt8B"> { </span><span class="s4XuR">data</span><span class="sVt8B">: </span><span class="sj4cs">paginatedItems</span><span class="sVt8B"> } </span><span class="szBVR">=</span><span class="szBVR"> await</span><span class="sScJk"> useAsyncData</span><span class="sVt8B">(route.path, () </span><span class="szBVR">=&gt;
</span></span><span class="line" line="2"><span class="sScJk">  queryCollection</span><span class="sVt8B">(</span><span class="sZZnC">&quot;blog&quot;</span><span class="sVt8B">)
</span></span><span class="line" line="3"><span class="sVt8B">    .</span><span class="sScJk">order</span><span class="sVt8B">(</span><span class="sZZnC">&quot;date&quot;</span><span class="sVt8B">, </span><span class="sZZnC">&quot;DESC&quot;</span><span class="sVt8B">)
</span></span><span class="line" line="4"><span class="sVt8B">    .</span><span class="sScJk">limit</span><span class="sVt8B">(</span><span class="sj4cs">10</span><span class="sVt8B">)
</span></span><span class="line" line="5"><span class="sVt8B">    .</span><span class="sScJk">skip</span><span class="sVt8B">(</span><span class="sj4cs">9</span><span class="szBVR"> *</span><span class="sVt8B"> (pageNo </span><span class="szBVR">-</span><span class="sj4cs"> 1</span><span class="sVt8B">))
</span></span><span class="line" line="6"><span class="sVt8B">    .</span><span class="sScJk">all</span><span class="sVt8B">()
</span></span><span class="line" line="7"><span class="sVt8B">)
</span></span></code><!--]--></pre><h2 id="yarn-generate"><a href="#yarn-generate"><!--[--><code><!--[-->yarn generate<!--]--></code><!--]--></a></h2><p><!--[-->After fixing the Nuxt Content query syntax for Nuxt Content v3, I tried running <code><!--[-->yarn generate<!--]--></code> to build my static site. This can often uncover issues that you won&#39;t see when just running <code><!--[-->yarn dev<!--]--></code>. Right away I found an issue with my Pinia Store. It couldn&#39;t find the file for my store. The codemod migration tool did not move my <code><!--[-->store<!--]--></code> folder into the <code><!--[-->/app<!--]--></code> directory, so I had to do that manually.<!--]--></p><p><!--[-->OK! After fixing the Pinia Store issues I was able to run <code><!--[-->yarn generate<!--]--></code> successfully!<!--]--></p><pre class="language-text"><!--[--><code>ℹ Prerendered 785 routes in 93.991 seconds
✔ Generated public .output/public
✔ You can preview this build using npx serve .output/public
✔ You can now deploy .output/public to any static hosting!
✨  Done in 105.98s.
</code><!--]--></pre><h2 id="cicd"><a href="#cicd"><!--[-->CI/CD<!--]--></a></h2><p><!--[-->To deploy my blog to <code><!--[-->briancaffey.github.io<!--]--></code> I just have to push my working changes to the <code><!--[-->master<!--]--></code> branch of my GitHub repository. GitHub Actions builds the site and pushes the build assets to GitHub Pages for me. To avoid any issues I need to make sure I&#39;m using the correct version of <code><!--[-->node<!--]--></code>.<!--]--></p><pre class="language-text"><!--[--><code>- name: Setup Node
  uses: actions/setup-node@v4
  with:
    node-version: &quot;20&quot;
</code><!--]--></pre><p><!--[-->I updated <code><!--[-->&quot;20&quot;<!--]--></code> to <code><!--[-->&quot;22.17.1&quot;<!--]--></code><!--]--></p><h2 id="datacontentcontentssqlite"><a href="#datacontentcontentssqlite"><!--[--><code><!--[-->.data/content/contents.sqlite<!--]--></code><!--]--></a></h2><p><!--[-->Something else I noticed is this new sqlite file. This is just for debugging, so we can add <code><!--[-->.data<!--]--></code> to <code><!--[-->.gitignore<!--]--></code> (<a href="https://content.nuxt.com/docs/advanced/tools#locate-your-sqlite-database" rel="nofollow"><!--[-->https://content.nuxt.com/docs/advanced/tools#locate-your-sqlite-database<!--]--></a>)<!--]--></p><h2 id="yarn-lint-error"><a href="#yarn-lint-error"><!--[--><code><!--[-->yarn lint<!--]--></code> error<!--]--></a></h2><p><!--[-->I forgot to see if the code would properly lint, so on pushing to the master branch I got a failed deployment pipeline. Running <code><!--[-->yarn lint<!--]--></code> from my Mac I get the same error:<!--]--></p><pre class="language-text"><!--[--><code>~/git/briancaffey.github.io$ yarn lint
yarn run v1.22.22
$ eslint .

Oops! Something went wrong! :(

ESLint: 9.31.0

TypeError [ERR_INVALID_MODULE_SPECIFIER]: Invalid module &quot;.nuxt/eslint.config.mjs&quot; is not a valid package name imported from /Users/brian/git/briancaffey.github.io/eslint.config.mjs
    at parsePackageName (node:internal/modules/package_json_reader:211:11)
    at Object.getPackageJSONURL (node:internal/modules/package_json_reader:222:53)
    at packageResolve (node:internal/modules/esm/resolve:768:81)
    at moduleResolve (node:internal/modules/esm/resolve:854:18)
    at defaultResolve (node:internal/modules/esm/resolve:984:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:780:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:704:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:687:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:305:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:175:49)
error Command failed with exit code 2.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
</code><!--]--></pre><p><!--[-->The error seems to be related to the file <code><!--[-->eslint.config.mjs<!--]--></code>. I&#39;m not familiar with what <code><!--[-->.mjs<!--]--></code> files are, so I asked cursor:<!--]--></p><blockquote><!--[--><p><!--[-->What are .mjs files?<!--]--></p><p><!--[-->.mjs stands for &quot;Module JavaScript&quot; and is a file extension that explicitly tells Node.js to treat the file as an ES module, regardless of your project&#39;s configuration.<!--]--></p><!--]--></blockquote><p><!--[-->I was able to fix the error by making a small change to the input line that was throwing the error:<!--]--></p><pre class="language-text"><!--[--><code>import withNuxt from &#39;.nuxt/eslint.config.mjs&#39;
</code><!--]--></pre><p><!--[-->changed to<!--]--></p><pre class="language-text"><!--[--><code>import withNuxt from &#39;./.nuxt/eslint.config.mjs&#39;
</code><!--]--></pre><p><!--[-->Now running <code><!--[-->yarn lint<!--]--></code> gave me small error in one of my components. Fixing that resulted in a successful <code><!--[-->yarn lint<!--]--></code>! OK, it should work this time!<!--]--></p><style>html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .s4XuR, html code.shiki .s4XuR{--shiki-default:#E36209;--shiki-dark:#FFAB70}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}</style></div><div class="text-center pb-4 pt-8"><button class="mc-btn rounded py-1 px-2"> Show Disqus Comments 💬 </button></div><!----><h1></h1></div></article><!--]--><div class="mx-auto max-w-6xl p-4 lg:px-16 text-center"><hr class="mt-4"><div class="align-center py-4"><div class="pb-4">Join my mailing list to get updated whenever I publish a new article.</div><div class="flex align-center justify-center"><div id="mc_embed_signup" class="w-full md:w-1/2 flex-shrink justify-center"><form id="mc-embedded-subscribe-form" action="https://github.us2.list-manage.com/subscribe/post?u=43a795784ca963e25903a0da6&amp;id=9937fe4fc5" method="post" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate><div id="mc_embed_signup_scroll" class="grid grid-cols-1 sm:grid-cols-2 gap-4"><input id="mce-EMAIL" type="email" value="" name="EMAIL" placeholder="Enter your email address" class="rounded mc text-center" autocomplete="on"><div style="position:absolute;left:-5000px;" aria-hidden="true"><input type="text" name="b_43a795784ca963e25903a0da6_9937fe4fc5" tabindex="-1" value=""></div><div class="text-right" style="width:100%;"><input id="mc-embedded-subscribe" type="submit" value="Subscribe" name="subscribe" class="mc-btn rounded px-2 py-1 w-full"></div></div></form></div></div></div><hr><div class="py-4">Thanks for checking out my site!</div><div class="pb-4"> © 2025 Brian Caffey </div></div></div></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/2025/07/21/upgrading-my-static-nuxt-blog-from-nuxt-3-to-nuxt-4/_payload.json?711989cd-b755-45e7-b273-f0754c0f755f">[{"state":1,"once":18,"_errors":19,"serverRendered":5,"path":21,"pinia":22,"prerenderedAt":23},["Reactive",2],{"$scolor-mode":3,"$si18n:cached-locale-configs":7,"$si18n:resolved-locale":8,"$ssite-config":9},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,{},"",{"_priority":10,"currentLocale":14,"defaultLocale":14,"env":15,"name":16,"url":17},{"name":11,"env":12,"url":11,"defaultLocale":13,"currentLocale":13},-3,-15,-2,"en-US","production","briancaffey.github.io","https://briancaffey.github.io",["Set"],["ShallowReactive",20],{"upgrading-my-static-nuxt-blog-from-nuxt-3-to-nuxt-4":-1},"/2025/07/21/upgrading-my-static-nuxt-blog-from-nuxt-3-to-nuxt-4",{},1753130126954]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{url:"https://briancaffey.github.io",content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},gtag:{enabled:true,initMode:"auto",id:"G-S8TVBBMW66",initCommands:[],config:{},tags:[],loadingStrategy:"defer",url:"https://www.googletagmanager.com/gtag/js"},i18n:{baseUrl:"",defaultLocale:"en",rootRedirect:"",redirectStatusCode:302,skipSettingLocaleOnNavigate:false,locales:[{code:"en",emoji:"flag-us",iso:"en-US",name:"English",flag:"🇺🇸",language:"en-US",_hreflang:"en-US",_sitemap:"en-US"},{code:"fr",emoji:"flag-fr",iso:"fr-FR",name:"Français",flag:"🇫🇷",language:"fr-FR",_hreflang:"fr-FR",_sitemap:"fr-FR"},{code:"zh",emoji:"flag-cn",iso:"zh-ZH",name:"简体中文",flag:"🇨🇳",language:"zh-ZH",_hreflang:"zh-ZH",_sitemap:"zh-ZH"},{code:"ru",emoji:"flag-ru",iso:"ru-RU",name:"Русский",flag:"🇷🇺",language:"ru-RU",_hreflang:"ru-RU",_sitemap:"ru-RU"},{code:"ja",emoji:"flag-jp",iso:"ja-JP",name:"日本語",flag:"🇯🇵",language:"ja-JP",_hreflang:"ja-JP",_sitemap:"ja-JP"},{code:"in",emoji:"flag-in",iso:"hi-IN",name:"हिंदी",flag:"🇮🇳",language:"hi-IN",_hreflang:"hi-IN",_sitemap:"hi-IN"}],detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",typedPages:true,typedOptionsAndMessages:false,alternateLinkCanonicalQueries:true,devCache:false,cacheLifetime:"",stripMessagesPayload:false,preload:false,strictSeo:false,nitroContextDetection:true},domainLocales:{en:{domain:""},fr:{domain:""},zh:{domain:""},ru:{domain:""},ja:{domain:""},in:{domain:""}}}},app:{baseURL:"/",buildId:"711989cd-b755-45e7-b273-f0754c0f755f",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>