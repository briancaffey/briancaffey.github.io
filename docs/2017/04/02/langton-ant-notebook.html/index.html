<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>Python script for generating 2D n-state Langton's Ant animations</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Brian Caffey's personal website"><meta data-n-head="ssr" property="og:title" content="Python script for generating 2D n-state Langton's Ant animations"><meta data-n-head="ssr" property="og:description" content="undefined"><meta data-n-head="ssr" property="og:image" content="https://briancaffey.github.io/static/ant.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/912e878.js" as="script"><link rel="preload" href="/_nuxt/e3fc94c.js" as="script"><link rel="preload" href="/_nuxt/22b7dce.js" as="script"><link rel="preload" href="/_nuxt/bc44e8c.js" as="script"><link rel="preload" href="/_nuxt/6032d3d.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 f52d43e0:0 517a8dd7:0 fa7ff0ca:0 56b15182:0 25f7f390:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.font-bold{font-weight:700}.h-2{height:.5rem}.h-3{height:.75rem}.h-12{height:3rem}.h-32{height:8rem}.h-64{height:16rem}.text-sm{font-size:.875rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-8{line-height:2rem}.leading-9{line-height:2.25rem}.m-2{margin:.5rem}.m-4{margin:1rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.-ml-1{margin-left:-.25rem}.object-cover{-o-object-fit:cover;object-fit:cover}.p-3{padding:.75rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-4{padding-bottom:1rem}.pt-8{padding-top:2rem}.pb-8{padding-bottom:2rem}.pt-16{padding-top:4rem}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.resize{resize:both}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.fill-current{fill:currentColor}.text-center{text-align:center}.text-right{text-align:right}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-red-400{--text-opacity:1;color:#fc8181;color:rgba(252,129,129,var(--text-opacity))}.uppercase{text-transform:uppercase}.visible{visibility:visible}.w-2{width:.5rem}.w-3{width:.75rem}.w-12{width:3rem}.w-full{width:100%}.z-10{z-index:10}.gap-4{grid-gap:1rem;gap:1rem}.gap-6{grid-gap:1.5rem;gap:1.5rem}.gap-8{grid-gap:2rem;gap:2rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition-all{transition-property:all}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.duration-150{transition-duration:.15s}.delay-150{transition-delay:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:container{width:100%}}@media (min-width:640px) and (min-width:640px){.sm\:container{max-width:640px}}@media (min-width:640px) and (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:640px) and (min-width:1024px){.sm\:container{max-width:1024px}}@media (min-width:640px) and (min-width:1280px){.sm\:container{max-width:1280px}}@media (min-width:640px){.sm\:inline{display:inline}.sm\:hidden{display:none}.sm\:p-16{padding:4rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}}@media (min-width:768px){.md\:container{width:100%}}@media (min-width:768px) and (min-width:640px){.md\:container{max-width:640px}}@media (min-width:768px) and (min-width:768px){.md\:container{max-width:768px}}@media (min-width:768px) and (min-width:1024px){.md\:container{max-width:1024px}}@media (min-width:768px) and (min-width:1280px){.md\:container{max-width:1280px}}@media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:px-4{padding-left:1rem;padding-right:1rem}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1024px){.lg\:container{width:100%}}@media (min-width:1024px) and (min-width:640px){.lg\:container{max-width:640px}}@media (min-width:1024px) and (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px) and (min-width:1024px){.lg\:container{max-width:1024px}}@media (min-width:1024px) and (min-width:1280px){.lg\:container{max-width:1280px}}@media (min-width:1024px){.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pl-64{padding-left:16rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1280px){.xl\:container{width:100%}}@media (min-width:1280px) and (min-width:640px){.xl\:container{max-width:640px}}@media (min-width:1280px) and (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1280px) and (min-width:1024px){.xl\:container{max-width:1024px}}@media (min-width:1280px) and (min-width:1280px){.xl\:container{max-width:1280px}}@media (min-width:1280px){.xl\:pb-16{padding-bottom:4rem}}:root{--color:#243746;--color-primary:#158876;--color-secondary:#0e2233;--bg:#f3f5f4;--bg-secondary:#fff;--bg-code:#ddd;--border-color:#ddd}.dark-mode{--color:#ebf4f1;--color-primary:#41b38a;--color-secondary:#fdf9f3;--bg:#091a28;--bg-secondary:#071521;--bg-code:#ddd;--border-color:#0d2538}.sepia-mode{--color:#433422;--color-primary:#504231;--color-secondary:#504231;--bg:#f1e7d0;--bg-code:#ddd;--bg-secondary:#eae0c9;--border-color:#ded0bf}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;background-color:#f3f5f4;background-color:var(--bg);color:#243746;color:var(--color);transition:background-color .3s}a{color:#158876;color:var(--color-primary)}.py-05{padding-top:.125rem;padding-bottom:.125rem}.markdown{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity));line-height:1.5;word-wrap:break-word;color:#0e2233;color:var(--color-secondary)}.markdown .token.operator{background:0 0}.markdown>*+*{margin-top:0;margin-bottom:1rem}.markdown li+li{margin-top:.25rem}.markdown li>p+p{margin-top:1.5rem;color:#158876;color:var(--color-primary)}.markdown img{margin:auto}.markdown a,.markdown strong{font-weight:600}.markdown strong a{font-weight:700}.markdown h1{font-size:2.25rem}.markdown h1,.markdown h2{border-color:#158876;border-color:var(--color-primary);line-height:1.25;border-bottom-width:1px;font-weight:600;margin-bottom:1rem;margin-top:1.5rem;padding-bottom:.5rem}.markdown h2{font-size:1.5rem}.markdown h3{line-height:1.375;font-size:1.125rem}.markdown h3,.markdown h4{border-color:#158876;border-color:var(--color-primary);font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown h4{line-height:1;font-size:1rem}.markdown h5{border-color:#158876;border-color:var(--color-primary)}.markdown h5,.markdown h6{line-height:1.25;font-size:.875rem;font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown blockquote,.markdown h6{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.markdown blockquote{font-size:1rem;border-left-width:4px;--border-opacity:1;border-color:#e2e8f0;border-color:rgba(226,232,240,var(--border-opacity));padding-left:1rem;padding-right:1rem;border-color:#158876;border-color:var(--color-primary)}.markdown code{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875rem;display:inline;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity));padding:.125rem .25rem;background-color:#ddd;background-color:var(--bg-code);color:#000}.markdown code,.markdown pre{--bg-opacity:1;border-radius:.25rem}.markdown pre{background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity));padding:1rem}.markdown pre code{display:block;background-color:transparent;padding:0;overflow:visible;border-radius:0;color:#000}.markdown p{margin-bottom:10px}code[class*=language-],pre[class*=language-]{background:#ddd!important;background:var(--bg-code)!important;text-shadow:none!important}.markdown ul{list-style-type:disc}.markdown ol,.markdown ul{font-size:1rem;padding-left:2rem}.markdown ol{list-style-type:decimal}.markdown kbd{font-size:.75rem;display:inline-block;border-radius:.25rem;border-width:1px;padding:.125rem .25rem;vertical-align:middle;font-weight:400;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.markdown table,td,th{font-size:1rem;border:1px solid #243746;border-color:var(--color)}.markdown table{overflow-x:scroll}.markdown td,.markdown th{border-width:1px;padding:.25rem .75rem}.markdown .highlight pre{--bg-opacity:1!important;background-color:#f7fafc!important;background-color:rgba(247,250,252,var(--bg-opacity))!important}.article-card{box-shadow:0 5px 10px 1px #0e2233;box-shadow:0 5px 10px 1px var(--color-secondary);height:100%}.article-card:hover{box-shadow:0 5px 15px 5px #158876;box-shadow:0 5px 15px 5px var(--color-primary)}hr{background-color:#243746;background-color:var(--color);border:none;height:1px}.menu-icon{background-color:#ddd;background-color:var(--border-color)}.menu-icon,.mobile-menu{color:#243746;color:var(--color)}.mobile-menu{background-color:#fff;background-color:var(--bg-secondary)}.btn{border-radius:1;border-color:#158876;border-color:var(--color-primary)}.btn:hover{background-color:#fff;background-color:var(--bg-secondary)}.hero{border-color:#158876;border-color:var(--color-primary)}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}span[data-v-51e3ff6a]{position:absolute;left:50%;transform:translateX(-50%);text-align:center;top:2px}</style><link rel="preload" href="/_nuxt/static/1601789838/2017/04/02/langton-ant-notebook.html/state.js" as="script"><link rel="preload" href="/_nuxt/static/1601789838/2017/04/02/langton-ant-notebook.html/payload.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function (){"use strict";var e=window,s=document,t=s.documentElement,n=["dark","light"],o=function(e){for(var t=e+"=",n=s.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}("nuxt-color-mode")||"system",a="system"===o?c():o;function i(e){var s=""+e+"-mode";t.classList?t.classList.add(s):t.className+=" "+s}function r(s){return e.matchMedia("(prefers-color-scheme"+s+")")}function c(){if(e.matchMedia&&"not all"!==r("").media)for(var s of n)if(r(":"+s).matches)return s;return"light"}i(a),e["__NUXT_COLOR_MODE__"]={preference:o,value:a,getColorScheme:c,addClass:i,removeClass:function(e){var s=""+e+"-mode";t.classList?t.classList.remove(s):t.className=t.className.replace(new RegExp(s,"g"),"")}}}();
</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="grid grid-cols-3 py-2 px-2 sm:px-4 items-center" data-v-58308eeb><div class="justify-left" data-v-58308eeb><a href="/" class="text-xl nuxt-link-active" data-v-58308eeb><span class="hidden sm:inline" data-v-58308eeb>Brian Caffey</span><span class="inline sm:hidden" data-v-58308eeb>JBC</span></a></div> <div class="justify-center" data-v-58308eeb><div class="grid items-center justify-center" data-v-58308eeb><ul class="flex px-4"><li class="md:px-4 px-1 cursor-pointer">
      🖥️
    </li><li class="md:px-4 px-1 cursor-pointer">
      🌞
    </li><li class="md:px-4 px-1 cursor-pointer">
      🌚
    </li><li class="md:px-4 px-1 cursor-pointer">
      ☕
    </li></ul></div></div> <div class="flex justify-end" data-v-58308eeb><nav data-v-cd9cc810 data-v-58308eeb><ul class="items-right justify-end hidden md:flex" data-v-cd9cc810><li class="px-4" data-v-cd9cc810><a href="/blog" data-v-cd9cc810>Blog</a></li> <li class="px-4" data-v-cd9cc810><a href="/projects" data-v-cd9cc810>Projects</a></li> <li class="px-4" data-v-cd9cc810><a href="/contact" data-v-cd9cc810>Contact</a></li></ul> <div class="flex justify-end md:hidden z-1000" data-v-cd9cc810><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-cd9cc810><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current h-3 w-3" data-v-cd9cc810><title data-v-cd9cc810>Menu</title> <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-cd9cc810></path></svg></button></div> <!----></nav></div></div> <article><img src="/static/ant.png" class="h-64 w-full object-cover"> <div class="px-2 sm:px-4 md:px-4 lg:px-16 xl:pb-16 mt-2 lg:pl-64"><h1 class="prose text-3xl leading-9">Python script for generating 2D n-state Langton's Ant animations</h1> <div class="flex flex-wrap -ml-1 py-2" data-v-1f8089c5><a href="/blog/tags/python/" data-v-696d20ce data-v-1f8089c5><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-696d20ce>
    python 🏷️
    <!----></div></a><a href="/blog/tags/cellular-automata/" data-v-696d20ce data-v-1f8089c5><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-696d20ce>
    cellular-automata 🏷️
    <!----></div></a></div> <p class="text-gray-500 mb-4">
      Last updated: April 1, 2017
    </p> <div class="markdown nuxt-content"><p><img alt="png" src="/static/LLRRRLRRRRR.png"></p>
<p>This is an old project that I would like to refactor. I'm copying the contents of <a href="https://github.com/briancaffey/cellular-automata/blob/master/ants.ipynb" rel="nofollow noopener noreferrer" target="_blank">this Jupyter notebook</a> into this article with the <code>jupyter nbconvert ants.ipynb --to markdown</code>.</p>
<p>This notebook explores a type of Turing Machine known as <a href="https://en.wikipedia.org/wiki/Turmite" rel="nofollow noopener noreferrer" target="_blank">termites</a>. The first part is a script I wrote a few years ago when I was first learning Python. If you are new to learning Python, I suggest you give it a try before reading the script; there's a lot you will learn about flow control and data structures. My script is far from perfect and every time I come back to it there is an idiom I can add and areas that can be refactored and cleaned up. It generates images of 2-dimensional n-state termites on an $a$ x $b$ rectangular grid, or it can generate multiple images (frames) of a single termite as it grows to make a video. Here's an example of a termite animatino that I made using the script below:</p>
<iframe width="100%" height="400" src="https://www.youtube-nocookie.com/embed/Du2DorTLAo4?rel=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
<p>The type of termite explored here is a modified version of a type of cellular automata known as <a href="https://en.wikipedia.org/wiki/Langton%27s_ant" rel="nofollow noopener noreferrer" target="_blank">Langton's Ant</a>. Langton's Ant has a simple ruleset: an ant is placed on a 2-dimensional grid of 2-state cells (black or white) with a directional orientation. If the ant is on a black cell at $t=n$, the ant enters the cell on the immediate left at $t=n+1$ and the state of the cell it exits changes to white. If the state of the cell that the ant enters is white, the ant enters the cell immediately to the right and the cell it exits turns black. Around 11,000 steps, the ant enters a 'highway' which results in a repeated motion that moves the ant continually in one direction.</p>
<p>Instead of black and white cells, we can define $n$ number of states (colors) and assign any combination of $n$ instructions (eg. LRLLLRLLLRL). The script below generates generates an arbitrary number of <code>ants</code>. Each number in <code>range(ants)</code> is converted to binary and then 1s and 0s of the corresponding binary number represent the left and right turns for each individual ant. For example: <code>bin(23)</code> corresponds to a 5-state ant with the following rules: RLRRR. This method avoids generating isotropes (RLRRR is the same ant as LRLLL).</p>
<p>If <code>record</code> is set to <code>True</code>, one frame will be captured every <code>frame_interval</code> number of steps. These images can be converted into video easily with open-source programs like <a href="https://www.blender.org/" rel="nofollow noopener noreferrer" target="_blank">Blender</a>.</p>
<p>The last part of the notebook attempts to use new methods from the latest version of scikit-learn (<a href="http://scikit-learn.org/stable/whats_new.html" rel="nofollow noopener noreferrer" target="_blank">0.18.1</a>) to cluster ants by their behavior: k-means (for clustering) and Isolation Forests (for detecting outliers).</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">import</span> PIL
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> random
<span class="token keyword">import</span> os
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> scipy
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> __future__ <span class="token keyword">import</span> print_function
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> cluster
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token operator">%</span>matplotlib inline
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token comment">#this script generates an image (or a series of images) for n-state 2D Langton's Ant cellular automaton.</span>

<span class="token comment">#SETTINGS</span>

<span class="token comment">#number of ants to run</span>
ants <span class="token operator">=</span> <span class="token number">65536</span>
<span class="token comment">#ants = 100</span>
<span class="token comment">#set record to True to record frames once every frame_interval steps</span>
record <span class="token operator">=</span> <span class="token boolean">False</span>
frame_interval <span class="token operator">=</span> <span class="token number">5000</span>

<span class="token comment">#Boolean for recording final image</span>
record_final_image <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment">#set scale to scale the resulting images in save_image(i) function</span>
scale <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">#set the length and width of the square image canvas</span>
width <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
length <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>

<span class="token comment">#initialize ant in the center of the grid</span>
<span class="token comment">#grid contains length_width**2 cells</span>
ant_pos <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>length<span class="token operator">*</span>width<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">int</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">#boolean to check if the ant touches the border (out of bounds)</span>
oob <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment">#number of steps that the ant will take on each walk</span>
iterations <span class="token operator">=</span> <span class="token number">100000</span>

<span class="token comment">#for naming the image file below</span>
number <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>iterations<span class="token punctuation">)</span>

<span class="token comment">#set the direction of the ant's first step: 1 --> Right; -1 --> Left. Eliminates mirror images (isotropes) from dataset</span>
direction <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">#Ininitialize a blank square image</span>
im1 <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">'RGBA'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'white'</span><span class="token punctuation">)</span>

<span class="token comment">#color selection</span>
white <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
red <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
orange <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
yellow <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
yellow_green <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
green <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
teal <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
light_blue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
blue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
purple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
black <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
grey <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
brown <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
pink <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">244</span><span class="token punctuation">,</span><span class="token number">114</span><span class="token punctuation">,</span><span class="token number">208</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
mauve <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">118</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">,</span><span class="token number">138</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>
magenta <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">216</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span>

color_choices <span class="token operator">=</span> <span class="token punctuation">[</span>red<span class="token punctuation">,</span> orange<span class="token punctuation">,</span> yellow<span class="token punctuation">,</span> light_blue<span class="token punctuation">,</span> yellow_green<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> purple<span class="token punctuation">,</span> black<span class="token punctuation">,</span> grey<span class="token punctuation">,</span> green<span class="token punctuation">,</span> teal<span class="token punctuation">,</span> light_blue<span class="token punctuation">,</span> other<span class="token punctuation">,</span> brown<span class="token punctuation">,</span> pink<span class="token punctuation">,</span> mauve<span class="token punctuation">,</span> magenta<span class="token punctuation">]</span>

<span class="token comment">#convert an integer to binary and then convert</span>
<span class="token keyword">def</span> <span class="token function">num_to_string</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    binary <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    moves <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>binary<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">:</span>
            moves <span class="token operator">+=</span> <span class="token string">"R"</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            moves <span class="token operator">+=</span> <span class="token string">"L"</span>
    <span class="token keyword">return</span> moves

<span class="token comment">#moves list includes all 16 length moves</span>
<span class="token comment">#moves_list = [num_to_string(ant) for ant in range(32768,65536)]</span>

<span class="token comment">#defines the list of strings that is used for the main loop bellow</span>
moves_list <span class="token operator">=</span> <span class="token punctuation">[</span>num_to_string<span class="token punctuation">(</span>ant<span class="token punctuation">)</span> <span class="token keyword">for</span> ant <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>ants<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment">#a list of the dictionaries to by passed into the pandas dataframe for later analysis</span>
df_row_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">#dataframe object for later analysis</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#index=[0]</span>

<span class="token comment">#functions for moving the postition of the ant right, left, up or down</span>
<span class="token keyword">def</span> <span class="token function">move_right</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> ant_pos
    <span class="token comment">#move ant_pos one pixel to the right</span>
    ant_pos <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> ant_pos
<span class="token keyword">def</span> <span class="token function">move_left</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> ant_pos
    <span class="token comment">#move ant_pos one pixel to the left</span>
    ant_pos <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> ant_pos
<span class="token keyword">def</span> <span class="token function">move_up</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> ant_pos
    <span class="token comment">#move ant_pos one pixel up</span>
    ant_pos <span class="token operator">+=</span> width
    <span class="token keyword">return</span> ant_pos
<span class="token keyword">def</span> <span class="token function">move_down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> ant_pos
    <span class="token comment">#move ant_pos one pixel down</span>
    ant_pos <span class="token operator">-=</span> width
    <span class="token keyword">return</span> ant_pos

<span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span>d<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> direction
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment">#this part is a little confusing and may need to be rewritten</span>
        <span class="token comment">#it uses the current direction of the ant to determine the appropriate direction for the next turn</span>
        <span class="token comment">#breaks are used</span>
        <span class="token keyword">if</span> pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> color <span class="token keyword">and</span> direction <span class="token operator">==</span> width<span class="token operator">*</span>d<span class="token punctuation">:</span>
            <span class="token comment">#set the color to the next color in the list, or loop back to the beginning of the list if the end has been reached</span>
            pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>color <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pixel_colors<span class="token punctuation">)</span>
            <span class="token comment">#save the current postion of the ant</span>
            init <span class="token operator">=</span> ant_pos
            <span class="token comment">#move the ant</span>
            move_right<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">#save the updated position of the ant</span>
            end <span class="token operator">=</span> ant_pos
            <span class="token comment">#calculate the new direction of the ant by taking the difference between end and init</span>
            direction <span class="token operator">=</span> end <span class="token operator">-</span> init
            <span class="token keyword">break</span>

        <span class="token comment">#same idea as above</span>
        <span class="token keyword">elif</span> pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> color <span class="token keyword">and</span> direction <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token operator">*</span>width<span class="token operator">*</span>d<span class="token punctuation">:</span>
            pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>color <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pixel_colors<span class="token punctuation">)</span>
            init <span class="token operator">=</span> ant_pos
            move_left<span class="token punctuation">(</span><span class="token punctuation">)</span>
            end <span class="token operator">=</span> ant_pos
            direction <span class="token operator">=</span> end <span class="token operator">-</span> init
            <span class="token keyword">break</span>
        <span class="token comment">#same idea as above</span>
        <span class="token keyword">elif</span> pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> color <span class="token keyword">and</span> direction <span class="token operator">==</span> <span class="token number">1</span><span class="token operator">*</span>d<span class="token punctuation">:</span>
            pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>color <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pixel_colors<span class="token punctuation">)</span>
            init <span class="token operator">=</span> ant_pos
            move_down<span class="token punctuation">(</span><span class="token punctuation">)</span>
            end <span class="token operator">=</span> ant_pos
            direction <span class="token operator">=</span> end <span class="token operator">-</span> init
            <span class="token keyword">break</span>
        <span class="token comment">#same idea as above</span>
        <span class="token keyword">elif</span> pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> color <span class="token keyword">and</span> direction <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token operator">*</span>d<span class="token punctuation">:</span>
            pix_list<span class="token punctuation">[</span>ant_pos<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>color <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pixel_colors<span class="token punctuation">)</span>
            init <span class="token operator">=</span> ant_pos
            move_up<span class="token punctuation">(</span><span class="token punctuation">)</span>
            end <span class="token operator">=</span> ant_pos
            direction <span class="token operator">=</span> end <span class="token operator">-</span> init
            <span class="token keyword">break</span>
        <span class="token keyword">break</span>

<span class="token comment">#captures series of pixels used for generating images</span>
<span class="token keyword">def</span> <span class="token function">get_pix_series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> pix_series
    pix_series <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>pix_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>pixel_colors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> pix_list<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> y<span class="token punctuation">:</span>
                pixel <span class="token operator">=</span> pixel_colors<span class="token punctuation">[</span>y<span class="token punctuation">]</span>
                pix_series<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pixel<span class="token punctuation">)</span>

<span class="token comment">#runs ant along the grid according to the moves (defined above) for the number of steps in iterations (defined above)</span>
<span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#variable the tracks the step number if the ant goes out of bounds</span>
    <span class="token keyword">global</span> oob
    <span class="token comment">#converts moves string into a list of 0s and 1s; these numbers correspond to direction and are passed into the move() function</span>
    moves1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'R'</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> moves<span class="token punctuation">]</span>
    <span class="token keyword">for</span> step <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>iterations<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#exit the loop if the ant reaches the edge of the grid</span>
        <span class="token keyword">if</span> ant_pos <span class="token operator">&lt;</span> width <span class="token keyword">or</span> ant_pos <span class="token operator">%</span> width <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            oob <span class="token operator">=</span> step
            <span class="token keyword">return</span>
        <span class="token comment">#loop through the moves</span>
        <span class="token keyword">for</span> index<span class="token punctuation">,</span> direction <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>moves1<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                <span class="token comment">#remember the ant position</span>
                not_moved <span class="token operator">=</span> ant_pos
                <span class="token comment">#try to move the ant position</span>
                move<span class="token punctuation">(</span>index<span class="token punctuation">,</span>direction<span class="token punctuation">)</span>
                <span class="token comment">#check to see if the position was moved</span>
                <span class="token keyword">if</span> ant_pos <span class="token operator">!=</span> not_moved<span class="token punctuation">:</span>
                    <span class="token comment">#set record to false in the settings to turn of frame recording</span>
                    <span class="token keyword">if</span> record <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
                        <span class="token comment">#records a new frame every frame_interval frame</span>
                        <span class="token keyword">if</span> step <span class="token operator">%</span> frame_interval <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                            counter <span class="token operator">+=</span> <span class="token number">1</span>
                            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Generating frame number "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                            get_pix_series<span class="token punctuation">(</span><span class="token punctuation">)</span>
                            save_image<span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
                    <span class="token keyword">break</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">continue</span>
            <span class="token keyword">except</span><span class="token punctuation">:</span>
                <span class="token comment">#print("Out of bounds at step number " + str(step))</span>
                oob <span class="token operator">=</span> step
                <span class="token keyword">return</span>

<span class="token keyword">def</span> <span class="token function">save_image</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#give access to the image instantiated at the beginning of the script</span>
    <span class="token keyword">global</span> im1
    <span class="token comment">#fill blank image canvas with pix_series pixel data</span>
    im1<span class="token punctuation">.</span>putdata<span class="token punctuation">(</span>pix_series<span class="token punctuation">)</span>
    <span class="token comment">#to rescale the image, set the scale variable in settings and call resize on im1</span>
    im1<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>scale<span class="token operator">*</span>im1<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>scale<span class="token operator">*</span>im1<span class="token punctuation">.</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'%s.png'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>moves<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#builds a dictionary to count pixels by color</span>
<span class="token keyword">def</span> <span class="token function">build_df_row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    colors_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token keyword">for</span> val<span class="token punctuation">,</span> color <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>pixel_colors<span class="token punctuation">)</span><span class="token punctuation">}</span>
    moves_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'moves'</span><span class="token punctuation">:</span>moves<span class="token punctuation">}</span>
    last_step <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'last_step'</span><span class="token punctuation">:</span>oob<span class="token punctuation">}</span>
    row_dict <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>colors_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>moves_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>last_step<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> pix_list<span class="token punctuation">:</span>
        pixel_color <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment">#print(pixel_color)</span>
        row_dict<span class="token punctuation">[</span>pixel_color<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> row_dict

<span class="token comment">#uncomment below to overwrite moves_list</span>
<span class="token comment">#moves_list = ['LR', 'RRLR']</span>

<span class="token keyword">for</span> _<span class="token punctuation">,</span> moves <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>moves_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    oob <span class="token operator">=</span> <span class="token number">0</span>
    dir_path <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>

    <span class="token comment">#make a new directory for each new ant walk in walks based on the the walk number and navigate to that directory</span>
    <span class="token keyword">if</span> record <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment">#make a new directory to record frames for a give ant if record is set to true and that directory does not yet exist</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>dir_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>dir_path<span class="token punctuation">)</span>
        <span class="token comment">#otherwise just change into the directory</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>dir_path<span class="token punctuation">)</span>

    <span class="token comment">#set ant at middle of grid</span>
    ant_pos <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>length<span class="token operator">*</span>width<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">int</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token comment">#moves = len(moves)</span>
    pixel_colors <span class="token operator">=</span> color_choices<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>moves<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token comment">#defines an empty list of elements [x,y,0] where x amd y are the position 0 is the 0ht color in the color list (the base canvas color)</span>
    pix_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">:</span>
            a <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
            pix_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">)</span>

    <span class="token comment">#pix_series is a list of pixels that is passed into the put_data function to generate an image</span>
    pix_series <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment">#counter keeps track of the frame number (if recording a series of images)</span>
    counter <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token comment">#run the ant</span>
    run<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">#capture the final state of the grid with get_pix_series</span>
    get_pix_series<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">#uncomment below to preview images for testing</span>
    <span class="token comment">#im1.putdata(pix_series)</span>
    <span class="token comment">#im1.resize((scale*im1.size[0],scale*im1.size[1])).show()</span>

    <span class="token comment">#build a dictionary with pixel counts</span>
    colors_dict <span class="token operator">=</span> build_df_row<span class="token punctuation">(</span><span class="token punctuation">)</span>
    row_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>colors_dict<span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    df <span class="token operator">=</span> df<span class="token punctuation">.</span>append<span class="token punctuation">(</span>row_df<span class="token punctuation">,</span> ignore_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> record_final_image <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">'~/Documents/CA_1/imgs/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        save_image<span class="token punctuation">(</span>_<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">)</span>

    <span class="token comment">#summary</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>

os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">'~/Documents/CA_1/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'ants_hist_.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre></div>
<h1 id="clustering"><a href="#clustering" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Clustering</h1>
<p>We now have a csv file where each row is a 16-state termite and the columns labeled 0 through 15 count the sum of pixels in each state (the different colors). With <code>last_step</code> we also track the last step reached in the event that the ant runs into the edge of the grid. This will be helpful in clustering ants that form highways in different groups from those that complete 100000 steps inside the 200 x 200 grid.</p>
<p>First let's read the csv into a pandas DataFrame and look at some of the data.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">import</span> PIL
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> random
<span class="token keyword">import</span> os
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> scipy
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> __future__ <span class="token keyword">import</span> print_function
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> cluster
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token operator">%</span>matplotlib inline
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">'~/Documents/CA_1/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'ants_hist_.csv'</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df1<span class="token punctuation">.</span>shape
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>(32768, 18)
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df1<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align:right">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
      <th>14</th>
      <th>15</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>last_step</th>
      <th>moves</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>25892</th>
      <td>37741</td>
      <td>212</td>
      <td>135</td>
      <td>148</td>
      <td>135</td>
      <td>152</td>
      <td>119</td>
      <td>115</td>
      <td>176</td>
      <td>168</td>
      <td>129</td>
      <td>182</td>
      <td>155</td>
      <td>130</td>
      <td>162</td>
      <td>141</td>
      <td>0</td>
      <td>RRRLLRLRLLRLLRLL</td>
    </tr>
    <tr>
      <th>27264</th>
      <td>35861</td>
      <td>117</td>
      <td>444</td>
      <td>421</td>
      <td>497</td>
      <td>395</td>
      <td>327</td>
      <td>222</td>
      <td>345</td>
      <td>143</td>
      <td>126</td>
      <td>218</td>
      <td>241</td>
      <td>187</td>
      <td>135</td>
      <td>321</td>
      <td>0</td>
      <td>RRRLRLRLRLLLLLLL</td>
    </tr>
    <tr>
      <th>10181</th>
      <td>37202</td>
      <td>300</td>
      <td>177</td>
      <td>130</td>
      <td>150</td>
      <td>148</td>
      <td>124</td>
      <td>156</td>
      <td>191</td>
      <td>217</td>
      <td>234</td>
      <td>217</td>
      <td>162</td>
      <td>200</td>
      <td>222</td>
      <td>170</td>
      <td>0</td>
      <td>RLRLLRRRRRLLLRLR</td>
    </tr>
  </tbody>
</table>
</div>
<p>There are 32768 unique instructions for 16-state termites <code>(2^16)/2 = 32768</code>. Let's check to see how many of these are duplicates. We want to select only the state-counts and then call <code>.drop_duplicates</code> on that DataFrame.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df2 <span class="token operator">=</span> df1<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">16</span><span class="token punctuation">]</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> df2<span class="token punctuation">.</span>drop_duplicates<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>1566
</code></pre></div>
<p>1566 of the 16-state termites. It might be helpful to remove these termites from the DataFrame before we cluster them.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>unique_termites_index <span class="token operator">=</span> df2<span class="token punctuation">.</span>drop_duplicates<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df <span class="token operator">=</span> df1<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>unique_termites_index<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df<span class="token punctuation">[</span><span class="token string">'steps_taken'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100000</span> <span class="token keyword">if</span> x<span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">else</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">.</span>last_step<span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'file_names'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token string">'.png'</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">.</span>moves<span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'move_len'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> df<span class="token punctuation">.</span>moves<span class="token punctuation">]</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align:right">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
      <th>14</th>
      <th>15</th>
      <th>2</th>
      <th>3</th>
      <th>...</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>last_step</th>
      <th>moves</th>
      <th>steps_taken</th>
      <th>file_names</th>
      <th>move_len</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>36381</td>
      <td>584</td>
      <td>36</td>
      <td>32</td>
      <td>41</td>
      <td>85</td>
      <td>179</td>
      <td>174</td>
      <td>1864</td>
      <td>325</td>
      <td>...</td>
      <td>45</td>
      <td>45</td>
      <td>32</td>
      <td>31</td>
      <td>37</td>
      <td>0</td>
      <td>RLLLLLLLLLLLLLLL</td>
      <td>100000</td>
      <td>RLLLLLLLLLLLLLLL.png</td>
      <td>16</td>
    </tr>
    <tr>
      <th>1</th>
      <td>39857</td>
      <td>44</td>
      <td>4</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>27</td>
      <td>17</td>
      <td>...</td>
      <td>8</td>
      <td>3</td>
      <td>11</td>
      <td>6</td>
      <td>4</td>
      <td>0</td>
      <td>RLLLLLLLLLLLLLLR</td>
      <td>100000</td>
      <td>RLLLLLLLLLLLLLLR.png</td>
      <td>16</td>
    </tr>
    <tr>
      <th>2</th>
      <td>39804</td>
      <td>48</td>
      <td>5</td>
      <td>12</td>
      <td>7</td>
      <td>9</td>
      <td>7</td>
      <td>0</td>
      <td>24</td>
      <td>12</td>
      <td>...</td>
      <td>11</td>
      <td>9</td>
      <td>7</td>
      <td>20</td>
      <td>5</td>
      <td>0</td>
      <td>RLLLLLLLLLLLLLRL</td>
      <td>100000</td>
      <td>RLLLLLLLLLLLLLRL.png</td>
      <td>16</td>
    </tr>
    <tr>
      <th>3</th>
      <td>37223</td>
      <td>346</td>
      <td>70</td>
      <td>97</td>
      <td>89</td>
      <td>122</td>
      <td>100</td>
      <td>124</td>
      <td>1150</td>
      <td>216</td>
      <td>...</td>
      <td>85</td>
      <td>83</td>
      <td>61</td>
      <td>60</td>
      <td>55</td>
      <td>0</td>
      <td>RLLLLLLLLLLLLLRR</td>
      <td>100000</td>
      <td>RLLLLLLLLLLLLLRR.png</td>
      <td>16</td>
    </tr>
    <tr>
      <th>4</th>
      <td>39678</td>
      <td>76</td>
      <td>22</td>
      <td>16</td>
      <td>17</td>
      <td>8</td>
      <td>1</td>
      <td>2</td>
      <td>47</td>
      <td>17</td>
      <td>...</td>
      <td>31</td>
      <td>14</td>
      <td>15</td>
      <td>26</td>
      <td>11</td>
      <td>0</td>
      <td>RLLLLLLLLLLLLRLL</td>
      <td>100000</td>
      <td>RLLLLLLLLLLLLRLL.png</td>
      <td>16</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df<span class="token punctuation">.</span>index <span class="token operator">=</span> df<span class="token punctuation">.</span>file_names
</code></pre></div>
<p>Here's a quick look at the distribution of the base canvas color (red in the images below) over all of the unique termites.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>x <span class="token operator">=</span> <span class="token string">'0'</span>
sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">'whitegrid'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>hist<span class="token punctuation">(</span>bins<span class="token operator">=</span><span class="token number">250</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Count of Cells in state 0'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Count'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Histogram Showing Termite Count by number of cells in state 0'</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>&lt;matplotlib.text.Text at 0x116dee10>
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_20_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>df<span class="token punctuation">.</span>shape
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>(31202, 21)
</code></pre></div>
<p>Now we can prepare a DataFrame that we will feed in to the clustering model. We will take only the pixel counts and the total number of steps taken.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X <span class="token operator">=</span> df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>move_len<span class="token operator">==</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X<span class="token punctuation">.</span>columns
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Index([u'0', u'1', u'10', u'11', u'12', u'13', u'14', u'15', u'2', u'3', u'4',
       u'5', u'6', u'7', u'8', u'9', u'steps_taken'],
      dtype='object')
</code></pre></div>
<p>Most of the termites completed all 100000 steps within the grid boundries.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X<span class="token punctuation">[</span>X<span class="token punctuation">.</span>steps_taken<span class="token operator">==</span><span class="token number">100000</span><span class="token punctuation">]</span><span class="token punctuation">.</span>steps_taken<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>29955
</code></pre></div>
<p>Here'a a histogram of the steps taken by ants that took less than 100000 steps.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X<span class="token punctuation">[</span>X<span class="token punctuation">.</span>steps_taken<span class="token operator">&lt;</span><span class="token number">100000</span><span class="token punctuation">]</span><span class="token punctuation">.</span>steps_taken<span class="token punctuation">.</span>hist<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Histogram of steps_taken for termites that stayed in bounds'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'steps_taken'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Count'</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>&lt;matplotlib.text.Text at 0x18aa3a58>
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_28_1.png"></p>
<p>Here's another look at the distribution of cells in state 3 over all termites:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>x <span class="token operator">=</span> <span class="token string">'3'</span> <span class="token comment">#other intereting states: 1, 7, 11, 15</span>
sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">'whitegrid'</span><span class="token punctuation">)</span>
<span class="token comment">#plt.figure(figsize=(12,8))</span>
df<span class="token punctuation">[</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>hist<span class="token punctuation">(</span>bins<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Count of Cells in state 3'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Count (termites)'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Histogram Showing Termite Count by number of cells in state 3'</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>&lt;matplotlib.text.Text at 0x15ba6630>
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_30_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X<span class="token punctuation">.</span>shape
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>(31202, 17)
</code></pre></div>
<p>To cluster the different termites, we can use an unsupervised learning method called clustering. It is "unsupervised" because I don't explicitly tell the model what types termites should be grouped together. Instead, we will tell the model <em>how many different clusters there are.</em> Of course, I really don't know how many clusters there should be. I do know from looking at the results that there seem to be many different types of behavior, patterns, sizes and other characteristics. We significantly reduce the complexity of clustering task by training the model on the count of pixels by what state the are in. I'm sure that the model won't be able to pick up on all of the nuances that humans can detect by looking at the images, but I have a feeling that it should be able to do a fairly good job. After we take a look at the individual clusters, we can try to find an optimal number of clusters by minimizing the total number of outliers of all the clusters. Here's <a href="http://papers.nips.cc/paper/5306-on-integrated-clustering-and-outlier-detection.pdf" rel="nofollow noopener noreferrer" target="_blank">an interesting paper</a> on integrated clustering and outlier detection.</p>
<p>Here's how we set up the clustering model. For the numebr of clusters, let's start with 75.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>k_means <span class="token operator">=</span> cluster<span class="token punctuation">.</span>KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">75</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>k_means<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>KMeans(algorithm='auto', copy_x=True, init='k-means++', max_iter=300,
    n_clusters=75, n_init=10, n_jobs=1, precompute_distances='auto',
    random_state=1, tol=0.0001, verbose=0)
</code></pre></div>
<p>Then we add the cluster number to each termite:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X<span class="token punctuation">[</span><span class="token string">'clusters'</span><span class="token punctuation">]</span> <span class="token operator">=</span> k_means<span class="token punctuation">.</span>labels_
</code></pre></div>
<p>Here's the breakdown of clusters by number of termites in each cluster:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>X<span class="token punctuation">.</span>clusters<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">,</span> X<span class="token punctuation">.</span>clusters<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Cluster Number'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Count'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Termite count by cluster'</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>&lt;matplotlib.text.Text at 0x15c4c358>
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_38_1.png"></p>
<p>And here is a list of the data shown above:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>X<span class="token punctuation">.</span>clusters<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">,</span> X<span class="token punctuation">.</span>clusters<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">' || cluster_num: '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token string">'count: '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'  '</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code> || cluster_num: 16 count: 3293   || cluster_num: 71 count: 3036   || cluster_num: 46 count: 2993   || cluster_num: 0 count: 2752   || cluster_num: 23 count: 2667   || cluster_num: 52 count: 2540   || cluster_num: 50 count: 2185   || cluster_num: 5 count: 1412   || cluster_num: 19 count: 987   || cluster_num: 45 count: 816   || cluster_num: 44 count: 791   || cluster_num: 54 count: 686   || cluster_num: 42 count: 625   || cluster_num: 64 count: 603   || cluster_num: 21 count: 534   || cluster_num: 37 count: 518   || cluster_num: 38 count: 345   || cluster_num: 73 count: 315   || cluster_num: 57 count: 314   || cluster_num: 4 count: 302   || cluster_num: 22 count: 291   || cluster_num: 70 count: 285   || cluster_num: 8 count: 225   || cluster_num: 2 count: 224   || cluster_num: 9 count: 218   || cluster_num: 26 count: 182   || cluster_num: 49 count: 178   || cluster_num: 65 count: 138   || cluster_num: 29 count: 137   || cluster_num: 63 count: 123   || cluster_num: 25 count: 122   || cluster_num: 33 count: 105   || cluster_num: 1 count: 74   || cluster_num: 66 count: 71   || cluster_num: 27 count: 70   || cluster_num: 62 count: 66   || cluster_num: 69 count: 58   || cluster_num: 35 count: 56   || cluster_num: 11 count: 55   || cluster_num: 68 count: 54   || cluster_num: 14 count: 51   || cluster_num: 32 count: 49   || cluster_num: 30 count: 45   || cluster_num: 55 count: 38   || cluster_num: 6 count: 35   || cluster_num: 13 count: 34   || cluster_num: 43 count: 30   || cluster_num: 60 count: 30   || cluster_num: 58 count: 30   || cluster_num: 24 count: 29   || cluster_num: 39 count: 26   || cluster_num: 51 count: 25   || cluster_num: 3 count: 24   || cluster_num: 28 count: 24   || cluster_num: 15 count: 23   || cluster_num: 72 count: 23   || cluster_num: 17 count: 22   || cluster_num: 10 count: 22   || cluster_num: 34 count: 21   || cluster_num: 74 count: 20   || cluster_num: 36 count: 20   || cluster_num: 61 count: 19   || cluster_num: 31 count: 17   || cluster_num: 20 count: 13   || cluster_num: 18 count: 12   || cluster_num: 67 count: 12   || cluster_num: 12 count: 11   || cluster_num: 47 count: 11   || cluster_num: 59 count: 10   || cluster_num: 53 count: 8   || cluster_num: 7 count: 6   || cluster_num: 41 count: 6   || cluster_num: 40 count: 6   || cluster_num: 48 count: 3   || cluster_num: 56 count: 1
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>cluster_dict <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> y <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>X<span class="token punctuation">.</span>clusters<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">,</span> X<span class="token punctuation">.</span>clusters<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div>
<p>Now let's have a look at some of the termite clusters. We can use matplotlib and PIL to display multiple images using subplots.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token comment">#variables to manage the arrangement and spacing of cluster images</span>
total <span class="token operator">=</span> <span class="token number">0</span>
rows <span class="token operator">=</span> <span class="token number">0</span>
im_length <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">#set variables for cluster images based on cluster size</span>
<span class="token keyword">def</span> <span class="token function">set_spacing</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> total
    <span class="token keyword">global</span> rows
    <span class="token keyword">global</span> im_length
    <span class="token comment">#columns = 6</span>
    total <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
    extras <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">6</span>
    <span class="token keyword">if</span> extras <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
        total <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">-</span> extras<span class="token punctuation">)</span>
    rows <span class="token operator">=</span> total<span class="token operator">/</span><span class="token number">6</span><span class="token punctuation">.</span>
    im_length <span class="token operator">=</span> rows<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token operator">/</span><span class="token number">9</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token comment">#use matplotlib to show images loaded with PIL</span>
<span class="token keyword">def</span> <span class="token function">show_images</span><span class="token punctuation">(</span>cluster_num<span class="token punctuation">,</span> samples <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>  files_bool<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> files<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> files_bool<span class="token operator">==</span><span class="token boolean">True</span><span class="token punctuation">:</span>
        files1 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>files<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span>files<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> samples<span class="token punctuation">)</span><span class="token punctuation">,</span> replace<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>samples <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&</span> <span class="token punctuation">(</span>files_bool<span class="token operator">==</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        files1 <span class="token operator">=</span> X<span class="token punctuation">[</span>X<span class="token punctuation">.</span>clusters<span class="token operator">==</span>cluster_num<span class="token punctuation">]</span><span class="token punctuation">.</span>index
    <span class="token keyword">if</span> <span class="token punctuation">(</span>samples <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&</span> <span class="token punctuation">(</span>files_bool<span class="token operator">==</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        files1 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>X<span class="token punctuation">[</span>X<span class="token punctuation">.</span>clusters<span class="token operator">==</span>cluster_num<span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span>cluster_dict<span class="token punctuation">[</span>cluster_num<span class="token punctuation">]</span><span class="token punctuation">,</span>samples<span class="token punctuation">)</span><span class="token punctuation">,</span> replace<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    set_spacing<span class="token punctuation">(</span>files1<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span>im_length<span class="token punctuation">)</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">'~/Documents/CA_1/imgs/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> num<span class="token punctuation">,</span> x <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>files1<span class="token punctuation">)</span><span class="token punctuation">:</span>
        img <span class="token operator">=</span> PIL<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span>rows<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>x<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Cluster #'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>X<span class="token punctuation">.</span>ix<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>clusters<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' -- Cluster Total: '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>cluster_dict<span class="token punctuation">[</span>X<span class="token punctuation">.</span>ix<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>clusters<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #16 -- Cluster Total: 3293
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_44_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">46</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #46 -- Cluster Total: 2993
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_45_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">51</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #51 -- Cluster Total: 25
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_46_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #18 -- Cluster Total: 12
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_47_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #4 -- Cluster Total: 302
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_48_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #5 -- Cluster Total: 1412
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_49_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #6 -- Cluster Total: 35
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_50_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #9 -- Cluster Total: 218
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_51_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #12 -- Cluster Total: 11
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_52_1.png"></p>
<p>The next four cluster samples are the largest clusters:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #30 -- Cluster Total: 45
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_54_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #30 -- Cluster Total: 45
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_55_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #0 -- Cluster Total: 2752
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_56_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #30 -- Cluster Total: 45
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_57_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #63 -- Cluster Total: 123
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_58_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #60 -- Cluster Total: 30
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_59_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">59</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #59 -- Cluster Total: 10
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_60_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">57</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #57 -- Cluster Total: 314
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_61_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">56</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #56 -- Cluster Total: 1
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_62_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #55 -- Cluster Total: 38
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_63_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">54</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #54 -- Cluster Total: 686
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_64_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #53 -- Cluster Total: 8
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_65_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #52 -- Cluster Total: 2540
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_66_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">51</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #51 -- Cluster Total: 25
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_67_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #50 -- Cluster Total: 2185
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_68_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">49</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #49 -- Cluster Total: 178
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_69_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #48 -- Cluster Total: 3
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_70_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #47 -- Cluster Total: 11
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_71_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">46</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #46 -- Cluster Total: 2993
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_72_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #45 -- Cluster Total: 816
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_73_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">44</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #44 -- Cluster Total: 791
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_74_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #43 -- Cluster Total: 30
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_75_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #42 -- Cluster Total: 625
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_76_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">41</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #41 -- Cluster Total: 6
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_77_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #40 -- Cluster Total: 6
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_78_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">39</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #39 -- Cluster Total: 26
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_79_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">38</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #38 -- Cluster Total: 345
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_80_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>show_images<span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">,</span> samples<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #37 -- Cluster Total: 518
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_81_1.png"></p>
<p>The vast majority of termites seem to form nondescript blobs after 100000 steps. There are perhaps many thousands of termites that didn't yet reach a . Setting the clusters parameter to 75 is probably too high. Many of the groups have similar behaviour. There were several cluster groups that formed 'highways'. It may make more sense to filter out these termites and cluster termites that didn't form highways.</p>
<h1 id="outlier-detection"><a href="#outlier-detection" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Outlier Detection</h1>
<p>It could also be interesting to see how many outliers are present in each cluster for various values of k in the k-means algorithm. This may help us choose a more fitting number of clusters by which the termites can be grouped. here's how we could do that:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>ensemble <span class="token keyword">import</span> IsolationForest
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X_ <span class="token operator">=</span> X<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>X<span class="token punctuation">.</span>clusters<span class="token operator">==</span><span class="token number">37</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">#16</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X_ <span class="token operator">=</span> X<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>X<span class="token punctuation">.</span>clusters<span class="token operator">==</span><span class="token number">37</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>clf <span class="token operator">=</span> IsolationForest<span class="token punctuation">(</span>max_samples<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span>rng<span class="token punctuation">)</span>
clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_<span class="token punctuation">)</span>

y_pred_train <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_<span class="token punctuation">)</span>

</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>y_pred_train<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>0.79922779922779918
</code></pre></div>
<p>The following values gives us the average of the predicted values (1 for inlier, -1 for outlier), so this value doesn't correspond to a percentage accuracy. The accuracy is about 89% (the model determined that 89% of termites in cluster 37 are inliers and the remaining 11% are outliers.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X_<span class="token punctuation">[</span><span class="token string">'anom'</span><span class="token punctuation">]</span> <span class="token operator">=</span> y_pred_train
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>X_<span class="token punctuation">.</span>anom<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code> 1    466
-1     52
Name: anom, dtype: int64
</code></pre></div>
<p>Let's compare some of the inliers with the outliers:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>files_normal <span class="token operator">=</span> X_<span class="token punctuation">[</span>X_<span class="token punctuation">.</span>anom<span class="token operator">==</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
show_images<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> samples <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">,</span> files_bool<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> files<span class="token operator">=</span>files_normal<span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #37 -- Cluster Total: 518
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_92_1.png"></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code>files_abnormal <span class="token operator">=</span> X_<span class="token punctuation">[</span>X_<span class="token punctuation">.</span>anom<span class="token operator">==</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
show_images<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> samples <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">,</span> files_bool<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> files<span class="token operator">=</span>files_abnormal<span class="token punctuation">)</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Cluster #37 -- Cluster Total: 518
</code></pre></div>
<p><img alt="png" src="/static/ants_files/ants_93_1.png"></p>
<p>This sample of outliers seems to have slightly different characteristics compared with the inlier sample. This can be seen in the patches of solid colors (pink, purple, teal, grey).</p>
<h1 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h1>
<p>Using k-means and Isolation Forests with this set of over 30,000 termites offers a quick and easy way to sort out major trends that these deterministic systems display. As you can see in the cluster samples above, the classification is far from perfect. Some near-identical termites are in different clusters. It would be interesting to tweak some aspects of this experiment in the future:</p>
<ul>
<li>Larger number of states (>16)</li>
<li>More steps (>100000) / bigger grid</li>
<li>Random "noise" on the grid at step 0</li>
<li>Variation on the rules</li>
<li>Segmenting 'highway' termites before clustering</li>
</ul></div> <div class="fixed bg-white shadow right-0 bottom-0 rounded-full p-4 m-4 cursor-pointer h-2 w-2" data-v-51e3ff6a><span class="text-black" data-v-51e3ff6a> 🗣 </span></div> <div id="disqus_thread" identifier="langton-ant-notebook.html" style="min-height:200px"></div> <h1></h1></div></article> <div class="p-4 lg:px-16 text-center" data-v-45f22fd0><hr data-v-45f22fd0> <div class="py-4" data-v-45f22fd0>Thanks for checking out my site!</div> <div class="pb-4" data-v-45f22fd0>© 2020 Brian Caffey</div></div></div></div></div><script defer src="/_nuxt/static/1601789838/2017/04/02/langton-ant-notebook.html/state.js"></script><script src="/_nuxt/912e878.js" defer></script><script src="/_nuxt/6032d3d.js" defer></script><script src="/_nuxt/e3fc94c.js" defer></script><script src="/_nuxt/22b7dce.js" defer></script><script src="/_nuxt/bc44e8c.js" defer></script>
  </body>
</html>
