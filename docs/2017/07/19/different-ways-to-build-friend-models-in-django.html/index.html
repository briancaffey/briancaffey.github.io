<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Comparing different ways to build friend objects in Django</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Brian Caffey's personal website"><meta data-n-head="ssr" name="robots" content="all"><meta data-n-head="ssr" property="og:title" content="Comparing different ways to build friend objects in Django"><meta data-n-head="ssr" property="og:description" content="undefined"><meta data-n-head="ssr" property="og:image" content="https://briancaffey.github.ioundefined"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/0d5e9fc.js" as="script"><link rel="preload" href="/_nuxt/35383e5.js" as="script"><link rel="preload" href="/_nuxt/e161084.js" as="script"><link rel="preload" href="/_nuxt/223edee.js" as="script"><link rel="preload" href="/_nuxt/64fe595.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 f52d43e0:0 517a8dd7:0 fa7ff0ca:0 56b15182:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-red-300{--bg-opacity:1;background-color:#feb2b2;background-color:rgba(254,178,178,var(--bg-opacity))}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.flex-1{flex:1 1 0%}.font-bold{font-weight:700}.h-3{height:.75rem}.h-4{height:1rem}.h-12{height:3rem}.h-32{height:8rem}.h-64{height:16rem}.text-sm{font-size:.875rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-8{line-height:2rem}.leading-9{line-height:2.25rem}.m-2{margin:.5rem}.m-4{margin:1rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.-ml-1{margin-left:-.25rem}.-ml-3{margin-left:-.75rem}.-ml-20{margin-left:-5rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.object-cover{-o-object-fit:cover;object-fit:cover}.p-3{padding:.75rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-32{padding-top:8rem;padding-bottom:8rem}.pt-4{padding-top:1rem}.pr-4{padding-right:1rem}.pb-4{padding-bottom:1rem}.pt-8{padding-top:2rem}.pb-8{padding-bottom:2rem}.pt-16{padding-top:4rem}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.resize{resize:both}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-red-400{--text-opacity:1;color:#fc8181;color:rgba(252,129,129,var(--text-opacity))}.text-red-600{--text-opacity:1;color:#e53e3e;color:rgba(229,62,62,var(--text-opacity))}.uppercase{text-transform:uppercase}.visible{visibility:visible}.w-3{width:.75rem}.w-4{width:1rem}.w-12{width:3rem}.w-32{width:8rem}.w-full{width:100%}.z-10{z-index:10}.gap-4{grid-gap:1rem;gap:1rem}.gap-6{grid-gap:1.5rem;gap:1.5rem}.gap-8{grid-gap:2rem;gap:2rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition-all{transition-property:all}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.duration-150{transition-duration:.15s}.delay-150{transition-delay:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:inline{display:inline}.sm\:hidden{display:none}.sm\:p-16{padding:4rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:w-2\/3{width:66.666667%}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:px-4{padding-left:1rem;padding-right:1rem}.md\:w-1\/2{width:50%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:1024px){.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pl-64{padding-left:16rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1280px){.xl\:pb-16{padding-bottom:4rem}}:root{--color:#243746;--color-primary:#158876;--color-secondary:#0e2233;--bg:#f3f5f4;--bg-secondary:#fff;--bg-code:#ddd;--border-color:#ddd}.dark-mode{--color:#ebf4f1;--color-primary:#41b38a;--color-secondary:#fdf9f3;--bg:#091a28;--bg-secondary:#071521;--bg-code:#ddd;--border-color:#0d2538}.sepia-mode{--color:#433422;--color-primary:#504231;--color-secondary:#504231;--bg:#f1e7d0;--bg-code:#ddd;--bg-secondary:#eae0c9;--border-color:#ded0bf}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;background-color:#f3f5f4;background-color:var(--bg);color:#243746;color:var(--color);transition:background-color .3s}a{color:#158876;color:var(--color-primary)}.py-05{padding-top:.125rem;padding-bottom:.125rem}.markdown{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity));line-height:1.5;color:#0e2233;color:var(--color-secondary)}.markdown .token.operator{background:0 0}.markdown>*+*{margin-top:0;margin-bottom:1rem}.markdown li+li{margin-top:.25rem}.markdown li>p+p{margin-top:1.5rem;color:#158876;color:var(--color-primary)}.markdown img{margin:auto}.markdown a,.markdown strong{font-weight:600}.markdown strong a{font-weight:700}.markdown h1{font-size:2.25rem}.markdown h1,.markdown h2{border-color:#158876;border-color:var(--color-primary);line-height:1.25;border-bottom-width:1px;font-weight:600;margin-bottom:1rem;margin-top:1.5rem;padding-bottom:.5rem}.markdown h2{font-size:1.5rem}.markdown h3{line-height:1.375;font-size:1.125rem}.markdown h3,.markdown h4{border-color:#158876;border-color:var(--color-primary);font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown h4{line-height:1;font-size:1rem}.markdown h5{border-color:#158876;border-color:var(--color-primary)}.markdown h5,.markdown h6{line-height:1.25;font-size:.875rem;font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown blockquote,.markdown h6{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.markdown blockquote{font-size:1rem;border-left-width:4px;--border-opacity:1;border-color:#e2e8f0;border-color:rgba(226,232,240,var(--border-opacity));padding-left:1rem;padding-right:1rem;border-color:#158876;border-color:var(--color-primary)}.markdown code{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875rem;display:inline;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity));padding:.125rem .25rem;background-color:#ddd;background-color:var(--bg-code);color:#000}.markdown code,.markdown pre{--bg-opacity:1;border-radius:.25rem}.markdown pre{background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity));padding:1rem}.markdown pre code{display:block;background-color:transparent;padding:0;overflow:visible;border-radius:0;color:#000}.markdown p{margin-bottom:10px}code[class*=language-],pre[class*=language-]{background:#ddd!important;background:var(--bg-code)!important;text-shadow:none!important}.markdown ul{list-style-type:disc}.markdown ol,.markdown ul{font-size:1rem;padding-left:2rem}.markdown ol{list-style-type:decimal}.markdown kbd{font-size:.75rem;display:inline-block;border-radius:.25rem;border-width:1px;padding:.125rem .25rem;vertical-align:middle;font-weight:400;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.markdown table,td,th{font-size:1rem;border:1px solid #243746;border-color:var(--color)}.markdown table{overflow-x:scroll}.markdown td,.markdown th{border-width:1px;padding:.25rem .75rem}.markdown .highlight pre{--bg-opacity:1!important;background-color:#f7fafc!important;background-color:rgba(247,250,252,var(--bg-opacity))!important}.article-card{box-shadow:0 5px 10px 1px #0e2233;box-shadow:0 5px 10px 1px var(--color-secondary);height:100%}.article-card:hover{box-shadow:0 5px 15px 5px #0e2233;box-shadow:0 5px 15px 5px var(--color-secondary)}.blog-card-description,.blog-date{color:#0e2233;color:var(--color-secondary)}.blog-date{font-style:italic}hr{background-color:#243746;background-color:var(--color);border:none;height:1px}.menu-icon{background-color:#ddd;background-color:var(--border-color)}.menu-icon,.mobile-menu{color:#243746;color:var(--color)}.mobile-menu{background-color:#fff;background-color:var(--bg-secondary)}.btn{border-radius:1;border-color:#158876;border-color:var(--color-primary)}.btn:hover{background-color:#fff;background-color:var(--bg-secondary)}.hero{border-color:#158876;border-color:var(--color-primary)}.markdown{word-wrap:break-word}.markdown h2:before,.markdown h3:before{display:block;content:" ";margin-top:-85px;height:85px;visibility:hidden;pointer-events:none}.markdown h2>a,.markdown h3>a{margin-left:1.25rem}.markdown h2>a:before,.markdown h3>a:before{content:"#";font-weight:400;font-size:1.25rem;line-height:2rem;margin-left:-1.25rem;padding-right:.5rem;position:absolute;opacity:1}@media (min-width:1024px){.markdown h2>a,.markdown h3>a{margin-left:0}.markdown h2>a:before,.markdown h3>a:before{opacity:0}}.markdown h2:hover>a:before,.markdown h3:hover>a:before{opacity:1}& pre[class*=language-]{--bg-opacity:1;background-color:#2d3748;background-color:rgba(45,55,72,var(--bg-opacity));position:static}.mc{background-color:#f3f5f4;background-color:var(--bg);border-color:#158876;border-color:var(--color-primary);border-width:1px;color:#158876;color:var(--color-primary);justify-content:center;padding:5px 10px;border-radius:5px;width:100%}.mc-btn{color:#fff;color:var(--bg-secondary);background-color:#0e2233;background-color:var(--color-secondary);cursor:pointer}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}</style><link rel="preload" href="/_nuxt/static/1612150091/2017/07/19/different-ways-to-build-friend-models-in-django.html/state.js" as="script"><link rel="preload" href="/_nuxt/static/1612150091/2017/07/19/different-ways-to-build-friend-models-in-django.html/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1612150091/manifest.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function (){"use strict";var e=window,s=document,t=s.documentElement,n=["dark","light"],o=function(e){for(var t=e+"=",n=s.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}("nuxt-color-mode")||"system",a="system"===o?c():o;function i(e){var s=""+e+"-mode";t.classList?t.classList.add(s):t.className+=" "+s}function r(s){return e.matchMedia("(prefers-color-scheme"+s+")")}function c(){if(e.matchMedia&&"not all"!==r("").media)for(var s of n)if(r(":"+s).matches)return s;return"light"}i(a),e["__NUXT_COLOR_MODE__"]={preference:o,value:a,getColorScheme:c,addClass:i,removeClass:function(e){var s=""+e+"-mode";t.classList?t.classList.remove(s):t.className=t.className.replace(new RegExp(s,"g"),"")}}}();
</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="mx-auto grid grid-cols-3 py-2 px-2 sm:px-4 items-center max-w-6xl" data-v-b364ef96><div class="justify-left" data-v-b364ef96><a href="/" class="text-xl nuxt-link-active" data-v-b364ef96><span class="hidden sm:inline" data-v-b364ef96>Brian Caffey</span><span class="inline sm:hidden" data-v-b364ef96>JBC</span></a></div> <div class="justify-center flex" data-v-b364ef96><div class="grid items-center justify-center" data-v-b364ef96><ul class="flex px-4"><li class="md:px-4 px-1 cursor-pointer">
      üñ•Ô∏è
    </li><li class="md:px-4 px-1 cursor-pointer">
      üåû
    </li><li class="md:px-4 px-1 cursor-pointer">
      üåö
    </li><li class="md:px-4 px-1 cursor-pointer">
      ‚òï
    </li></ul></div></div> <div class="flex justify-end relative" data-v-b364ef96><div class="grid items-center justify-center" data-v-b364ef96><ul><li class="md:px-4 px-1 cursor-pointer">
      üá∫üá∏
    </li></ul> <div class="relative rounded-md -ml-3"><div class="absolute left-0 bg-white shadow-md rounded px-4 py-2 w-32 text mt-4 -ml-20" style="display:none"><a href="/2017/07/19/different-ways-to-build-friend-models-in-django.html" aria-current="page" class="nuxt-link-exact-active nuxt-link-active">üá∫üá∏ English</a><a href="/fr/2017/07/19/different-ways-to-build-friend-models-in-django.html">üá´üá∑ Fran√ßais</a><a href="/zh/2017/07/19/different-ways-to-build-friend-models-in-django.html">üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá</a><a href="/ru/2017/07/19/different-ways-to-build-friend-models-in-django.html">üá∑üá∫ –†—É—Å—Å–∫–∏–π</a><a href="/jp/2017/07/19/different-ways-to-build-friend-models-in-django.html">üáØüáµ Êó•Êú¨Ë™û</a></div></div></div> ¬†
    <nav data-v-ec6a03a4 data-v-b364ef96><ul class="items-right justify-end hidden md:flex" data-v-ec6a03a4><li class="px-4" data-v-ec6a03a4><a href="/blog" data-v-ec6a03a4>Blog</a></li> <li class="px-4" data-v-ec6a03a4><a href="/projects" data-v-ec6a03a4>Projects</a></li> <li class="px-4" data-v-ec6a03a4><a href="/contact" data-v-ec6a03a4>Contact</a></li></ul> <div class="flex justify-end md:hidden z-1000" data-v-ec6a03a4><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-ec6a03a4><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current h-3 w-3" data-v-ec6a03a4><title data-v-ec6a03a4>Menu</title> <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-ec6a03a4></path></svg></button></div> <!----></nav></div></div> <article><!----> <div class="mx-auto max-w-5xl px-2 sm:px-4 md:px-4 lg:px-16 mt-2"><h1 class="prose text-3xl leading-9">Comparing different ways to build friend objects in Django</h1> <div class="flex flex-wrap -ml-1 py-2" data-v-1f8089c5><a href="/blog/tags/django" data-v-2b5535c8 data-v-1f8089c5><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-2b5535c8>
    django üè∑Ô∏è
    <!----></div></a></div> <!----> <p class="blog-date text-gray-500 mb-4">
      Last Updated on
      July 18, 2017
    </p> <!----> <div class="markdown nuxt-content"><p>This post will briefly explore two different methods of creating models in Django for friends, relationships, followers or connections on a social network. The first method is one I learned from <a href="https://www.youtube.com/watch?v=IXJ46DitsIg&index=55&list=PLw02n0FEB3E3VSHjyYMcFadtQORvl1Ssj" rel="nofollow noopener noreferrer" target="_blank">this youtube tutorial series</a> by <a href="https://github.com/maxg203" rel="nofollow noopener noreferrer" target="_blank">Max Goodridge</a> when I first started learning Django.</p>
<h2 id="1st-method-manytomanyfield-to-store-friends"><a href="#1st-method-manytomanyfield-to-store-friends" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1st Method: <strong>ManytoManyField</strong> to store friends</h2>
<p>Using Django's <code>ManyToManyField</code>, we can define the following <code>Friend</code> model:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models
<span class="token keyword">from</span> accounts<span class="token punctuation">.</span>models <span class="token keyword">import</span> UserProfile

<span class="token keyword">class</span> <span class="token class-name">Friend</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    users <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>UserProfile<span class="token punctuation">)</span>
    current_user <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>UserProfile<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"owner"</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">make_friend</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> current_user<span class="token punctuation">,</span> new_friend<span class="token punctuation">)</span><span class="token punctuation">:</span>
        friend<span class="token punctuation">,</span> created <span class="token operator">=</span> cls<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_or_create<span class="token punctuation">(</span>
            current_user <span class="token operator">=</span> current_user
        <span class="token punctuation">)</span>
        friend<span class="token punctuation">.</span>users<span class="token punctuation">.</span>add<span class="token punctuation">(</span>new_friend<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">remove_friend</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> current_user<span class="token punctuation">,</span> new_friend<span class="token punctuation">)</span><span class="token punctuation">:</span>
        friend<span class="token punctuation">,</span> created <span class="token operator">=</span> cls<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_or_create<span class="token punctuation">(</span>
            current_user <span class="token operator">=</span> current_user
        <span class="token punctuation">)</span>
        friend<span class="token punctuation">.</span>users<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>new_friend<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_user<span class="token punctuation">)</span>
</code></pre></div>
<p>With this type of model, we define the following views to add and remove friends:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span> get_object_or_404<span class="token punctuation">,</span> redirect
<span class="token keyword">from</span> accounts<span class="token punctuation">.</span>models <span class="token keyword">import</span> UserProfile
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User
<span class="token keyword">from</span> friends<span class="token punctuation">.</span>models <span class="token keyword">import</span> Friend
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> login_required

<span class="token decorator annotation punctuation">@login_required</span>
<span class="token keyword">def</span> <span class="token function">add_or_remove_friends</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> username<span class="token punctuation">,</span> verb<span class="token punctuation">)</span><span class="token punctuation">:</span>
    n_f <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>User<span class="token punctuation">,</span> username<span class="token operator">=</span>username<span class="token punctuation">)</span>
    owner <span class="token operator">=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>userprofile
    new_friend <span class="token operator">=</span> UserProfile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>user<span class="token operator">=</span>n_f<span class="token punctuation">)</span>

    <span class="token keyword">if</span> verb <span class="token operator">==</span> <span class="token string">"add"</span><span class="token punctuation">:</span>
        new_friend<span class="token punctuation">.</span>followers<span class="token punctuation">.</span>add<span class="token punctuation">(</span>owner<span class="token punctuation">)</span>
        Friend<span class="token punctuation">.</span>make_friend<span class="token punctuation">(</span>owner<span class="token punctuation">,</span> new_friend<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        new_friend<span class="token punctuation">.</span>followers<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>owner<span class="token punctuation">)</span>
        Friend<span class="token punctuation">.</span>remove_friend<span class="token punctuation">(</span>owner<span class="token punctuation">,</span> new_friend<span class="token punctuation">)</span>

    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>new_friend<span class="token punctuation">.</span>get_absolute_url<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>
<p>The <code>Friend</code> model has a <code>ForeignKey</code> relationship ("owner"), a given user, and a <code>ManyToManyField</code> relationship with other <code>UserProfile</code> objects.</p>
<p>I am using a UserProfile model to build the <code>Friend</code> model and view. This is a common practice in Django, you can read more about it <a href="https://simpleisbetterthancomplex.com/tutorial/2016/07/22/how-to-extend-django-user-model.html" rel="nofollow noopener noreferrer" target="_blank">this article about extending the user model</a>.</p>
<p>In this example, the <code>UserProfile</code> also has a <code>ManyToManyField</code> called followers that store the users following that user. I access this field in the <code>add_or_remove_friends</code> method.</p>
<p>Because I am using <code>UserProfile</code> model in the <code>ManyToManyField</code> and <code>ForeignKey</code> relationships in the <code>Friend</code> model, in the <code>add_or_remove_friends</code> view I need to first get the <code>User</code> model by username, and then find the <code>UserProfile</code> model.</p>
<p>The class methods in the <code>Friend</code> model make use of a very helpful method called <code>get_or_create</code>. This method returns the existing or new model, and a boolean value indicating whether or not a new object was created.</p>
<p>This approach is helpful when you want to track the users someone is following and the followers of any given user. For example, to get the users that follow a particular user, we can do the following in a template:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-html"><code>{% for friend in request.user.userprofile.followers.all %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>{{ friend }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
{% endfor %}
</code></pre></div>
<p>To get the users that a user follows, we could access the friend model in a view and then get a list of users in the <code>ManyToManyField</code>:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">def</span> <span class="token function">list_friends</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    friend_object<span class="token punctuation">,</span> created <span class="token operator">=</span> Friend<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get_or_create<span class="token punctuation">(</span>current_user<span class="token operator">=</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>userprofile<span class="token punctuation">)</span>
    friends <span class="token operator">=</span> <span class="token punctuation">[</span>friend <span class="token keyword">for</span> friend <span class="token keyword">in</span> friend_object<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> friend <span class="token operator">!=</span> request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>userprofile<span class="token punctuation">]</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'template.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"friends"</span><span class="token punctuation">:</span>friends<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>
<p>Alternatively, we could write a class method to do this for is in the friend model.</p>
<p>This is a good way to track relationships if relationships is the only piece of information we need to track. However, if we want to track more information about a relationship, such as the date and time the relationship was formed, we will quickly see the limits of this model schema. The next method provides another way that allows us to store more information about each relationship.</p>
<h2 id="2nd-method-foreignkey-with-one-relationship-per-object"><a href="#2nd-method-foreignkey-with-one-relationship-per-object" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2nd Method: <strong>ForeignKey</strong> with one relationship per object</h2>
<p>Another popular solution for making a <code>Friend</code> model in Django discussions around the internet describes the following method (originally seen on Stack Overflow in <a href="https://stackoverflow.com/questions/4564760/best-way-to-make-djangos-user-system-have-friends" rel="nofollow noopener noreferrer" target="_blank">this post</a>). Let's call this model <code>Connection</code>:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">class</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    created <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> editable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    creator <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>User<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"friendship_creator_set"</span><span class="token punctuation">)</span>
    following <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>User<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">"friend_set"</span><span class="token punctuation">)</span>
</code></pre></div>
<p>With this model, we would want to create additional class methods on our <code>UserProfile</code> model to easily get a list of connections (users the user is following) and followers (users following the user) in a template or view:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">from</span> friends<span class="token punctuation">.</span>models <span class="token keyword">import</span> Friendship
<span class="token keyword">class</span> <span class="token class-name">UserProfile</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">get_connections</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        connections <span class="token operator">=</span> Connection<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>creator<span class="token operator">=</span>self<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
        <span class="token keyword">return</span> connections

    <span class="token keyword">def</span> <span class="token function">get_followers</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        followers <span class="token operator">=</span> Connection<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>following<span class="token operator">=</span>self<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
        <span class="token keyword">return</span> followers
</code></pre></div>
<h2 id="accessing-connection-information-in-api-data"><a href="#accessing-connection-information-in-api-data" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Accessing Connection Information in API Data</h2>
<p>In a recent project I have been looking for a way to display all users in a network, and also show the connection status between each user listed and the currently logged-in user. This could be done by writing additional model methods on the UserProfile model and then access these methods in the template. Since I am using React.js to display the user list, I can't access a model method in the template. Instead, I will have get the connection data inside of the API. Using the Django REST Framework, this can be accomplished with <code>SerializerMethodField</code>.</p>
<p>Here's a quick description of <code>SerializerMethodField</code> from the <a href="http://www.django-rest-framework.org/api-guide/fields/#serializermethodfield" rel="nofollow noopener noreferrer" target="_blank">Django REST Framework documentation</a>:</p>
<blockquote>
<p>This is a read-only field. It gets its value by <strong>calling a method on the serializer class it is attached to</strong>. It can be used to add any sort of data to the serialized representation of your object.</p>
</blockquote>
<p>Here's a view and serializer that I use to show all users in a social network, along with Boolean Fields that indicate if each user is following or followed by the logged-in user making the request.</p>
<p><em>api/views.py</em></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">class</span> <span class="token class-name">UserListAPIView</span><span class="token punctuation">(</span>ListAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queryset <span class="token operator">=</span> UserProfile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> UserListSerializer
</code></pre></div>
<p><em>api/serializers.py</em></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-python"><code><span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>models <span class="token keyword">import</span> UserProfile<span class="token punctuation">,</span> Connection
<span class="token keyword">class</span> <span class="token class-name">UserListSerializer</span><span class="token punctuation">(</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>

    following <span class="token operator">=</span> serializers<span class="token punctuation">.</span>SerializerMethodField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    follows_requesting_user <span class="token operator">=</span> serializers<span class="token punctuation">.</span>SerializerMethodField<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> UserProfile
        fields <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">'user'</span><span class="token punctuation">,</span>
            <span class="token string">'first_name'</span><span class="token punctuation">,</span>
            <span class="token string">'last_name'</span><span class="token punctuation">,</span>
            <span class="token string">'bio'</span><span class="token punctuation">,</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token string">'following'</span><span class="token punctuation">,</span>
            <span class="token string">'follows_requesting_user'</span><span class="token punctuation">,</span>
            <span class="token string">'follow_link'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">get_following</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>
        creator <span class="token operator">=</span> self<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'request'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>user
        following <span class="token operator">=</span> obj<span class="token punctuation">.</span>user
        connected <span class="token operator">=</span> Connection<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>creator<span class="token operator">=</span>creator<span class="token punctuation">,</span> following<span class="token operator">=</span>following<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>connected<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_follows_requesting_user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>
        creator <span class="token operator">=</span> self<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'request'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>user
        following <span class="token operator">=</span> obj<span class="token punctuation">.</span>user
        connected <span class="token operator">=</span> Connection<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>creator<span class="token operator">=</span>following<span class="token punctuation">,</span> following<span class="token operator">=</span>creator<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>connected<span class="token punctuation">)</span>
</code></pre></div>
<p>Finally, here's look into the <code>index.js</code> file that includes the React component which consumes this API data:</p>
<p><em>assets/js/index.js</em></p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token spread operator">...</span>

<span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'users-container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token maybe-class-name">UserList</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">loadUsersFromServer</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'something'</span><span class="token punctuation">)</span>
      $<span class="token punctuation">.</span><span class="token method function property-access">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">,</span>
        datatype<span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
        cache<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token operator">:</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">componentDidMount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">loadUsersFromServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">loadUsersFromServer</span><span class="token punctuation">,</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">pollInterval</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> userNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"thumbnail"</span> key<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"caption post-detail-item"</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"row"</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"col-md-3"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>img className<span class="token operator">=</span><span class="token string">"img-responsive"</span> src<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">photo_url</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
                <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">following</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>label className<span class="token operator">=</span><span class="token string">"label label-primary"</span><span class="token operator">></span>following<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">"btn btn-warning"</span> href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'/'</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token property-access">follow_link</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">Follow</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
                <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">follows_requesting_user</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>label className<span class="token operator">=</span><span class="token string">"label label-primary"</span><span class="token operator">></span>follows you<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"col-md-9"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>h2<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">first_name</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">last_name</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>
                <span class="token operator">&lt;</span>h4<span class="token operator">></span><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">job_title</span><span class="token punctuation">}</span> @ <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">current_company</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">></span>
                <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">is_facebook_connected</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"btn btn-default"</span><span class="token operator">></span><span class="token maybe-class-name">Facebook</span><span class="token operator">:</span> <span class="token maybe-class-name">Connected</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span> <span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span>
                <span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token property-access">is_linkedin_connected</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token string">"btn btn-default"</span><span class="token operator">></span><span class="token maybe-class-name">LinkedIn</span><span class="token operator">:</span> <span class="token maybe-class-name">Connected</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span> <span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">"btn btn-primary"</span> href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"/"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token property-access">user_profile_url</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token maybe-class-name">View</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token maybe-class-name">Women</span> <span class="token keyword">in</span> the <span class="token maybe-class-name">Lead</span> <span class="token maybe-class-name">Network</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
            <span class="token punctuation">{</span>userNodes<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>


  <span class="token maybe-class-name">ReactDOM</span><span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">UserList</span> url<span class="token operator">=</span><span class="token string">'/api/users/'</span> pollInterval<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">10000</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'users-container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div>
<h2 id="a-third-way"><a href="#a-third-way" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>A third way?</h2>
<p>There is a lot you can do with Connection models. This models explored here are fairly simple "following" relationships. The following process does not require that the user being followed accepts the initiating users "follow". Since I am designing this for a small, invite-only social-network, it is ok to keep things relatively simple for now.</p>
<p>The major difference between the first and second methods of building friendship/follower/connection models is that you can store more detailed information about each relationship. However, if we wanted to store data about the non-directional relationship between two people, we would have to make another model (perhaps with signals), or update the information in both Connection models (a -> b and b -> a).</p></div> <div class="text-center pb-4 pt-8"><button class="mc-btn rounded py-1 px-2">
        Show Disqus Comments üí¨
      </button></div> <!----> <h1></h1></div></article> <div class="mx-auto max-w-6xl p-4 lg:px-16 text-center" data-v-9723a4c2><hr class="mt-4" data-v-9723a4c2> <div class="mx-auto py-4" data-v-9723a4c2><div class="pb-4" data-v-9723a4c2>
      Join my mailing list to get updated whenever I publish a new article.
    </div> <div class="mx-auto" data-v-c067421e data-v-9723a4c2><div id="mc_embed_signup" class="mx-auto w-full md:w-1/2" data-v-c067421e><form id="mc-embedded-subscribe-form" action="https://github.us2.list-manage.com/subscribe/post?u=43a795784ca963e25903a0da6&id=9937fe4fc5" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate" data-v-c067421e><div id="mc_embed_signup_scroll" class="grid grid-cols-1 sm:grid-cols-2 gap-4 items-center" data-v-c067421e><input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Enter your email address" class="rounded mc text-center" data-v-c067421e> <div aria-hidden="true" style="position:absolute;left:-5000px" data-v-c067421e><input name="b_43a795784ca963e25903a0da6_9937fe4fc5" tabindex="-1" data-v-c067421e></div> <div data-v-c067421e><input id="mc-embedded-subscribe" type="submit" name="subscribe" value="Subscribe" class="mc-btn rounded px-2 py-1 w-full" data-v-c067421e></div></div></form></div></div></div> <hr data-v-9723a4c2> <div class="py-4" data-v-9723a4c2>Thanks for checking out my site!</div> <div class="pb-4" data-v-9723a4c2>¬© 2020 Brian Caffey</div></div></div></div></div><script defer src="/_nuxt/static/1612150091/2017/07/19/different-ways-to-build-friend-models-in-django.html/state.js"></script><script src="/_nuxt/0d5e9fc.js" defer></script><script src="/_nuxt/64fe595.js" defer></script><script src="/_nuxt/35383e5.js" defer></script><script src="/_nuxt/e161084.js" defer></script><script src="/_nuxt/223edee.js" defer></script>
  </body>
</html>
