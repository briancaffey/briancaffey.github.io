<!DOCTYPE html><html  lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Python, Vue, Chinese-LLaMA-2 and The Three-Body Problem</title><style>html{font-family:Montserrat,Arial,Sans Serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{border:1px solid #3b8070;border-radius:4px;color:#3b8070;display:inline-block;padding:10px 30px;text-decoration:none}.button--green:hover{background-color:#3b8070;color:#fff}.button--grey{border:1px solid #35495e;border-radius:4px;color:#35495e;display:inline-block;margin-left:15px;padding:10px 30px;text-decoration:none}.button--grey:hover{background-color:#35495e;color:#fff}</style><style>span.emoji-mart-emoji[data-v-05905815]{padding:0}.selected[data-v-05905815]{text-shadow:.25px 0 0 #000}.picker[data-v-05905815]{margin-left:auto;margin-right:auto;position:absolute;top:10px;transform:translate(50%,50%)}.top[data-v-05905815]{background-color:var(--color-primary);height:3px;width:100%}</style><style>.selected[data-v-1edc4b99]{text-shadow:.9px 0 0}</style><style>span.emoji-mart-emoji[data-v-de9cb334]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-de9cb334]:hover{transform:scale(1.3)}.centered[data-v-de9cb334]{left:50vw;margin-left:auto;margin-right:auto;position:absolute;right:50vw}</style><style>span.emoji-mart-emoji[data-v-f26190e6]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-f26190e6]:hover{transform:scale(1.3)}.picker[data-v-f26190e6]{left:0;margin-left:auto;margin-right:auto;position:absolute;right:0;z-index:10000000000}.localepicker[data-v-f26190e6]{background-color:var(--bg)}.localeText[data-v-f26190e6]{color:var(--color-primary)}</style><style>.tag[data-v-09161b57]{background-color:var(--color-tag);transition:transform .2s}.tag[data-v-09161b57]:hover{transform:scale(1.05)}</style><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.C_qR6n1r.css" crossorigin><link rel="stylesheet" href="/_nuxt/app.MFRQdpI0.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem/_payload.json?f7a02a46-9c0e-478e-936c-d4b79733d6b2"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/jzUacxre.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CDMEWRFj.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CzmcxFEq.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B-mOQKwH.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DPol-5Mm.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DuQfXRjE.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DjIsa8m4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/rBAQty2o.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C4Sm19mx.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CGR4pH2t.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CgFg6jAm.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CTfEw4GE.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BuB7IBBV.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D7hIbxa9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BnNjkjIJ.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C5aKNO_V.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/lzNerLNA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CfTcFQKu.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BgkXKTQS.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DidSn7PP.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/f7a02a46-9c0e-478e-936c-d4b79733d6b2.json"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BAz4hE9E.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DPdwgYFM.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/B9ziLBQK.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DAwWNWwV.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/_7iENaYg.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BVmCdIjn.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/D86XVKAs.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/rgQGHqoJ.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DDRJokCh.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BaoTS1Ec.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/B9rTWv16.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CJwV7gYv.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/C9IforG0.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Du9tXjnC.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Bq3ZV0Cc.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BPxGl8VU.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DbwMaSgs.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/zTRos7l-.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BZZoewB1.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/BSjOxtvE.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CRVSn5jR.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/UiuPncGx.js"><meta name="description" content="Brian Caffey's personal website"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="robots" content="all"><meta property="twitter:creator" content="@briancaffey"><meta property="twitter:site" content="@briancaffey"><meta property="og:title" content="Python, Vue, Chinese-LLaMA-2 and The Three-Body Problem"><meta property="og:description" content="Translating The Three-Body Problem book to English with Chinese LLMs, making visualizations with stable diffusion and running n-body simulations with CUDA"><meta property="og:image" content="https://briancaffey.github.io/static/three-body-problem/cover.png"><meta property="twitter:image" content="https://briancaffey.github.io/static/three-body-problem/cover.png"><meta property="twitter:card" content="summary_large_image"><script type="module" src="/_nuxt/jzUacxre.js" crossorigin></script><script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"-mode",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"-mode",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}</script></head><body><div id="__nuxt"><div><div><div data-v-05905815><div class="mx-auto flex py-2 px-2 sm:px-4 items-center max-w-6xl justify-center" data-v-05905815><div class="justify-left flex-grow flex-cols-4" data-v-05905815><a href="/" class="text-xl" data-v-05905815><span class="hidden sm:inline text-2xl" data-v-05905815>Brian Caffey</span><span class="inline sm:hidden" data-v-05905815>JBC</span></a></div><div class="flex-grow relative" data-v-05905815><nav z-index="10000" data-v-05905815 data-v-1edc4b99><div data-v-1edc4b99><ul class="items-right float-right hidden md:flex" data-v-1edc4b99><li class="px-4 text-lg" data-v-1edc4b99><a href="/blog/1" class="" data-v-1edc4b99>Blog</a></li><li class="px-4 text-lg" data-v-1edc4b99><a href="/contact" class="" data-v-1edc4b99>Contact</a></li></ul><div class="flex justify-end md:hidden z-1000" data-v-1edc4b99><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-1edc4b99><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-1edc4b99><title data-v-1edc4b99>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-1edc4b99></path></svg></button></div><!----></div></nav></div></div><div class="picker" data-v-05905815><div class="centered" data-v-05905815 data-v-de9cb334><div class="grid items-center justify-center" data-v-de9cb334><ul class="flex px-4" data-v-de9cb334><!--[--><li class="md:px-1 px-1 cursor-pointer" data-v-de9cb334><span aria-label="ğŸ–¥ï¸, desktop_computer" class="emoji-mart-emoji" data-v-de9cb334><span class="emoji-set-apple emoji-type-image" style="background-position:51.67% 95%;width:32px;height:32px;"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-de9cb334><span aria-label="ğŸŒ, sun_with_face" class="emoji-mart-emoji" data-v-de9cb334><span class="emoji-set-apple emoji-type-image" style="background-position:8.33% 48.33%;width:32px;height:32px;"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-de9cb334><span aria-label="ğŸŒš, new_moon_with_face" class="emoji-mart-emoji" data-v-de9cb334><span class="emoji-set-apple emoji-type-image" style="background-position:8.33% 41.67%;width:32px;height:32px;"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-de9cb334><span aria-label="â˜•, coffee" class="emoji-mart-emoji" data-v-de9cb334><span class="emoji-set-apple emoji-type-image" style="background-position:95% 30%;width:32px;height:32px;"></span></span></li><!--]--><li class="md:px-1 px-1 cursor-pointer" data-v-de9cb334><div data-v-de9cb334 data-v-f26190e6><ul data-v-f26190e6><li class="md:px-1 px-1 cursor-pointer" data-v-f26190e6><span aria-label="ğŸ‡ºğŸ‡¸, us, flag-us" class="emoji-mart-emoji" data-v-f26190e6><span class="emoji-set-apple emoji-type-image" style="background-position:6.67% 45%;width:32px;height:32px;"></span></span></li></ul><div class="rounded-md z-10 picker" data-v-f26190e6><!----></div></div></li></ul></div></div></div></div><!--[--><article><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Translating The Three-Body Problem book to English with Chinese LLMs, making visualizations with stable diffusion and running n-body simulations with CUDA" data-nuxt-img srcset="/_ipx/f_webp/static/three-body-problem/cover.png 1x, /_ipx/f_webp/static/three-body-problem/cover.png 2x" class="pt-2 w-full object-cover" style="height:32rem;" src="/_ipx/f_webp/static/three-body-problem/cover.png"><div class="mx-auto max-w-5xl px-2 sm:px-4 md:px-4 lg:px-16 mt-2"><h1 class="prose text-4xl leading-9 py-4 font-bold">Python, Vue, Chinese-LLaMA-2 and The Three-Body Problem</h1><div class="flex flex-wrap -ml-1 py-2"><!--[--><a href="/blog/tags/three-body-problem/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>three-body-problem ğŸ·ï¸ <!----></div></a><a href="/blog/tags/llama/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>llama ğŸ·ï¸ <!----></div></a><a href="/blog/tags/llm/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>llm ğŸ·ï¸ <!----></div></a><a href="/blog/tags/ai/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>ai ğŸ·ï¸ <!----></div></a><a href="/blog/tags/chinese/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>chinese ğŸ·ï¸ <!----></div></a><a href="/blog/tags/python/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>python ğŸ·ï¸ <!----></div></a><a href="/blog/tags/nvidia/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>nvidia ğŸ·ï¸ <!----></div></a><a href="/blog/tags/cuda/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>cuda ğŸ·ï¸ <!----></div></a><a href="/blog/tags/gpu/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>gpu ğŸ·ï¸ <!----></div></a><a href="/blog/tags/stable-diffusion/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>stable-diffusion ğŸ·ï¸ <!----></div></a><a href="/blog/tags/langchain/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>langchain ğŸ·ï¸ <!----></div></a><a href="/blog/tags/vue/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>vue ğŸ·ï¸ <!----></div></a><a href="/blog/tags/three.js/" class="" data-v-09161b57><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-09161b57>three.js ğŸ·ï¸ <!----></div></a><!--]--></div><div class="flex py-2"><!--[--><div class="pr-4 rounded"><a href="https://news.ycombinator.com/item?id=38393757"><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" width="25" alt="https://news.ycombinator.com/item?id=38393757" data-nuxt-img sizes="25px" srcset="/_ipx/w_25&amp;f_webp/icons/hn.png 25w, /_ipx/w_50&amp;f_webp/icons/hn.png 50w" class="rounded" src="/_ipx/w_50&amp;f_webp/icons/hn.png"></a></div><div class="pr-4 rounded"><a href="https://www.reddit.com/r/threebodyproblem/comments/1823l5j/python_vue_chinesellama2_and_the_threebody_problem/"><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" width="25" alt="https://www.reddit.com/r/threebodyproblem/comments/1823l5j/python_vue_chinesellama2_and_the_threebody_problem/" data-nuxt-img sizes="25px" srcset="/_ipx/w_25&amp;f_webp/icons/reddit.png 25w, /_ipx/w_50&amp;f_webp/icons/reddit.png 50w" class="rounded" src="/_ipx/w_50&amp;f_webp/icons/reddit.png"></a></div><div class="pr-4 rounded"><a href="https://twitter.com/briancaffey/status/1727710878349332614"><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" width="25" alt="https://twitter.com/briancaffey/status/1727710878349332614" data-nuxt-img sizes="25px" srcset="/_ipx/w_25&amp;f_webp/icons/x.png 25w, /_ipx/w_50&amp;f_webp/icons/x.png 50w" class="rounded" src="/_ipx/w_50&amp;f_webp/icons/x.png"></a></div><!--]--></div><p class="blog-date text-gray-500 mb-4">Last updated November 23, 2023</p><!----><div class="markdown"><h1 id="tldr"><!--[-->tl;dr<!--]--></h1><p><!--[-->This articles brings together several of my interest, both old and new:<!--]--></p><ul><!--[--><li><!--[-->The Sci-Fi book series &#39;Three-Body Problem&#39; by Liu Cixun<!--]--></li><li><!--[-->Chinese language<!--]--></li><li><!--[-->NLP techniques<!--]--></li><li><!--[-->Large Language Models (LLMs)<!--]--></li><li><!--[-->Stable Diffusion<!--]--></li><li><!--[-->Data visualization and 3D graphics<!--]--></li><li><!--[-->Mathematics<!--]--></li><li><!--[-->NVIDIA / CUDA<!--]--></li><!--]--></ul><p><!--[-->This is a linguistic, artistic and computational experiment with the two big AI algorithms of 2023: large language models (LLMs) and Stable Diffusion. I used the leading open-source LLMs from Chinaâ€™s tech sector to translate and summarize the text of Chinese author Liu Cixinâ€™s award-winning science fiction novel: The Three-Body Problem. The book&#39;s storyline is based on a simple yet elusive problem from classical physics: predicting the movement of three gravitationally-attracted objects in space. I generated code for simulations and visualizations of this physics problem to present my own solutions to the three-body problem based on parallel computation. I also used Stable Diffusion to portray the imaginitive solutions to the three-body physics problem from one of the bookâ€™s main settings: an immersive virtual-reality game that spans centries of world history.<!--]--></p><p><!--[-->I also share some of my experiences in China as an exchange student and research manager in the renewable energy technology sector. I wrote this article in English and translated it into Chinese using the same large language models I used to translate the Chinese text of the sci-fi novel into English. Warning: this article contains spoilers for the first book in the trilogy!<!--]--></p><h2 id="back-story"><a href="#back-story"><!--[-->Back story<!--]--></a></h2><p><!--[-->A few months ago my company announced that another round of layoffs was to come the following week. I&#39;m on an engineering team that had already been impacted by a few rounds of layoffs in the past year, and I was expecting to be let go. On an impulse I bought a book at the top of my reading list from Amazon: &quot;Three-Body Problem&quot;. It is an award-winning Sci-Fi trilogy written by Liu Cixin, a Chinese computer engineer who started writing the book as a series of essays that were published in China&#39;s &quot;World of Sci-Fi&quot; magazine.<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Images of Three Body Problem Book Series" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/books.png 1x, /_ipx/_/static/three-body-problem/books.png 2x" src="/_ipx/_/static/three-body-problem/books.png"><!--]--></p><p><!--[-->I started learning Chinese in college, adding a major in Chinese Language to the mathematics major I decided on in my freshman year after taking vector calculus and linear algebra. In my sophmore year I did a semester abroad at Fudan University&#39;s <a href="https://ices.fudan.edu.cn/6628/list.htm" rel="nofollow"><!--[-->International Cultural Exchange School<!--]--></a>. In 2007, living and studying Chinese in Shanghai as a 19 year old American was a really fun time. I was placed in an advanced-level course with a diverse group of students where English was not the lowest common linguistic denominator. We had a demanding cirriculum that emphasized reading, listening and speaking Chinese, but most of the language learning came through extracirricular activities: exploring Shanghai&#39;s food scene, bartering with vendors at the fabric markets, late night clubbing, walking around the Bund and the French Concession and chatting with my taxi cab drivers. It is hard to imagine how I did this without an iPhone, but I was able to get pretty far with an old Nokia 3310.<!--]--></p><p><!--[-->At the end of one night of particularly heavy drinking, some of my classmates and I dropped in on an wangba (internet cafe) before heading back to the international dorm. Chinese internet cafes in 2007 were an expansive underground dens of computers, monitors, MMORPGs, FPSs, cigarets, and on-demand instant noodles delivered directly to your seat through an app on the desktop. That night our game of choice was Counter-Strike. In one of the lowest points of my gaming career, my classmates and I were crushed by our Chinese counterterrorist opponent.<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Chinese internet cafe" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/wangba.webp 1x, /_ipx/_/static/three-body-problem/wangba.webp 2x" src="/_ipx/_/static/three-body-problem/wangba.webp"><!--]--></p><p><!--[-->My favorite memory of that semester at Fudan University was travelling on an epic over-night sleeper train from Shanghai to Guangxi province with a school-sponsored class trip to see Guilin. Multiple games of sam-yuk-gu (3-6-9) ran in parallel across the matrix of 3-by-2 sleeper car bunk beds lining the train car like workloads distributed across multiple GPU cores. The rules of 3-6-9 are simple: a group of people go around in a circle counting up from 1. If your number contains a 3, 6 or 9, you clap once for each occurance of the number instead of saying your number. The first person to break the rules takes a drink. Then repeat indefinitely. The next morning we all boarded a boat cruise in a daze to see the Lijiang river&#39;s stunning limestone peaks featured on the 20 yuan note:<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="20 yuan note with Guilin rock formations" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/twenty_small.gif 1x, /_ipx/_/static/three-body-problem/twenty_small.gif 2x" src="/_ipx/_/static/three-body-problem/twenty_small.gif"><!--]--></p><p><!--[-->My second job after college took me back to China where I specialized in the technologies, policies and applications of large scale battery projects as a research manager for China&#39;s energy storage industry association. The job exposed me to the power industry and cutting-edge battery projects, and also sharpened my technical Chinese as I was frequently reading, translating in a bi-linguagl environment. It was fun  I didn&#39;t realize it at the time, but that job was great preperation for reading Chinese Sci-Fi novels.<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="State Grid HQ in Xi Cheng" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/invokeai/castles.png 1x, /_ipx/_/static/three-body-problem/invokeai/castles.png 2x" src="/_ipx/_/static/three-body-problem/invokeai/castles.png"><!--]--></p><p><!--[-->My first introduction to the &#39;Three-Body Problem&#39; book came from one of my best friends from college. He lived at the inner-most leaf-node of one of Beijing&#39;s most labrythnian hutongs next to a family that trained racing pigeons. My friend and I bonded over our study of Chinese language, classical guitar and our experiences in Beijing. I strongly considered his recommendation to check out ä¸‰ä½“ (Three Body), the Chinese Sci-Fi novel about alien life in a solar system with three stars as he described it, but I never had the chance to read the book.<!--]--></p><iframe width="100%" height="315" src="https://www.youtube.com/embed/5lj99Uz1d50?si=TwrypbY4vTfeWGRf" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p><!--[-->Almost 10 years later I came across across a preview for the Netflix production of &quot;3 Body Problem&quot; scheduled to come out in early 2024. With the possibility of loosing my job weighing heavily on me, I picked up the books on Amazon hoping to have something to if I was going to be layed off. Over the weekend I was able to read a few of the chapters on my Kindle. I had not completely forgotten how to speak Chinese, and I could easily look up words and translate entire paragraphs with Google Translate.<!--]--></p><h2 id="chinese-in-numbers"><a href="#chinese-in-numbers"><!--[-->Chinese in numbers<!--]--></a></h2><p><!--[-->Here&#39;s a quick primer on the Chinese language from a mathematical perspective. This will be helpful before jumping into using NLP and LLMs with Chinese text later in this article.<!--]--></p><p><!--[-->First, how many Chinese characters are there? This question isn&#39;t specific enough to have a single answer. A common rule of thumb that I have heard before says that there are over 50,000 characters in total with roughly 10,000 characters in use and about 3,000 characters frequently used in Chinese media and newspapers (<a href="https://en.wikipedia.org/wiki/Chinese_language#Vocabulary" rel="nofollow"><!--[-->source<!--]--></a>). <a href="https://stackoverflow.com/a/1366113/6084948" rel="nofollow"><!--[-->This answer<!--]--></a> from StackOverflow&#39;s legendary #1 ranked user VonC gives a good answer based on the number of Unicode characters in the CJK Unified Ideographs block: 20,992.<!--]--></p><p><!--[-->Here are some numbers and statistics to be better understand the text of the Three-Body Problem Chinese text:<!--]--></p><ul><!--[--><li><!--[-->188,380 total charactes in the book<!--]--></li><li><!--[-->2,859 unique characters in the book<!--]--></li><li><!--[-->36 chapters in the book<!--]--></li><li><!--[-->average of 69.78 paragraphs per chapter<!--]--></li><li><!--[-->total of 2,512 paragraphs in the book<!--]--></li><li><!--[-->average of 74.99 characters per paragraph<!--]--></li><!--]--></ul><h3 id="character-frequency"><a href="#character-frequency"><!--[-->Character Frequency<!--]--></a></h3><p><!--[-->Let&#39;s look at how frequently each character in the book is used. We can also combine this with some data on the overall frequency of Chinese characters. The best measurement I found for overall character frequency is from <a href="https://lingua.mtsu.edu/chinese-computing/statistics/char/list.php?Which=MO" rel="nofollow"><!--[-->Middle Tennessee State University<!--]--></a>. Here&#39;s a visualization that shows of all of unique characters in the book. The height of a column represents how frequently a character occurs in the book, and the color represents the relatively frequency of the character in Chinese language overall.<!--]--></p><div class="wrap"><iframe class="p-4" src="https://briancaffey.github.io/three-body-problem/tjs/load.html" width="100%" height="550"></iframe></div><h2 id="meta-llms-and-grass-mud-horse"><a href="#meta-llms-and-grass-mud-horse"><!--[-->Meta, LLMs, and Grass Mud Horse<!--]--></a></h2><p><!--[-->In recent months I have been following the development of big open source AI projects. Two projects in particular are InvokeAI, an image generation tool based on Stable Diffusion, and <a href="https://ai.meta.com/llama/" rel="nofollow"><!--[-->LLaMA 2<!--]--></a>, the latest generation of Meta&#39;s open source LLM. The name LLaMA stands for &#39;Large Language Model Meta AI&#39;, which happens to be the same spelling as the word for the domesticated South American camelid: llama. Before going deeper into LLMs we need a quick Chinese lesson.<!--]--></p><p><!--[-->è‰æ³¥é©¬ is a non-technical word that referes to animals like Llama or Alpaca. It can be directly translated as &quot;Grass Mud Horse&quot; and it is phonetically similar to the most common Chinese profanity: æ“ä½ å¦ˆ, which literally means &quot;f*** your mother&quot;. The characters in these two words are nearly synonymous: the sounds of both words are &quot;cao ni ma&quot;, but the tones are different, which in Chinese changes the meaning completely. The llama is basically a legendary Chinese internet meme subversive in the face of government censorship. ğŸ¦™ was approved as part of Unicode 11.0 in 2018. The extended version of this profanity is è‰æ³¥é©¬æˆˆå£ (CÇonÃ­mÇ GÄ“bÃ¬: Grass Mud Horse Gobi), refering to the geographical origin of this mythical creature: the Gobi Dessert. This term is more explicit as it synonymous with &quot;f*** your mother&#39;s c***&quot;. Coincidentally, the Gobi Desert is a region of Inner Mongolia which borders the mountainous region of Greater Khingan Range (å¤§å…´å®‰å²­), the location of Red Coast and Radar Peak in Three-Body Problem where Ye Wenjie makes first contact with the Trisolarians.<!--]--></p><p><!--[-->I requested access to Meta&#39;s LLaMa 2 models as soon as they came out and I was able to get it to run on my NVIDIA RTX 4090 GPU. I also joined a subreddit called <a href="https://www.reddit.com/r/LocalLLaMA/" rel="nofollow"><!--[--><code><!--[-->r/LocalLLaMa<!--]--></code><!--]--></a> with over seventy thousand members discussing how to run large language models on consumer hardware. Another annoucement that caught my attention in July was the release of <a href="https://github.com/ymcui/Chinese-LLaMA-Alpaca-2" rel="nofollow"><!--[-->Chinese LLaMa 2<!--]--></a>, an open-source large language model trained on Chinese and English which does very well against Chinese Language LLM Benchmarks such as the CMMCU: Chinese Massive Multitask Language Understanding.<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="image of CMMLU" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/cmmlu.jpeg 1x, /_ipx/_/static/three-body-problem/cmmlu.jpeg 2x" src="/_ipx/_/static/three-body-problem/cmmlu.jpeg"><!--]--></p><h2 id="translation-in-and-of-the-three-body-problem"><a href="#translation-in-and-of-the-three-body-problem"><!--[-->Translation in and of The Three-Body Problem<!--]--></a></h2><p><!--[-->There are two important plot developments related to language translation in the Three-Body Problem novel, both of which involve bookâ€™s main female protagonist Ye Wenjie. First, copying the translation of Rachel Carson&#39;s &#39;Silent Spring&#39; leads to her being relegated to the Red Coast project. At the Red Coast Ye Wenjie communicates with extraterrestrial life through a universal translation technology developed by the top-secret project.<!--]--></p><p><!--[-->Ken Liuâ€™s translation of the Three-Body Problem book from Chinese to English places the events during the Cultural Revolution at the beginning of the book rather than in the middle of the book. According to Liu, this was done in order to avoid attention of government censors, and his original intention was to tell the story in this way, starting with the events of the late 1960&#39;s in China.<!--]--></p><p><!--[-->I tried translating the Chinese text of the Three-Body Problem book using LLMs. I started with the Chinese-LLaMA-2 model and then tried Qwen-7B-Chat, Baichuan-13B-Chat when these models came out. I found that the Qwen-7B-Chat model worked best for my translation tasks. Qwen is short for Qian Wen (åƒé—®, or &quot;one thousand questions&quot;) and is developed by Alibaba Cloud.<!--]--></p><p><!--[-->How do you get an LLM to translate text? Ultimately the quality of the translation returned by the LLM depends on the prompt and other parameters used for inference. I experimented with both chat and completion approaches and tried lots of different kinds of prompts. The models I worked with have a 4K context window (the number of tokens the model can take as input when generating responses), so for translation tasks I had the LLM work on one paragraph at a time. Here&#39;s the prompt I used with the Qwen-7B-Chat model:<!--]--></p><pre class="language-text"><!--[--><code>&quot;ä½ æ˜¯ä¸€åç¿»è¯‘ã€‚è¯·å°†æ¯æ¡æ¶ˆæ¯ä»ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡ã€‚&quot;
(You are a translator. Please translate each message from Chinese to English.)
</code><!--]--></pre><p><!--[-->I did some basic prompt engineering to get the LLM to translate the books in the Three-Body problem paragraph by paragraph. My computer was able to translate the first book overnight in under 500 minutes. Here are the results of my translation of Three-Body Problem with Qwen-7B-Chat model:<!--]--></p><iframe class="p-4" src="https://briancaffey.github.io/three-body-problem/reader/?book=three_body&amp;chapterNumber=1" width="100%" height="550"></iframe><p><!--[-->It was interesting to see the failure modes of translation tasks for the different models. Most of the time the LLM was able to provided accurate translations. Some of the failure modes I observed were:<!--]--></p><ul><!--[--><li><!--[-->a few Chinese characters would show up in the English translations<!--]--></li><li><!--[-->a complete Chinese sentence would show up in an otherwise complete translation of a paragraph<!--]--></li><li><!--[-->The LLM refused to translate certain paragraphs that included violent imagery, such as the violent scenes from the Cultural Revolution chapters<!--]--></li><li><!--[-->If the sentence it was asked to translate was a question, the LLM would respond in Chinese to the question rather than providing a translation of the question itself<!--]--></li><!--]--></ul><h3 id="tokenization"><a href="#tokenization"><!--[-->Tokenization<!--]--></a></h3><p><!--[-->When you feed a prompt to an LLM, it first puts the prompt through a process called tokenization. Tokenization takes a string of text and breaks it down into tokens (defined by the Large Language Model you are using). The process of tokenization is similar to the tokenization done by spaCy mentioned earlier. These tokens produced by LLM tokenization are numbers. Here&#39;s an example of tokenization in action using the Chinese-Llama-2 model:<!--]--></p><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sC2Qs">import</span><span class="sMOD_"> json
</span></span><span class="line" line="2"><span class="sC2Qs">import</span><span class="sMOD_"> os
</span></span><span class="line" line="3"><span class="sC2Qs">from</span><span class="sMOD_"> llama_cpp </span><span class="sC2Qs">import</span><span class="sMOD_"> Llama, LlamaTokenizer
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span class="sMOD_">llm </span><span class="sC2Qs">=</span><span class="sMOD_"> Llama(
</span></span><span class="line" line="6"><span class="sTHNf">    model_path</span><span class="sC2Qs">=</span><span class="sstjo">&quot;/path/to/models/ggml-model-q4_0.bin&quot;</span><span class="sMOD_">,
</span></span><span class="line" line="7"><span class="sTHNf">    n_ctx</span><span class="sC2Qs">=</span><span class="s7F3e">4096</span><span class="sMOD_">,
</span></span><span class="line" line="8"><span class="sTHNf">    n_gpu_layers</span><span class="sC2Qs">=</span><span class="s7F3e">30
</span></span><span class="line" line="9"><span class="sMOD_">)
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span class="sMOD_">tokenizer </span><span class="sC2Qs">=</span><span class="sMOD_"> LlamaTokenizer(</span><span class="sTHNf">llama</span><span class="sC2Qs">=</span><span class="sMOD_">llm)
</span></span><span class="line" line="12"><span emptylineplaceholder="true">
</span></span><span class="line" line="13"><span class="s7F3e">TEXT</span><span class="sC2Qs">=</span><span class="sstjo">&quot;åœ¨é‚£ä¸ªå·²è¢«å¿˜å´çš„æ—¥å­é‡Œï¼Œå®ƒçš„ä¸–ç•Œé¢ è¦†äº†ã€‚æ³¥åœŸé£èµ°ï¼Œå‡ºç°äº†ä¸€æ¡åˆæ·±åˆå®½çš„å³¡è°·ï¼Œç„¶åæ³¥åœŸåˆè½°éš†éš†åœ°é£å›æ¥ï¼Œå³¡è°·æ¶ˆå¤±äº†ï¼Œåœ¨åŸæ¥å³¡è°·çš„å°½å¤´å‡ºç°äº†ä¸€åº§é»‘è‰²çš„å­¤å³°ã€‚å…¶å®ï¼Œåœ¨è¿™ç‰‡å¹¿é˜”çš„ç–†åŸŸä¸Šï¼Œè¿™ç§äº‹å¸¸å¸¸å‘ç”Ÿï¼Œæ³¥åœŸé£èµ°åˆé£å›ï¼Œå³¡è°·å‡ºç°åˆæ¶ˆå¤±ï¼Œç„¶åæ˜¯å­¤å³°é™ä¸´ï¼Œå¥½åƒæ˜¯ç»™æ¯æ¬¡ç¾å˜æ‰“ä¸Šä¸€ä¸ªé†’ç›®çš„æ ‡è®°ã€‚è¤èšå’Œå‡ ç™¾ä¸ªåŒæ—å¸¦ç€å¹¸å­˜çš„èšåå‘å¤ªé˜³è½ä¸‹çš„æ–¹å‘èµ°äº†ä¸€æ®µè·¯ï¼Œå»ºç«‹äº†æ–°çš„å¸å›½ã€‚&quot;
</span></span><span class="line" line="14"><span class="sMOD_">tokens </span><span class="sC2Qs">=</span><span class="sMOD_"> tokenizer.encode(</span><span class="s7F3e">TEXT</span><span class="sMOD_">)
</span></span></code><!--]--></pre><pre class="language-text"><!--[--><code>print(str(tokens[:4]) + &quot; ...&quot;)
</code><!--]--></pre><blockquote><!--[--><p><!--[--><span>1, 30505, 32380, 36812</span> ...<!--]--></p><!--]--></blockquote><pre class="language-text"><!--[--><code>for token in tokens:
    text = tokenizer.decode([token])
    print(text, end=&quot; &quot;)
</code><!--]--></pre><blockquote><!--[--><p><!--[-->åœ¨ é‚£ä¸ª å·²è¢« å¿˜ å´ çš„æ—¥å­ é‡Œ ï¼Œ å®ƒçš„ ä¸–ç•Œ é¢ è¦† äº† ã€‚ æ³¥ åœŸ é£ èµ° ï¼Œ å‡ºç°äº† ä¸€æ¡ åˆ æ·± åˆ å®½ çš„ å³¡è°· ï¼Œ ç„¶å æ³¥ åœŸ åˆ è½° éš† éš† åœ° é£ å›æ¥ ï¼Œ å³¡è°· æ¶ˆå¤± äº† ï¼Œ åœ¨ åŸæ¥ å³¡è°· çš„ å°½å¤´ å‡ºç°äº† ä¸€åº§ é»‘è‰² çš„ å­¤ å³° ã€‚ å…¶å® ï¼Œ åœ¨è¿™ ç‰‡ å¹¿é˜” çš„ ç–† åŸŸ ä¸Š ï¼Œ è¿™ç§äº‹ å¸¸å¸¸ å‘ç”Ÿ ï¼Œ æ³¥ åœŸ é£ èµ° åˆ é£ å› ï¼Œ å³¡è°· å‡ºç° åˆ æ¶ˆå¤± ï¼Œ ç„¶å æ˜¯ å­¤ å³° é™ä¸´ ï¼Œ å¥½åƒæ˜¯ ç»™ æ¯æ¬¡ ç¾ å˜ æ‰“ ä¸Š ä¸€ä¸ª é†’ç›® çš„ æ ‡è®° ã€‚ è¤ èš å’Œ å‡ ç™¾ ä¸ª åŒ æ— å¸¦ç€ å¹¸ å­˜ çš„ èš å å‘ å¤ªé˜³ è½ ä¸‹çš„ æ–¹å‘ èµ°äº† ä¸€æ®µ è·¯ ï¼Œ å»ºç«‹äº† æ–°çš„ å¸å›½ ã€‚<!--]--></p><!--]--></blockquote><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sMOD_">english_text </span><span class="sC2Qs">=</span><span class="sstjo"> &quot;This is an example of tokenization using a large language model.&quot;
</span></span><span class="line" line="2"><span class="sMOD_">english_tokens </span><span class="sC2Qs">=</span><span class="sMOD_"> tokenizer.encode(english_text)
</span></span><span class="line" line="3"><span class="sTrkL">print</span><span class="sMOD_">(</span><span class="s-m8C">str</span><span class="sMOD_">(english_tokens[:</span><span class="s7F3e">4</span><span class="sMOD_">]) </span><span class="sC2Qs">+</span><span class="sstjo"> &quot; ...&quot;</span><span class="sMOD_">)
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span class="sC2Qs">for</span><span class="sMOD_"> token </span><span class="sC2Qs">in</span><span class="sMOD_"> english_tokens:
</span></span><span class="line" line="6"><span class="sMOD_">    text </span><span class="sC2Qs">=</span><span class="sMOD_"> tokenizer.decode([token])
</span></span><span class="line" line="7"><span class="sTrkL">    print</span><span class="sMOD_">(</span><span class="sq6CD">f</span><span class="sstjo">&quot;&#39;</span><span class="s7F3e">{</span><span class="sMOD_">text</span><span class="s7F3e">}</span><span class="sstjo">&#39;&quot;</span><span class="sMOD_">, </span><span class="sTHNf">end</span><span class="sC2Qs">=</span><span class="sstjo">&quot; &quot;</span><span class="sMOD_">)
</span></span></code><!--]--></pre><blockquote><!--[--><p><!--[--><span>1, 4013, 338, 385</span> ...<!--]--></p><!--]--></blockquote><blockquote><!--[--><p><!--[-->&#39;&#39; &#39;This&#39; &#39; is&#39; &#39; an&#39; &#39; example&#39; &#39; of&#39; &#39; token&#39; &#39;ization&#39; &#39; using&#39; &#39; a&#39; &#39; large&#39; &#39; language&#39; &#39; model&#39; &#39;.&#39;<!--]--></p><!--]--></blockquote><p><!--[-->Here are some key differences between English and Chinese that have implications for how the language is tokenized by large language models:<!--]--></p><ul><!--[--><li><!--[-->Chinese does not use spaces between words like English does<!--]--></li><li><!--[-->Chinese words are typically formed from 2 or more characters<!--]--></li><li><!--[-->Chinese verbs are not conjugated and do not have different tenses<!--]--></li><li><!--[-->Chinese words don&#39;t have singular and plural variants<!--]--></li><li><!--[-->Chinese grammar is very simple and is similar to English<!--]--></li><li><!--[-->Chinese characters do not have capitization like ASCII characters<!--]--></li><li><!--[-->The token represented by the number 1 encodes a starting token<!--]--></li><!--]--></ul><h2 id="imagining-scenes-from-three-body-problem-with-stable-diffusion"><a href="#imagining-scenes-from-three-body-problem-with-stable-diffusion"><!--[-->Imagining scenes from Three-Body Problem with Stable Diffusion<!--]--></a></h2><p><!--[-->Here are some images I generated using Stable Diffusion with InvokeAI that depict scenes from the Three-Body Problem book. These scenes portray solutions to the Three-Body Problem that players in the Three-Body game devised. The first is a Confucian system of etiquette for predicting the movement of the three suns. The second is a human-powered computer that Qin Shi Huang used to try to predict the movement of the three suns.<!--]--></p><blockquote><!--[--><p><!--[-->Prompt: Ceremonies and etiquette system related to the sun and multiple celestial++ bodies Confucius artistic style<!--]--></p><!--]--></blockquote><span></span><blockquote><!--[--><p><!--[-->array of chinese++ warriors++ on a electronics+ circuit+ board qing+ dynasty style art logic puzzle<!--]--></p><!--]--></blockquote><span></span><p><!--[-->Congrats to the InvokeAI team on the 3.0 release. It has been awesome to use and the current docker compose setup is a huge improvement on the 2.x version.<!--]--></p><h2 id="n-body-simulations-cuda-and-threejs"><a href="#n-body-simulations-cuda-and-threejs"><!--[-->n-body simulations, CUDA and Three.js<!--]--></a></h2><p><!--[-->The nbody problem has no closed-form analytical solution, but it is possible to do a basic simulation of the three-body problem on consumer hardware and open source software, like NVIDIA and CUDA.<!--]--></p><h3 id="three-body-cuda-simulation"><a href="#three-body-cuda-simulation"><!--[-->Three-Body CUDA simulation<!--]--></a></h3><p><!--[-->I wrote a simple program with the help of ChatGPT for running nbody problem simulations. The program uses CuPy, a Python library that exposes APIs for doing matrix multiplication to predict the position of three bodies using Euclidian Integration. Here&#39;s the script:<!--]--></p><pre class="language-py shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sC2Qs">import</span><span class="sMOD_"> numpy </span><span class="sC2Qs">as</span><span class="sMOD_"> np
</span></span><span class="line" line="2"><span class="sC2Qs">import</span><span class="sMOD_"> cupy </span><span class="sC2Qs">as</span><span class="sMOD_"> cp
</span></span><span class="line" line="3"><span class="sC2Qs">import</span><span class="sMOD_"> time
</span></span><span class="line" line="4"><span class="sC2Qs">import</span><span class="sMOD_"> json
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span class="s8-w5"># Simulation parameters
</span></span><span class="line" line="7"><span class="s7F3e">NUM_PARTICLES</span><span class="sC2Qs"> =</span><span class="s7F3e"> 3
</span></span><span class="line" line="8"><span class="s7F3e">DIMENSIONS</span><span class="sC2Qs"> =</span><span class="s7F3e"> 3</span><span class="s8-w5"> # 3D space
</span></span><span class="line" line="9"><span class="s7F3e">NUM_STEPS</span><span class="sC2Qs"> =</span><span class="s7F3e"> 30
</span></span><span class="line" line="10"><span class="s7F3e">DT</span><span class="sC2Qs"> =</span><span class="s7F3e"> 0.1
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span class="s8-w5"># Generate initial positions and velocities
</span></span><span class="line" line="13"><span class="sMOD_">np_positions </span><span class="sC2Qs">=</span><span class="sMOD_"> np.random.randn(</span><span class="s7F3e">NUM_PARTICLES</span><span class="sMOD_">, </span><span class="s7F3e">DIMENSIONS</span><span class="sMOD_">)
</span></span><span class="line" line="14"><span class="sMOD_">np_velocities </span><span class="sC2Qs">=</span><span class="sMOD_"> np.random.randn(</span><span class="s7F3e">NUM_PARTICLES</span><span class="sMOD_">, </span><span class="s7F3e">DIMENSIONS</span><span class="sMOD_">)
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span class="sMOD_">cp_positions </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.array(np_positions)
</span></span><span class="line" line="17"><span class="sMOD_">cp_velocities </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.array(np_velocities)
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span class="sMOD_">np_ticks </span><span class="sC2Qs">=</span><span class="sMOD_"> np.expand_dims(np_positions, </span><span class="sTHNf">axis</span><span class="sC2Qs">=</span><span class="s7F3e">0</span><span class="sMOD_">)
</span></span><span class="line" line="20"><span class="sMOD_">cp_ticks </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.array(np_ticks)
</span></span><span class="line" line="21"><span emptylineplaceholder="true">
</span></span><span class="line" line="22"><span class="s8-w5"># nbody simulation loop
</span></span><span class="line" line="23"><span class="sMOD_">start_time </span><span class="sC2Qs">=</span><span class="sMOD_"> time.time()
</span></span><span class="line" line="24"><span class="sC2Qs">for</span><span class="sMOD_"> step </span><span class="sC2Qs">in</span><span class="sTrkL"> range</span><span class="sMOD_">(</span><span class="s7F3e">NUM_STEPS</span><span class="sMOD_">):
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span class="s8-w5">    # this gets pairwise differences
</span></span><span class="line" line="27"><span class="sMOD_">    diff </span><span class="sC2Qs">=</span><span class="sMOD_"> cp_positions[:, </span><span class="s7F3e">None</span><span class="sMOD_">, :] </span><span class="sC2Qs">-</span><span class="sMOD_"> cp_positions[</span><span class="s7F3e">None</span><span class="sMOD_">, :, :]
</span></span><span class="line" line="28"><span class="sMOD_">    distances </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.sqrt(cp.sum(diff</span><span class="sC2Qs">**</span><span class="s7F3e">2</span><span class="sMOD_">, </span><span class="sTHNf">axis</span><span class="sC2Qs">=</span><span class="s7F3e">2</span><span class="sMOD_">))
</span></span><span class="line" line="29"><span emptylineplaceholder="true">
</span></span><span class="line" line="30"><span class="s8-w5">    # avoid division by zero
</span></span><span class="line" line="31"><span class="sMOD_">    epsilon </span><span class="sC2Qs">=</span><span class="s7F3e"> 1e-5
</span></span><span class="line" line="32"><span class="sMOD_">    inv_distances </span><span class="sC2Qs">=</span><span class="s7F3e"> 1.0</span><span class="sC2Qs"> /</span><span class="sMOD_"> cp.maximum(distances, epsilon)
</span></span><span class="line" line="33"><span emptylineplaceholder="true">
</span></span><span class="line" line="34"><span class="s8-w5">    # calculate forces
</span></span><span class="line" line="35"><span class="sMOD_">    cp_forces </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.sum((diff.T </span><span class="sC2Qs">*</span><span class="sMOD_"> inv_distances</span><span class="sC2Qs">**</span><span class="s7F3e">3</span><span class="sMOD_">).T, </span><span class="sTHNf">axis</span><span class="sC2Qs">=</span><span class="s7F3e">1</span><span class="sMOD_">)
</span></span><span class="line" line="36"><span emptylineplaceholder="true">
</span></span><span class="line" line="37"><span class="s8-w5">    # update velocities and positions
</span></span><span class="line" line="38"><span class="sMOD_">    cp_velocities </span><span class="sC2Qs">+=</span><span class="s7F3e"> DT</span><span class="sC2Qs"> *</span><span class="sMOD_"> cp_forces
</span></span><span class="line" line="39"><span class="sMOD_">    cp_positions </span><span class="sC2Qs">+=</span><span class="s7F3e"> DT</span><span class="sC2Qs"> *</span><span class="sMOD_"> cp_velocities
</span></span><span class="line" line="40"><span class="sMOD_">    cp_ticks </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.append(cp_ticks, cp.expand_dims(cp_positions, </span><span class="s7F3e">0</span><span class="sMOD_">), </span><span class="s7F3e">0</span><span class="sMOD_">)
</span></span><span class="line" line="41"><span emptylineplaceholder="true">
</span></span><span class="line" line="42"><span class="sMOD_">sim_time </span><span class="sC2Qs">=</span><span class="sMOD_"> time.time() </span><span class="sC2Qs">-</span><span class="sMOD_"> start_time
</span></span><span class="line" line="43"><span class="sTrkL">print</span><span class="sMOD_">(</span><span class="sstjo">&quot;Simulation time:&quot;</span><span class="sMOD_">, sim_time)
</span></span><span class="line" line="44"><span emptylineplaceholder="true">
</span></span><span class="line" line="45"><span emptylineplaceholder="true">
</span></span><span class="line" line="46"><span class="sq6CD">class</span><span class="sz2Vg"> NumpyArrayEncoder</span><span class="sMOD_">(</span><span class="s30JN">json</span><span class="sMOD_">.</span><span class="s30JN">JSONEncoder</span><span class="sMOD_">):
</span></span><span class="line" line="47"><span class="sq6CD">    def</span><span class="srTi1"> default</span><span class="sMOD_">(</span><span class="so59x">self</span><span class="sMOD_">, </span><span class="so59x">obj</span><span class="sMOD_">):
</span></span><span class="line" line="48"><span class="sC2Qs">        if</span><span class="sTrkL"> isinstance</span><span class="sMOD_">(obj, np.ndarray):
</span></span><span class="line" line="49"><span class="sC2Qs">            return</span><span class="sMOD_"> obj.tolist()
</span></span><span class="line" line="50"><span class="sC2Qs">        return</span><span class="sMOD_"> json.JSONEncoder.default(</span><span class="sP7S_">self</span><span class="sMOD_">, obj)
</span></span><span class="line" line="51"><span emptylineplaceholder="true">
</span></span><span class="line" line="52"><span emptylineplaceholder="true">
</span></span><span class="line" line="53"><span class="sMOD_">np_ticks </span><span class="sC2Qs">=</span><span class="sMOD_"> cp_ticks.get()
</span></span><span class="line" line="54"><span emptylineplaceholder="true">
</span></span><span class="line" line="55"><span emptylineplaceholder="true">
</span></span><span class="line" line="56"><span class="s8-w5"># this is data we can work with in python and write to a file
</span></span><span class="line" line="57"><span class="sC2Qs">with</span><span class="sTrkL"> open</span><span class="sMOD_">(</span><span class="sstjo">&quot;ticks.json&quot;</span><span class="sMOD_">, </span><span class="sstjo">&quot;w&quot;</span><span class="sMOD_">) </span><span class="sC2Qs">as</span><span class="sMOD_"> f:
</span></span><span class="line" line="58"><span class="sMOD_">    f.write(json.dumps(np_ticks, </span><span class="sTHNf">cls</span><span class="sC2Qs">=</span><span class="sMOD_">NumpyArrayEncoder))
</span></span></code><!--]--></pre><p><!--[-->To better understand the matrix math here I walked through a simple example of what each step does:<!--]--></p><pre class="language-py shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="s8-w5"># particle coordinates (x,y,z) in 3D space
</span></span><span class="line" line="2"><span class="sMOD_">positions </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.array([[</span><span class="s7F3e">1</span><span class="sMOD_">,</span><span class="s7F3e">2.5</span><span class="sMOD_">,</span><span class="s7F3e">3</span><span class="sMOD_">], [</span><span class="s7F3e">4</span><span class="sMOD_">,</span><span class="s7F3e">5</span><span class="sMOD_">,</span><span class="s7F3e">6</span><span class="sMOD_">], [</span><span class="s7F3e">7</span><span class="sMOD_">,</span><span class="s7F3e">8</span><span class="sMOD_">,</span><span class="s7F3e">9</span><span class="sMOD_">]])
</span></span></code><!--]--></pre><p><!--[-->The first operation creates an array for pairwise distances for each dimension:<!--]--></p><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sMOD_">diff </span><span class="sC2Qs">=</span><span class="sMOD_"> positions[</span><span class="s7F3e">None</span><span class="sMOD_">, :, :] </span><span class="sC2Qs">-</span><span class="sMOD_"> positions[:, </span><span class="s7F3e">None</span><span class="sMOD_">, :]
</span></span><span class="line" line="2"><span class="sTrkL">print</span><span class="sMOD_">(diff)
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="sMOD_">array([[[ </span><span class="s7F3e">0</span><span class="sMOD_">. ,  </span><span class="s7F3e">0</span><span class="sMOD_">. ,  </span><span class="s7F3e">0</span><span class="sMOD_">. ],
</span></span><span class="line" line="5"><span class="sMOD_">        [ </span><span class="s7F3e">3</span><span class="sMOD_">. ,  </span><span class="s7F3e">2.5</span><span class="sMOD_">,  </span><span class="s7F3e">3</span><span class="sMOD_">. ],
</span></span><span class="line" line="6"><span class="sMOD_">        [ </span><span class="s7F3e">6</span><span class="sMOD_">. ,  </span><span class="s7F3e">5.5</span><span class="sMOD_">,  </span><span class="s7F3e">6</span><span class="sMOD_">. ]],
</span></span><span class="line" line="7"><span emptylineplaceholder="true">
</span></span><span class="line" line="8"><span class="sMOD_">       [[</span><span class="sC2Qs">-</span><span class="s7F3e">3</span><span class="sMOD_">. , </span><span class="sC2Qs">-</span><span class="s7F3e">2.5</span><span class="sMOD_">, </span><span class="sC2Qs">-</span><span class="s7F3e">3</span><span class="sMOD_">. ],
</span></span><span class="line" line="9"><span class="sMOD_">        [ </span><span class="s7F3e">0</span><span class="sMOD_">. ,  </span><span class="s7F3e">0</span><span class="sMOD_">. ,  </span><span class="s7F3e">0</span><span class="sMOD_">. ],
</span></span><span class="line" line="10"><span class="sMOD_">        [ </span><span class="s7F3e">3</span><span class="sMOD_">. ,  </span><span class="s7F3e">3</span><span class="sMOD_">. ,  </span><span class="s7F3e">3</span><span class="sMOD_">. ]],
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span class="sMOD_">       [[</span><span class="sC2Qs">-</span><span class="s7F3e">6</span><span class="sMOD_">. , </span><span class="sC2Qs">-</span><span class="s7F3e">5.5</span><span class="sMOD_">, </span><span class="sC2Qs">-</span><span class="s7F3e">6</span><span class="sMOD_">. ],
</span></span><span class="line" line="13"><span class="sMOD_">        [</span><span class="sC2Qs">-</span><span class="s7F3e">3</span><span class="sMOD_">. , </span><span class="sC2Qs">-</span><span class="s7F3e">3</span><span class="sMOD_">. , </span><span class="sC2Qs">-</span><span class="s7F3e">3</span><span class="sMOD_">. ],
</span></span><span class="line" line="14"><span class="sMOD_">        [ </span><span class="s7F3e">0</span><span class="sMOD_">. ,  </span><span class="s7F3e">0</span><span class="sMOD_">. ,  </span><span class="s7F3e">0</span><span class="sMOD_">. ]]])
</span></span></code><!--]--></pre><p><!--[-->The rows of zeros correspond to a particle&#39;s <code><!--[-->x<!--]--></code>, <code><!--[-->y<!--]--></code> and <code><!--[-->z<!--]--></code> distances to itself, which are all zero by axioms of Euclidian vector spaces.<!--]--></p><p><!--[-->The next operation calculates the distance between each particle:<!--]--></p><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sMOD_">distances </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.sqrt(cp.sum(diff</span><span class="sC2Qs">**</span><span class="s7F3e">2</span><span class="sMOD_">, </span><span class="sTHNf">axis</span><span class="sC2Qs">=</span><span class="s7F3e">2</span><span class="sMOD_">))
</span></span><span class="line" line="2"><span class="sTrkL">print</span><span class="sMOD_">(distances)
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span class="sMOD_">array([[ </span><span class="s7F3e">0</span><span class="sMOD_">.        ,  </span><span class="s7F3e">4.9244289</span><span class="sMOD_"> , </span><span class="s7F3e">10.11187421</span><span class="sMOD_">],
</span></span><span class="line" line="5"><span class="sMOD_">       [ </span><span class="s7F3e">4.9244289</span><span class="sMOD_"> ,  </span><span class="s7F3e">0</span><span class="sMOD_">.        ,  </span><span class="s7F3e">5.19615242</span><span class="sMOD_">],
</span></span><span class="line" line="6"><span class="sMOD_">       [</span><span class="s7F3e">10.11187421</span><span class="sMOD_">,  </span><span class="s7F3e">5.19615242</span><span class="sMOD_">,  </span><span class="s7F3e">0</span><span class="sMOD_">.        ]])
</span></span></code><!--]--></pre><p><!--[-->The diagonal or zeros represents that fact that a particle <code><!--[-->n<!--]--></code> has a distance of zero to iself.<!--]--></p><p><!--[-->The next step calculates inverse distances and uses a small <code><!--[-->epsilon<!--]--></code> value to avoid division by 0:<!--]--></p><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sMOD_">epsilon </span><span class="sC2Qs">=</span><span class="s7F3e"> 1e-5
</span></span><span class="line" line="2"><span class="sMOD_">inv_distances </span><span class="sC2Qs">=</span><span class="s7F3e"> 1.0</span><span class="sC2Qs"> /</span><span class="sMOD_"> cp.maximum(distances, epsilon)
</span></span><span class="line" line="3"><span class="sTrkL">print</span><span class="sMOD_">(inv_distances)
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span class="sMOD_">array([[</span><span class="s7F3e">1.00000000e+05</span><span class="sMOD_">, </span><span class="s7F3e">2.03069233e-01</span><span class="sMOD_">, </span><span class="s7F3e">9.88936353e-02</span><span class="sMOD_">],
</span></span><span class="line" line="6"><span class="sMOD_">       [</span><span class="s7F3e">2.03069233e-01</span><span class="sMOD_">, </span><span class="s7F3e">1.00000000e+05</span><span class="sMOD_">, </span><span class="s7F3e">1.92450090e-01</span><span class="sMOD_">],
</span></span><span class="line" line="7"><span class="sMOD_">       [</span><span class="s7F3e">9.88936353e-02</span><span class="sMOD_">, </span><span class="s7F3e">1.92450090e-01</span><span class="sMOD_">, </span><span class="s7F3e">1.00000000e+05</span><span class="sMOD_">]])
</span></span></code><!--]--></pre><p><!--[-->The next step is the most elegant part of the simulation and really flexes the GPU&#39;s parallel compute capabilities:<!--]--></p><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="sMOD_">cp_forces </span><span class="sC2Qs">=</span><span class="sMOD_"> cp.sum((diff.T </span><span class="sC2Qs">*</span><span class="sMOD_"> inv_distances</span><span class="sC2Qs">**</span><span class="s7F3e">3</span><span class="sMOD_">).T, </span><span class="sTHNf">axis</span><span class="sC2Qs">=</span><span class="s7F3e">1</span><span class="sMOD_">)
</span></span></code><!--]--></pre><p><!--[-->The <code><!--[-->.T<!--]--></code> operation transposes a matrix, multiplies by the cube of inverse distances, then transposes the matrix again before summing along the first axis. Transposing a matrix basically swaps rows and columns.<!--]--></p><p><!--[-->The next two steps are also pretty elegant:<!--]--></p><pre class="language-python shiki shiki-themes github-light github-dark monokai" style=""><!--[--><code><span class="line" line="1"><span class="s8-w5"># update velocities and positions
</span></span><span class="line" line="2"><span class="sMOD_">cp_velocities </span><span class="sC2Qs">+=</span><span class="s7F3e"> DT</span><span class="sC2Qs"> *</span><span class="sMOD_"> cp_forces
</span></span><span class="line" line="3"><span class="sMOD_">cp_positions </span><span class="sC2Qs">+=</span><span class="s7F3e"> DT</span><span class="sC2Qs"> *</span><span class="sMOD_"> cp_velocities
</span></span></code><!--]--></pre><p><!--[-->In the last step I append the updated positions to an array that holds every &quot;tick&quot; (the positions of each particle between each time interval, <code><!--[-->DT<!--]--></code> - &quot;delta time&quot;)<!--]--></p><p><!--[-->Here&#39;s the formula for the mathematical equation used to calculate the force on any given body in an n-body system:<!--]--></p><iframe src="https://briancaffey.github.io/three-body-problem/iframe/formula.html" width="100%" height="110"></iframe><p><!--[-->To test that the simulation was working correctly I used ChatGPT again to construct a 3D scene in Blender with a Python script:<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Blender Animation" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/blender.png 1x, /_ipx/_/static/three-body-problem/blender.png 2x" src="/_ipx/_/static/three-body-problem/blender.png"><!--]--></p><h3 id="threejs"><a href="#threejs"><!--[-->Three.js<!--]--></a></h3><p><!--[-->Imagine that we are working for a Chinese startup called the Qin Dynasty. The founder, Qin Shi Huang, is a brutal tyrant with an obsessive fear of assassination. Let&#39;s put on our product hat for a minute and think about how we can impress him with a clean solution to the three-body problem. A recent attempt involved building a 30,000-person analog computer that was destroyed in tri-solar syzygy. Failing to accurately predict the movement of the suns could mean execution by live-burial, a fiery death or worse. Using CUDA and Blender is a good MVP but doesn&#39;t make for the best technical demo since it involves so many different steps: running the simulation in CUDA, exporting data to JSON, loading data into a visualuzation and then finally rendering a video of the simulation. With a popular Javascript library called Three.js we can run an interactive three-body problem simulation in real-time right in the browser. Here&#39;s the three-body simulation I also co-authored with ChatGPT-4 using Three.js:<!--]--></p><iframe src="https://briancaffey.github.io/three-body-problem/three/" width="100%" height="350"></iframe><h2 id="screen-adaptations-the-gaming-industry-and-the-ccp"><a href="#screen-adaptations-the-gaming-industry-and-the-ccp"><!--[-->Screen adaptations, the gaming industry and the CCP<!--]--></a></h2><p><!--[-->Dream of the Red Chamber is one of China&#39;s Four Great Classical Novels and is often seen as the pinacle of Chinese fiction. It was written in the mid 18th century and first published in 1791. It is a long saga that totals 960,000 characters in length, on similar scale to the length of the Three-Body Problem trilogy. Sun Wen, a Qing dynasty artist, spent 36 years of his life doing a series of 230 paintings depicting scenes from the Dream of the Red Chamber: dream sequences, demons, goddesses, nuns, nobles, beggars, raging fires, landscapes, interiors, wildlife, gardens, temples, funerals, battles, processions, banquets, trials, operas, marriages.<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Sun Wen paintings sample" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/dorc.png 1x, /_ipx/_/static/three-body-problem/dorc.png 2x" src="/_ipx/_/static/three-body-problem/dorc.png"><!--]--></p><p><!--[-->Following in this tradition of celebrating great literature, Tencent Video and China Central Television produced a 30-episode adaptation of the Three-Body Problem that was released in Feburary 2023. It is a surprisingly faithful reproduction of the book that is worth checking out. The portrayal of Shi Qiang (Da Shi) was easily my favorite part of the series. I was also impressed by how the Three-Body VR game scenes were done with computer graphics. It got me thinking about how China is represented in some of the worlds most popular video games.<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="games" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/game.png 1x, /_ipx/_/static/three-body-problem/game.png 2x" src="/_ipx/_/static/three-body-problem/game.png"><!--]--></p><p><!--[-->This is Rocket League, a competitive vehicular soccer game where players, like in the Three-Body game, must master the laws of gravity. The Chinese-themed Forbiden Temple arena shown here is one of many virtual international venues in the game. Epic Games (creator of Fortnite) bought Rocket League in 2019 for an estimated $250 to $300 million.<!--]--></p><p><!--[-->Like Rocket League, Overwatch is a highly-competitive eSport on a global scale. It features a large roster of 38 players from all over the world. Dr. Mei-Ling Zhou (å‘¨ç¾çµ) is a Chinese climatologist who uses ice both to attack opponents and to defend herself. Mei became controversial in China due to her adoption as a symbolic figure in the 2019 Hong Kong protests.<!--]--></p><p><!--[-->Three college friends combined their interest in anime, comics and games (ACG) and literature to publish one of the most successful games created by a Chinese company and arguably one of China&#39;s most important cultural exports: Genshin Impact. miHoYo, the Shanghai-based company that develops Genshin Impact, grossed $4 billion of revenue globally in the game&#39;s first year setting a new record in the gaming industry. Like other companies of its size, miHoYo has a party committee under the Chinese Communist Party that influences the company&#39;s operations.<!--]--></p><h2 id="ai-and-layoffs-in-the-tech-industry"><a href="#ai-and-layoffs-in-the-tech-industry"><!--[-->AI and layoffs in the tech industry<!--]--></a></h2><p><!--[-->I have a positive attitude toward AI and its ability to supercharge the creative work we do, but I also think that replacing humans and AI-related layoffs should should be a part of the conversation. I wasn&#39;t impacted by the recent round of layoffs at my company, and I&#39;m grateful to have the opportunity to work with a talented team on interesting problems in the health tech industry. I do have some solid references for folks in DevOps, product and backend and frontend engineering, and Iâ€™m happy to <a href="https://www.linkedin.com/in/brian-caffey-06b22a18/" rel="nofollow"><!--[-->connect and share via LinkedIn<!--]--></a>.<!--]--></p><p><!--[-->Layoffs in both China and the U.S. have been pummled the tech sector over the last two years. New graduates in China are also facing a difficult job market. There are some popular expressions that paint a picture of the job market in China:<!--]--></p><ul><!--[--><li><!--[-->èººå¹³ Lying flat: avoiding relentless work<!--]--></li><li><!--[-->ä¹ä¹å…­ 996 Work culture: describes working from 9AM to 9PM, 6 days a week, a common work schedule for many Chinese employees<!--]--></li><li><!--[-->å…¨èŒå„¿å¥³ Full-time Children: <a href="https://www.cnn.com/2023/07/26/economy/china-youth-unemployment-intl-hnk/index.html" rel="nofollow"><!--[-->Young Chinese are getting paid to be â€˜full-time childrenâ€™ as jobs become harder to find<!--]--></a><!--]--></li><li><!--[-->35å²è¯…å’’ The curse of 35: <a href="https://www.marketplace.org/shows/marketplace-tech/chinas-tech-workers-ageism-the-curse-of-35/" rel="nofollow"><!--[-->Ageism in Chinaâ€™s tech sector has workers fearing the â€œcurse of 35â€<!--]--></a>. Shout out to my fellow Year of the Dragon 35 year olds! ğŸ²<!--]--></li><li><!--[-->åƒè‹¦ Eat Bitterness: <a href="https://www.nytimes.com/2023/05/30/business/china-youth-unemployment.html" rel="nofollow"><!--[-->Chinaâ€™s Young People Canâ€™t Find Jobs. Xi Jinping Says to â€˜Eat Bitterness.â€™<!--]--></a><!--]--></li><!--]--></ul><p><!--[-->It is an exciting time for AI. Elon Musk and Kaifu Lee have both recently released open-source large language models: Grok and Yi. Sam Altman was fired as CEO of OpenAI, then came back. Stable Diffusion just released a text to video model. AGI might already be here. In the U.S., we are going into our first presidential election cycle with AI fully turned on. Here&#39;s a <a href="https://www.amazon.com/Three-Body-Problem-Cixin-Liu/dp/0765382032" rel="nofollow"><!--[-->link to The Three-Body Problem book on Amazon<!--]--></a>. Thanks for reading and Happy Thanksgiving!<!--]--></p><p><!--[--><img onerror="this.setAttribute(&#39;data-error&#39;, 1)" alt="Happy Thanksgiving" data-nuxt-img srcset="/_ipx/_/static/three-body-problem/thanksgiving.png 1x, /_ipx/_/static/three-body-problem/thanksgiving.png 2x" src="/_ipx/_/static/three-body-problem/thanksgiving.png"><!--]--></p><style>html pre.shiki code .sC2Qs, html code.shiki .sC2Qs{--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672}html pre.shiki code .sMOD_, html code.shiki .sMOD_{--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html pre.shiki code .sTHNf, html code.shiki .sTHNf{--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}html pre.shiki code .sstjo, html code.shiki .sstjo{--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .s7F3e, html code.shiki .s7F3e{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html pre.shiki code .sTrkL, html code.shiki .sTrkL{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF}html pre.shiki code .s-m8C, html code.shiki .s-m8C{--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}html pre.shiki code .sq6CD, html code.shiki .sq6CD{--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}html pre.shiki code .s8-w5, html code.shiki .s8-w5{--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F}html pre.shiki code .sz2Vg, html code.shiki .sz2Vg{--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline}html pre.shiki code .s30JN, html code.shiki .s30JN{--shiki-default:#6F42C1;--shiki-default-font-style:inherit;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-font-style:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-font-style:italic;--shiki-sepia-text-decoration:underline}html pre.shiki code .srTi1, html code.shiki .srTi1{--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E}html pre.shiki code .so59x, html code.shiki .so59x{--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}html pre.shiki code .sP7S_, html code.shiki .sP7S_{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F}</style></div><div class="text-center pb-4 pt-8"><button class="mc-btn rounded py-1 px-2"> Show Disqus Comments ğŸ’¬ </button></div><!----><h1></h1></div></article><!--]--><div class="mx-auto max-w-6xl p-4 lg:px-16 text-center"><hr class="mt-4"><div class="align-center py-4"><div class="pb-4">Join my mailing list to get updated whenever I publish a new article.</div><div class="flex align-center justify-center"><div id="mc_embed_signup" class="w-full md:w-1/2 flex-shrink justify-center"><form id="mc-embedded-subscribe-form" action="https://github.us2.list-manage.com/subscribe/post?u=43a795784ca963e25903a0da6&amp;id=9937fe4fc5" method="post" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate><div id="mc_embed_signup_scroll" class="grid grid-cols-1 sm:grid-cols-2 gap-4"><input id="mce-EMAIL" type="email" value="" name="EMAIL" placeholder="Enter your email address" class="rounded mc text-center" autocomplete="on"><div style="position:absolute;left:-5000px;" aria-hidden="true"><input type="text" name="b_43a795784ca963e25903a0da6_9937fe4fc5" tabindex="-1" value=""></div><div class="text-right" style="width:100%;"><input id="mc-embedded-subscribe" type="submit" value="Subscribe" name="subscribe" class="mc-btn rounded px-2 py-1 w-full"></div></div></form></div></div></div><hr><div class="py-4">Thanks for checking out my site!</div><div class="pb-4"> Â© 2025 Brian Caffey </div></div></div></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem/_payload.json?f7a02a46-9c0e-478e-936c-d4b79733d6b2">[{"state":1,"once":18,"_errors":19,"serverRendered":5,"path":21,"pinia":22,"prerenderedAt":23},["Reactive",2],{"$scolor-mode":3,"$si18n:cached-locale-configs":7,"$si18n:resolved-locale":8,"$ssite-config":9},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,{},"",{"_priority":10,"currentLocale":14,"defaultLocale":14,"env":15,"name":16,"url":17},{"name":11,"env":12,"url":11,"defaultLocale":13,"currentLocale":13},-3,-15,-2,"en-US","production","briancaffey.github.io","https://briancaffey.github.io",["Set"],["ShallowReactive",20],{"python-vue-chinese-llama-2-and-the-three-body-problem":-1},"/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem",{},1757463791028]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{url:"https://briancaffey.github.io",content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},gtag:{enabled:true,initMode:"auto",id:"G-S8TVBBMW66",initCommands:[],config:{},tags:[],loadingStrategy:"defer",url:"https://www.googletagmanager.com/gtag/js"},i18n:{baseUrl:"",defaultLocale:"en",rootRedirect:"",redirectStatusCode:302,skipSettingLocaleOnNavigate:false,locales:[{code:"en",emoji:"flag-us",iso:"en-US",name:"English",flag:"ğŸ‡ºğŸ‡¸",language:"en-US",_hreflang:"en-US",_sitemap:"en-US"},{code:"fr",emoji:"flag-fr",iso:"fr-FR",name:"FranÃ§ais",flag:"ğŸ‡«ğŸ‡·",language:"fr-FR",_hreflang:"fr-FR",_sitemap:"fr-FR"},{code:"zh",emoji:"flag-cn",iso:"zh-ZH",name:"ç®€ä½“ä¸­æ–‡",flag:"ğŸ‡¨ğŸ‡³",language:"zh-ZH",_hreflang:"zh-ZH",_sitemap:"zh-ZH"},{code:"ru",emoji:"flag-ru",iso:"ru-RU",name:"Ğ ÑƒÑÑĞºĞ¸Ğ¹",flag:"ğŸ‡·ğŸ‡º",language:"ru-RU",_hreflang:"ru-RU",_sitemap:"ru-RU"},{code:"ja",emoji:"flag-jp",iso:"ja-JP",name:"æ—¥æœ¬èª",flag:"ğŸ‡¯ğŸ‡µ",language:"ja-JP",_hreflang:"ja-JP",_sitemap:"ja-JP"},{code:"in",emoji:"flag-in",iso:"hi-IN",name:"à¤¹à¤¿à¤‚à¤¦à¥€",flag:"ğŸ‡®ğŸ‡³",language:"hi-IN",_hreflang:"hi-IN",_sitemap:"hi-IN"}],detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",typedPages:true,typedOptionsAndMessages:false,alternateLinkCanonicalQueries:true,devCache:false,cacheLifetime:"",stripMessagesPayload:false,preload:false,strictSeo:false,nitroContextDetection:true},domainLocales:{en:{domain:""},fr:{domain:""},zh:{domain:""},ru:{domain:""},ja:{domain:""},in:{domain:""}}}},app:{baseURL:"/",buildId:"f7a02a46-9c0e-478e-936c-d4b79733d6b2",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>