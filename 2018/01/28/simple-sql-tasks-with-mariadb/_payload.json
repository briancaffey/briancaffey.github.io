[{"data":1,"prerenderedAt":648},["ShallowReactive",2],{"simple-sql-tasks-with-mariadb":3},{"id":4,"title":5,"body":6,"comments":632,"date":633,"description":12,"draft":634,"extension":635,"external":636,"image":637,"meta":638,"navigation":632,"path":641,"seo":642,"stem":643,"tags":644,"__hash__":647},"blog/2018/01/28/simple-sql-tasks-with-mariadb.md","How to do simple SQL tasks with MariaDB",{"type":7,"value":8,"toc":623},"minimark",[9,13,16,26,31,34,37,50,57,69,74,85,89,97,107,116,119,125,131,137,152,156,163,169,172,178,185,191,194,199,201,306,312,316,318,490,496,500,502,602,608,611,616,619],[10,11,12],"p",{},"In this article I'll look at another interview takehome assignment. This assignment included SQL, python and some logic puzzles. If you read to the end I'll share a fun \"trick question\" that was also included.",[10,14,15],{},"I mostly want to talk about the SQL portion of the test. Since I mostly work with postgresql through the Django ORM, this was a good refresher. I'll show how I approached some simple SQL tasks, and how to use MariaDB.",[17,18,19],"blockquote",{},[10,20,21,25],{},[22,23,24],"strong",{},"MariaDB"," is the default implementation of MySQL in Arch Linux, provided with the mariadb package.",[27,28,30],"h2",{"id":29},"the-task","The Task",[10,32,33],{},"Here are the three questions I was asked:",[10,35,36],{},"Please reference the 3 tables below.",[38,39,40,44,47],"ol",{},[41,42,43],"li",{},"Using SQL please write the code to generate a table that includes all individuals on the file and contains the following fields: ID, Congressional District, and Gender",[41,45,46],{},"Using SQL please write the code to generate a table that includes only individuals with a gender on file that have a DistrictID of 3. Also please convert the values for Gender from “M” and “F” to “Male” and “Female” respectively. Your final table should include only ID and the converted Gender.",[41,48,49],{},"Using SQL please generate the code to run a count of gender by Congressional District.",[10,51,52],{},[53,54],"img",{"alt":55,"src":56},"png","/static/sql.png",[58,59,60,63,66],"ul",{},[41,61,62],{},"ID is a unique ID that is applied to each individual on file",[41,64,65],{},"DistrictID is a unique ID that is applied to each district on file",[41,67,68],{},"Gender is a value that is recorded on some records on file",[70,71,73],"h3",{"id":72},"install-mysqlmariadb","Install MySQL/MariaDB",[10,75,76,77,84],{},"First, we need to install MariaDB. As usual, just ",[78,79,83],"a",{"href":80,"rel":81},"https://wiki.archlinux.org/index.php/MySQL",[82],"nofollow","follow the Arch Wiki",".",[70,86,88],{"id":87},"run-mysql","Run mysql",[10,90,91,92,96],{},"Next, we can run ",[93,94,95],"code",{},"mysql"," in the terminal:",[98,99,104],"pre",{"className":100,"code":102,"language":103},[101],"language-text"," $ mysql\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 18\nServer version: 10.1.30-MariaDB MariaDB Server\n\nCopyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n","text",[93,105,102],{"__ignoreMap":106},"",[70,108,110,111,115],{"id":109},"create-and-set-a-database-to-use","Create ",[112,113,114],"em",{},"and set"," a database to use",[10,117,118],{},"The next step is to create a database. We can do the following:",[98,120,123],{"className":121,"code":122,"language":103},[101],"MariaDB [(none)]> create database sample_db default character set utf8 default collate utf8_bin;\nERROR 1044 (42000): Access denied for user ''@'localhost' to database 'sample_db'\nMariaDB [(none)]> Ctrl-C -- exit!\nAborted\n",[93,124,122],{"__ignoreMap":106},[10,126,127,128,130],{},"If you see this error, it is because we aren't using the correct user for SQL. We can use the default root user with no password instead. So here we will rerun the ",[93,129,95],{}," command with additional arguments:",[98,132,135],{"className":133,"code":134,"language":103},[101]," $ mysql -u root\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 19\nServer version: 10.1.30-MariaDB MariaDB Server\n\nCopyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]> create database sample_db default character set utf8 default collate utf8_bin;\nQuery OK, 1 row affected (0.01 sec)\n\nMariaDB [(none)]> use sample_db\nDatabase changed\nMariaDB [sample_db]>\n",[93,136,134],{"__ignoreMap":106},[10,138,139,140,143,144,147,148,151],{},"Great, no we are using the blank database called ",[93,141,142],{},"sample_db"," and we are using it, notice that ",[93,145,146],{},"[sample_db]>"," has repaced ",[93,149,150],{},"[(none)]>"," in the MariaDB prompt.",[70,153,155],{"id":154},"create-tables-and-insert-data-into-the-tables","Create tables and insert data into the tables",[10,157,158,159,162],{},"Now we are read to get going with our questions. Before we write our queries, we need to get the data from the question into our database. To do this I wrote ",[93,160,161],{},"insert.sql"," and ran it in MariaDB. Here is the script:",[98,164,167],{"className":165,"code":166,"language":103},[101],"CREATE TABLE table_A (\n  ID int,\n  District_ID int\n  );\n\nCREATE TABLE table_B (\n  District_ID int,\n  Congressional_District int\n  );\n\nCREATE TABLE table_C (\n  ID int,\n  Gender CHAR(1)\n  );\n\nINSERT INTO table_A (ID, District_ID) VALUES ('1', '3');\nINSERT INTO table_A (ID, District_ID) VALUES ('2', '3');\nINSERT INTO table_A (ID, District_ID) VALUES ('3', '4');\nINSERT INTO table_A (ID, District_ID) VALUES ('4', '4');\nINSERT INTO table_A (ID, District_ID) VALUES ('5', '3');\nINSERT INTO table_A (ID, District_ID) VALUES ('6', '4');\nINSERT INTO table_A (ID, District_ID) VALUES ('7', '4');\nINSERT INTO table_A (ID, District_ID) VALUES ('8', '3');\nINSERT INTO table_A (ID, District_ID) VALUES ('9', '4');\nINSERT INTO table_A (ID, District_ID) VALUES ('10', '3');\n\nINSERT INTO table_B (District_ID, Congressional_District) VALUES ('1', '8');\nINSERT INTO table_B (District_ID, Congressional_District) VALUES ('2', '2');\nINSERT INTO table_B (District_ID, Congressional_District) VALUES ('3', '14');\nINSERT INTO table_B (District_ID, Congressional_District) VALUES ('4', '7');\nINSERT INTO table_B (District_ID, Congressional_District) VALUES ('5', '11');\n\nINSERT INTO table_C (ID, Gender) VALUES ('1', 'M');\nINSERT INTO table_C (ID, Gender) VALUES ('3', 'F');\nINSERT INTO table_C (ID, Gender) VALUES ('4', 'M');\nINSERT INTO table_C (ID, Gender) VALUES ('5', 'F');\nINSERT INTO table_C (ID, Gender) VALUES ('6', 'F');\nINSERT INTO table_C (ID, Gender) VALUES ('7', 'F');\nINSERT INTO table_C (ID, Gender) VALUES ('8', 'M');\nINSERT INTO table_C (ID, Gender) VALUES ('9', 'F');\nINSERT INTO table_C (ID, Gender) VALUES ('10', 'M');\n",[93,168,166],{"__ignoreMap":106},[10,170,171],{},"Now we can run the script with the following command:",[98,173,176],{"className":174,"code":175,"language":103},[101],"MariaDB [sample_db]> source my_sql_script.sql\nQuery OK, 0 rows affected (0.08 sec)\n\nQuery OK, 0 rows affected (0.07 sec)\n\nQuery OK, 0 rows affected (0.06 sec)\n\nQuery OK, 1 row affected (0.02 sec)\n\nQuery OK, 1 row affected (0.00 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.03 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.00 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.02 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nQuery OK, 1 row affected (0.01 sec)\n\nMariaDB [sample_db]>\n",[93,177,175],{"__ignoreMap":106},[10,179,180,181,184],{},"Great, now let's test it out with a simple ",[93,182,183],{},"select * from table_name"," command:",[98,186,189],{"className":187,"code":188,"language":103},[101],"MariaDB [sample_db]> select * from table_A;\n+------+-------------+\n| ID   | District_ID |\n+------+-------------+\n|    1 |           3 |\n|    2 |           3 |\n|    3 |           4 |\n|    4 |           4 |\n|    5 |           3 |\n|    6 |           4 |\n|    7 |           4 |\n|    8 |           3 |\n|    9 |           4 |\n|   10 |           3 |\n+------+-------------+\n10 rows in set (0.00 sec)\n",[93,190,188],{"__ignoreMap":106},[10,192,193],{},"This matches what we were given, so now let's move on to the first task, creating one table from the three we are given.",[195,196,198],"h4",{"id":197},"_1","1",[10,200,43],{},[98,202,206],{"className":203,"code":204,"language":205,"meta":106,"style":106},"language-sql shiki shiki-themes github-light github-dark monokai","select table_A.ID, Congressional_District, Gender\nfrom table_A\n  left join table_B\n    on table_A.District_ID = table_B.District_ID\n  left join table_C\n    on table_A.ID = table_C.ID order by ID;\n","sql",[93,207,208,230,239,248,272,280],{"__ignoreMap":106},[209,210,213,217,221,224,227],"span",{"class":211,"line":212},"line",1,[209,214,216],{"class":215},"sC2Qs","select",[209,218,220],{"class":219},"s7F3e"," table_A",[209,222,84],{"class":223},"sMOD_",[209,225,226],{"class":219},"ID",[209,228,229],{"class":223},", Congressional_District, Gender\n",[209,231,233,236],{"class":211,"line":232},2,[209,234,235],{"class":215},"from",[209,237,238],{"class":223}," table_A\n",[209,240,242,245],{"class":211,"line":241},3,[209,243,244],{"class":215},"  left join",[209,246,247],{"class":223}," table_B\n",[209,249,251,254,256,258,261,264,267,269],{"class":211,"line":250},4,[209,252,253],{"class":215},"    on",[209,255,220],{"class":219},[209,257,84],{"class":223},[209,259,260],{"class":219},"District_ID",[209,262,263],{"class":215}," =",[209,265,266],{"class":219}," table_B",[209,268,84],{"class":223},[209,270,271],{"class":219},"District_ID\n",[209,273,275,277],{"class":211,"line":274},5,[209,276,244],{"class":215},[209,278,279],{"class":223}," table_C\n",[209,281,283,285,287,289,291,293,296,298,300,303],{"class":211,"line":282},6,[209,284,253],{"class":215},[209,286,220],{"class":219},[209,288,84],{"class":223},[209,290,226],{"class":219},[209,292,263],{"class":215},[209,294,295],{"class":219}," table_C",[209,297,84],{"class":223},[209,299,226],{"class":219},[209,301,302],{"class":215}," order by",[209,304,305],{"class":223}," ID;\n",[98,307,310],{"className":308,"code":309,"language":103},[101],"+------+------------------------+--------+\n| ID   | Congressional_District | Gender |\n+------+------------------------+--------+\n|    1 |                     14 | M      |\n|    2 |                     14 | NULL   |\n|    3 |                      7 | F      |\n|    4 |                      7 | M      |\n|    5 |                     14 | F      |\n|    6 |                      7 | F      |\n|    7 |                      7 | F      |\n|    8 |                     14 | M      |\n|    9 |                      7 | F      |\n|   10 |                     14 | M      |\n+------+------------------------+--------+\n10 rows in set (0.00 sec)\n",[93,311,309],{"__ignoreMap":106},[195,313,315],{"id":314},"_2","2",[10,317,46],{},[98,319,321],{"className":203,"code":320,"language":205,"meta":106,"style":106},"select\n  table_A.ID,\n  case\n    when Gender = \"M\" then \"Male\"\n    when Gender = \"F\" then \"Female\"\n  end as Gender\nfrom table_A\n  left join table_B\n    on table_A.District_ID = table_B.District_ID\n  left join table_C on table_A.ID = table_C.ID\nwhere table_A.District_ID = 3 and table_C.Gender is not null\norder by ID;\n",[93,322,323,328,340,345,366,382,393,400,407,426,452,482],{"__ignoreMap":106},[209,324,325],{"class":211,"line":212},[209,326,327],{"class":215},"select\n",[209,329,330,333,335,337],{"class":211,"line":232},[209,331,332],{"class":219},"  table_A",[209,334,84],{"class":223},[209,336,226],{"class":219},[209,338,339],{"class":223},",\n",[209,341,342],{"class":211,"line":241},[209,343,344],{"class":215},"  case\n",[209,346,347,350,353,356,360,363],{"class":211,"line":250},[209,348,349],{"class":215},"    when",[209,351,352],{"class":223}," Gender ",[209,354,355],{"class":215},"=",[209,357,359],{"class":358},"sstjo"," \"M\"",[209,361,362],{"class":215}," then",[209,364,365],{"class":358}," \"Male\"\n",[209,367,368,370,372,374,377,379],{"class":211,"line":274},[209,369,349],{"class":215},[209,371,352],{"class":223},[209,373,355],{"class":215},[209,375,376],{"class":358}," \"F\"",[209,378,362],{"class":215},[209,380,381],{"class":358}," \"Female\"\n",[209,383,384,387,390],{"class":211,"line":282},[209,385,386],{"class":215},"  end",[209,388,389],{"class":215}," as",[209,391,392],{"class":223}," Gender\n",[209,394,396,398],{"class":211,"line":395},7,[209,397,235],{"class":215},[209,399,238],{"class":223},[209,401,403,405],{"class":211,"line":402},8,[209,404,244],{"class":215},[209,406,247],{"class":223},[209,408,410,412,414,416,418,420,422,424],{"class":211,"line":409},9,[209,411,253],{"class":215},[209,413,220],{"class":219},[209,415,84],{"class":223},[209,417,260],{"class":219},[209,419,263],{"class":215},[209,421,266],{"class":219},[209,423,84],{"class":223},[209,425,271],{"class":219},[209,427,429,431,434,437,439,441,443,445,447,449],{"class":211,"line":428},10,[209,430,244],{"class":215},[209,432,433],{"class":223}," table_C ",[209,435,436],{"class":215},"on",[209,438,220],{"class":219},[209,440,84],{"class":223},[209,442,226],{"class":219},[209,444,263],{"class":215},[209,446,295],{"class":219},[209,448,84],{"class":223},[209,450,451],{"class":219},"ID\n",[209,453,455,458,460,462,464,466,469,472,474,476,479],{"class":211,"line":454},11,[209,456,457],{"class":215},"where",[209,459,220],{"class":219},[209,461,84],{"class":223},[209,463,260],{"class":219},[209,465,263],{"class":215},[209,467,468],{"class":219}," 3",[209,470,471],{"class":215}," and",[209,473,295],{"class":219},[209,475,84],{"class":223},[209,477,478],{"class":219},"Gender",[209,480,481],{"class":215}," is not null\n",[209,483,485,488],{"class":211,"line":484},12,[209,486,487],{"class":215},"order by",[209,489,305],{"class":223},[98,491,494],{"className":492,"code":493,"language":103},[101],"+------+--------+\n| ID   | Gender |\n+------+--------+\n|    1 | Male   |\n|    5 | Female |\n|    8 | Male   |\n|   10 | Male   |\n+------+--------+\n4 rows in set (0.00 sec)\n",[93,495,493],{"__ignoreMap":106},[195,497,499],{"id":498},"_3","3",[10,501,49],{},[98,503,505],{"className":203,"code":504,"language":205,"meta":106,"style":106},"select\n  count(table_C.Gender) Count,\n  Congressional_District,\n  Gender\nfrom table_A\n  left join table_B\n    on table_A.District_ID = table_B.District_ID\n  left join table_C\n    on table_A.ID = table_C.ID\ngroup by Congressional_District, Gender;\n",[93,506,507,511,530,535,540,546,552,570,576,594],{"__ignoreMap":106},[209,508,509],{"class":211,"line":212},[209,510,327],{"class":215},[209,512,513,517,520,523,525,527],{"class":211,"line":232},[209,514,516],{"class":515},"sTrkL","  count",[209,518,519],{"class":223},"(",[209,521,522],{"class":219},"table_C",[209,524,84],{"class":223},[209,526,478],{"class":219},[209,528,529],{"class":223},") Count,\n",[209,531,532],{"class":211,"line":241},[209,533,534],{"class":223},"  Congressional_District,\n",[209,536,537],{"class":211,"line":250},[209,538,539],{"class":223},"  Gender\n",[209,541,542,544],{"class":211,"line":274},[209,543,235],{"class":215},[209,545,238],{"class":223},[209,547,548,550],{"class":211,"line":282},[209,549,244],{"class":215},[209,551,247],{"class":223},[209,553,554,556,558,560,562,564,566,568],{"class":211,"line":395},[209,555,253],{"class":215},[209,557,220],{"class":219},[209,559,84],{"class":223},[209,561,260],{"class":219},[209,563,263],{"class":215},[209,565,266],{"class":219},[209,567,84],{"class":223},[209,569,271],{"class":219},[209,571,572,574],{"class":211,"line":402},[209,573,244],{"class":215},[209,575,279],{"class":223},[209,577,578,580,582,584,586,588,590,592],{"class":211,"line":409},[209,579,253],{"class":215},[209,581,220],{"class":219},[209,583,84],{"class":223},[209,585,226],{"class":219},[209,587,263],{"class":215},[209,589,295],{"class":219},[209,591,84],{"class":223},[209,593,451],{"class":219},[209,595,596,599],{"class":211,"line":428},[209,597,598],{"class":215},"group by",[209,600,601],{"class":223}," Congressional_District, Gender;\n",[98,603,606],{"className":604,"code":605,"language":103},[101],"+-------+------------------------+--------+\n| Count | Congressional_District | Gender |\n+-------+------------------------+--------+\n|     4 |                      7 | F      |\n|     1 |                      7 | M      |\n|     0 |                     14 | NULL   |\n|     1 |                     14 | F      |\n|     3 |                     14 | M      |\n+-------+------------------------+--------+\n5 rows in set (0.00 sec)\n",[93,607,605],{"__ignoreMap":106},[10,609,610],{},"That's it for the three SQL tasks. Here's the bonus question:",[17,612,613],{},[10,614,615],{},"Assume there are 6,000,000,000 (6 billion) people on Earth. What would you estimate to be the result, if you multiply together the number of fingers on every person's left-hands? (For the purposes of this exercise, thumbs count as fingers.)",[10,617,618],{},"Think about it for a minute. I have hidden my answer at the end of the URL for this article.",[620,621,622],"style",{},"html pre.shiki code .sC2Qs, html code.shiki .sC2Qs{--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672}html pre.shiki code .s7F3e, html code.shiki .s7F3e{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html pre.shiki code .sMOD_, html code.shiki .sMOD_{--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html pre.shiki code .sstjo, html code.shiki .sstjo{--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .sTrkL, html code.shiki .sTrkL{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF}",{"title":106,"searchDepth":232,"depth":232,"links":624},[625],{"id":29,"depth":232,"text":30,"children":626},[627,628,629,631],{"id":72,"depth":241,"text":73},{"id":87,"depth":241,"text":88},{"id":109,"depth":241,"text":630},"Create and set a database to use",{"id":154,"depth":241,"text":155},true,"2018-01-28",false,"md",null,"/static/mariadb.png",{"layout":639,"permalink":640},"post","/2018/01/28/how-to-do-simple-sql-tasks-with-mariadb-0","/2018/01/28/simple-sql-tasks-with-mariadb",{"title":5,"description":12},"2018/01/28/simple-sql-tasks-with-mariadb",[645,205,646],"maria-db","databases","5Djrn-JBuWs6_wh7SRAS-EBpA3NkzX9X4t0YTz9q_n4",1753141015085]