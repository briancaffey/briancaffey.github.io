[{"data":1,"prerenderedAt":1535},["ShallowReactive",2],{"reading-13f-sec-filings-with-python":3},{"id":4,"title":5,"body":6,"comments":497,"date":1519,"description":1520,"draft":1521,"extension":1522,"external":1523,"image":1524,"meta":1525,"navigation":497,"path":1527,"seo":1528,"stem":1529,"tags":1530,"__hash__":1534},"blog/2018/01/30/reading-13f-sec-filings-with-python.md","Reading 13F SEC filings with python",{"type":7,"value":8,"toc":1516},"minimark",[9,23,49,60,63,72,82,90,101,104,172,180,183,519,522,673,680,685,688,929,940,1264,1267,1273,1279,1282,1507,1512],[10,11,12,16,17,22],"p",{},[13,14,15],"strong",{},"Update",": This project has been updated, please see ",[18,19,21],"a",{"href":20},"/2020/11/29/weekend-project-update-open-sec-data","this article"," to read about the most recent updates.",[24,25,26,35,42],"ul",{},[27,28,29,34],"li",{},[18,30,31],{"href":31,"rel":32},"https://opensecdata.ga",[33],"nofollow"," (project staging website, deployed to docker swarm cluster running on DigitalOcean)",[27,36,37,41],{},[18,38,39],{"href":39,"rel":40},"https://gitlab.com/briancaffey/sec-filings-app",[33]," (main repository, requires GitLab account)",[27,43,44,48],{},[18,45,46],{"href":46,"rel":47},"https://github.com/briancaffey/sec-filings-app",[33]," (mirror, no account required to view)",[50,51,52],"blockquote",{},[10,53,54,55],{},"The SEC Form 13F is a filing with the Securities and Exchange Commission (SEC) also known as the Information Required of Institutional Investment Managers Form. It is a quarterly filing required of institutional investment managers with over $100 million in qualifying assets. -",[18,56,59],{"href":57,"rel":58},"https://www.investopedia.com/terms/f/form-13f.asp",[33],"Investopedia",[10,61,62],{},"In this article I will show how to collect and parse 13F filing data from the SEC.",[10,64,65,66,71],{},"First, use ",[18,67,70],{"href":68,"rel":69},"https://www.sec.gov/edgar/searchedgar/companysearch.html",[33],"EDGAR"," to search the company of interest.",[50,73,74],{},[10,75,76,77],{},"EDGAR, the Electronic Data Gathering, Analysis, and Retrieval system, performs automated collection, validation, indexing, acceptance, and forwarding of submissions by companies and others who are required by law to file forms with the U.S. Securities and Exchange Commission (the \"SEC\"). -",[18,78,81],{"href":79,"rel":80},"https://en.wikipedia.org/wiki/EDGAR",[33],"Wikipedia",[10,83,84,85,89],{},"Click on the Central Index Key (CIK) of the company you are search for, and then click on ",[86,87,88],"code",{},"Documents",".",[10,91,92,93,96,97,100],{},"You'll want to grab the HTML version of the ",[86,94,95],{},"Information Table",". I have saved them in a folder with their file names cooresponding to their dates (",[86,98,99],{},"YYYY-MM-DD"," format).",[10,102,103],{},"For this example, I have manually collected the files for a few years of data filed by a hedge fund. Here are the files I'll be working with:",[105,106,111],"pre",{"className":107,"code":108,"language":109,"meta":110,"style":110},"language-python shiki shiki-themes github-light github-dark monokai","files = os.listdir(\"13f/\")\nprint(*sorted(files), sep=\"\\n\")\n","python","",[86,112,113,136],{"__ignoreMap":110},[114,115,118,122,126,129,133],"span",{"class":116,"line":117},"line",1,[114,119,121],{"class":120},"sMOD_","files ",[114,123,125],{"class":124},"sC2Qs","=",[114,127,128],{"class":120}," os.listdir(",[114,130,132],{"class":131},"sstjo","\"13f/\"",[114,134,135],{"class":120},")\n",[114,137,139,143,146,149,152,155,159,161,164,168,170],{"class":116,"line":138},2,[114,140,142],{"class":141},"sTrkL","print",[114,144,145],{"class":120},"(",[114,147,148],{"class":124},"*",[114,150,151],{"class":141},"sorted",[114,153,154],{"class":120},"(files), ",[114,156,158],{"class":157},"sTHNf","sep",[114,160,125],{"class":124},[114,162,163],{"class":131},"\"",[114,165,167],{"class":166},"s7F3e","\\n",[114,169,163],{"class":131},[114,171,135],{"class":120},[105,173,178],{"className":174,"code":176,"language":177},[175],"language-text","2014-02-14.html\n2014-05-15.html\n2014-08-14.html\n2014-11-14.html\n2015-02-17.html\n2015-05-14.html\n2015-08-14.html\n2015-11-12.html\n2016-02-16.html\n2016-05-16.html\n2016-08-12.html\n2016-11-14.html\n2017-02-14.html\n2017-05-15.html\n2017-08-10.html\n2017-10-30.html\n","text",[86,179,176],{"__ignoreMap":110},[10,181,182],{},"Here's a quick script we can use to parse information from each filing document:",[105,184,186],{"className":107,"code":185,"language":109,"meta":110,"style":110},"def scrape_13f(file):\n    date = file\n    html = open(\"13f/\"+file).read()\n    soup = BeautifulSoup(html, 'lxml')\n    rows = soup.find_all('tr')[11:]\n    positions = []\n    for row in rows:\n        dic = {}\n        position = row.find_all('td')\n        dic[\"NAME_OF_ISSUER\"] = position[0].text\n        dic[\"TITLE_OF_CLASS\"] = position[1].text\n        dic[\"CUSIP\"] = position[2].text\n        dic[\"VALUE\"] = int(position[3].text.replace(',', ''))*1000\n        dic[\"SHARES\"] = int(position[4].text.replace(',', ''))\n        dic[\"DATE\"] = date.strip(\".html\")\n        positions.append(dic)\n\n    df = pd.DataFrame(positions)\n    return df\n",[86,187,188,207,218,241,257,280,291,306,317,333,356,375,394,436,466,486,492,499,510],{"__ignoreMap":110},[114,189,190,194,198,200,204],{"class":116,"line":117},[114,191,193],{"class":192},"sq6CD","def",[114,195,197],{"class":196},"srTi1"," scrape_13f",[114,199,145],{"class":120},[114,201,203],{"class":202},"so59x","file",[114,205,206],{"class":120},"):\n",[114,208,209,212,214],{"class":116,"line":138},[114,210,211],{"class":120},"    date ",[114,213,125],{"class":124},[114,215,217],{"class":216},"sOrwc"," file\n",[114,219,221,224,226,229,231,233,236,238],{"class":116,"line":220},3,[114,222,223],{"class":120},"    html ",[114,225,125],{"class":124},[114,227,228],{"class":141}," open",[114,230,145],{"class":120},[114,232,132],{"class":131},[114,234,235],{"class":124},"+",[114,237,203],{"class":216},[114,239,240],{"class":120},").read()\n",[114,242,244,247,249,252,255],{"class":116,"line":243},4,[114,245,246],{"class":120},"    soup ",[114,248,125],{"class":124},[114,250,251],{"class":120}," BeautifulSoup(html, ",[114,253,254],{"class":131},"'lxml'",[114,256,135],{"class":120},[114,258,260,263,265,268,271,274,277],{"class":116,"line":259},5,[114,261,262],{"class":120},"    rows ",[114,264,125],{"class":124},[114,266,267],{"class":120}," soup.find_all(",[114,269,270],{"class":131},"'tr'",[114,272,273],{"class":120},")[",[114,275,276],{"class":166},"11",[114,278,279],{"class":120},":]\n",[114,281,283,286,288],{"class":116,"line":282},6,[114,284,285],{"class":120},"    positions ",[114,287,125],{"class":124},[114,289,290],{"class":120}," []\n",[114,292,294,297,300,303],{"class":116,"line":293},7,[114,295,296],{"class":124},"    for",[114,298,299],{"class":120}," row ",[114,301,302],{"class":124},"in",[114,304,305],{"class":120}," rows:\n",[114,307,309,312,314],{"class":116,"line":308},8,[114,310,311],{"class":120},"        dic ",[114,313,125],{"class":124},[114,315,316],{"class":120}," {}\n",[114,318,320,323,325,328,331],{"class":116,"line":319},9,[114,321,322],{"class":120},"        position ",[114,324,125],{"class":124},[114,326,327],{"class":120}," row.find_all(",[114,329,330],{"class":131},"'td'",[114,332,135],{"class":120},[114,334,336,339,342,345,347,350,353],{"class":116,"line":335},10,[114,337,338],{"class":120},"        dic[",[114,340,341],{"class":131},"\"NAME_OF_ISSUER\"",[114,343,344],{"class":120},"] ",[114,346,125],{"class":124},[114,348,349],{"class":120}," position[",[114,351,352],{"class":166},"0",[114,354,355],{"class":120},"].text\n",[114,357,359,361,364,366,368,370,373],{"class":116,"line":358},11,[114,360,338],{"class":120},[114,362,363],{"class":131},"\"TITLE_OF_CLASS\"",[114,365,344],{"class":120},[114,367,125],{"class":124},[114,369,349],{"class":120},[114,371,372],{"class":166},"1",[114,374,355],{"class":120},[114,376,378,380,383,385,387,389,392],{"class":116,"line":377},12,[114,379,338],{"class":120},[114,381,382],{"class":131},"\"CUSIP\"",[114,384,344],{"class":120},[114,386,125],{"class":124},[114,388,349],{"class":120},[114,390,391],{"class":166},"2",[114,393,355],{"class":120},[114,395,397,399,402,404,406,410,413,416,419,422,425,428,431,433],{"class":116,"line":396},13,[114,398,338],{"class":120},[114,400,401],{"class":131},"\"VALUE\"",[114,403,344],{"class":120},[114,405,125],{"class":124},[114,407,409],{"class":408},"s-m8C"," int",[114,411,412],{"class":120},"(position[",[114,414,415],{"class":166},"3",[114,417,418],{"class":120},"].text.replace(",[114,420,421],{"class":131},"','",[114,423,424],{"class":120},", ",[114,426,427],{"class":131},"''",[114,429,430],{"class":120},"))",[114,432,148],{"class":124},[114,434,435],{"class":166},"1000\n",[114,437,439,441,444,446,448,450,452,455,457,459,461,463],{"class":116,"line":438},14,[114,440,338],{"class":120},[114,442,443],{"class":131},"\"SHARES\"",[114,445,344],{"class":120},[114,447,125],{"class":124},[114,449,409],{"class":408},[114,451,412],{"class":120},[114,453,454],{"class":166},"4",[114,456,418],{"class":120},[114,458,421],{"class":131},[114,460,424],{"class":120},[114,462,427],{"class":131},[114,464,465],{"class":120},"))\n",[114,467,469,471,474,476,478,481,484],{"class":116,"line":468},15,[114,470,338],{"class":120},[114,472,473],{"class":131},"\"DATE\"",[114,475,344],{"class":120},[114,477,125],{"class":124},[114,479,480],{"class":120}," date.strip(",[114,482,483],{"class":131},"\".html\"",[114,485,135],{"class":120},[114,487,489],{"class":116,"line":488},16,[114,490,491],{"class":120},"        positions.append(dic)\n",[114,493,495],{"class":116,"line":494},17,[114,496,498],{"emptyLinePlaceholder":497},true,"\n",[114,500,502,505,507],{"class":116,"line":501},18,[114,503,504],{"class":120},"    df ",[114,506,125],{"class":124},[114,508,509],{"class":120}," pd.DataFrame(positions)\n",[114,511,513,516],{"class":116,"line":512},19,[114,514,515],{"class":124},"    return",[114,517,518],{"class":120}," df\n",[10,520,521],{},"Using this function we can get a quick snapshot of this hedge fund by filing total over the last 4 years:",[105,523,525],{"className":107,"code":524,"language":109,"meta":110,"style":110},"fund_growth = [sum(scrape_13f(file).VALUE) for file in sorted(files)]\ndates = [f.strip('.html') for f in sorted(files)]\nplt.figure(figsize=(10,5))\nplt.title('Total Fund Size')\nplt.xlabel('Filing Date')\nplt.ylabel('USD')\nplt.bar(dates, fund_growth)\nplt.yticks()\nplt.xticks(rotation='vertical')\n",[86,526,527,569,595,618,628,638,648,653,658],{"__ignoreMap":110},[114,528,529,532,534,537,540,543,545,548,551,554,557,560,563,566],{"class":116,"line":117},[114,530,531],{"class":120},"fund_growth ",[114,533,125],{"class":124},[114,535,536],{"class":120}," [",[114,538,539],{"class":141},"sum",[114,541,542],{"class":120},"(scrape_13f(",[114,544,203],{"class":216},[114,546,547],{"class":120},").",[114,549,550],{"class":166},"VALUE",[114,552,553],{"class":120},") ",[114,555,556],{"class":124},"for",[114,558,559],{"class":216}," file",[114,561,562],{"class":124}," in",[114,564,565],{"class":141}," sorted",[114,567,568],{"class":120},"(files)]\n",[114,570,571,574,576,579,582,584,586,589,591,593],{"class":116,"line":138},[114,572,573],{"class":120},"dates ",[114,575,125],{"class":124},[114,577,578],{"class":120}," [f.strip(",[114,580,581],{"class":131},"'.html'",[114,583,553],{"class":120},[114,585,556],{"class":124},[114,587,588],{"class":120}," f ",[114,590,302],{"class":124},[114,592,565],{"class":141},[114,594,568],{"class":120},[114,596,597,600,603,605,607,610,613,616],{"class":116,"line":220},[114,598,599],{"class":120},"plt.figure(",[114,601,602],{"class":157},"figsize",[114,604,125],{"class":124},[114,606,145],{"class":120},[114,608,609],{"class":166},"10",[114,611,612],{"class":120},",",[114,614,615],{"class":166},"5",[114,617,465],{"class":120},[114,619,620,623,626],{"class":116,"line":243},[114,621,622],{"class":120},"plt.title(",[114,624,625],{"class":131},"'Total Fund Size'",[114,627,135],{"class":120},[114,629,630,633,636],{"class":116,"line":259},[114,631,632],{"class":120},"plt.xlabel(",[114,634,635],{"class":131},"'Filing Date'",[114,637,135],{"class":120},[114,639,640,643,646],{"class":116,"line":282},[114,641,642],{"class":120},"plt.ylabel(",[114,644,645],{"class":131},"'USD'",[114,647,135],{"class":120},[114,649,650],{"class":116,"line":293},[114,651,652],{"class":120},"plt.bar(dates, fund_growth)\n",[114,654,655],{"class":116,"line":308},[114,656,657],{"class":120},"plt.yticks()\n",[114,659,660,663,666,668,671],{"class":116,"line":319},[114,661,662],{"class":120},"plt.xticks(",[114,664,665],{"class":157},"rotation",[114,667,125],{"class":124},[114,669,670],{"class":131},"'vertical'",[114,672,135],{"class":120},[10,674,675],{},[676,677],"img",{"alt":678,"src":679},"png","/static/sec/fund_size.png",[681,682,684],"h2",{"id":683},"fund-positions-with-bubble-chart","Fund Positions with Bubble Chart",[10,686,687],{},"Next, it would be great to get a snapshot of the stocks owned by this fund in a given year. Let's use a D3 bubble chart. The names for each stock are quite long, so first let's convert them to stock ticker values. Here's a quick script I hacked together using a Fidelity lookup service:",[105,689,691],{"className":107,"code":690,"language":109,"meta":110,"style":110},"cusip_nums = set()\nfor file in files:\n    cusip_nums = cusip_nums | set(scrape_13f(file).CUSIP)\n\nticker_dic = {c:\"\" for c in cusip_nums}\nfor c in list(ticker_dic.keys()):\n    url = \"http://quotes.fidelity.com/mmnet/SymLookup.phtml?reqforlookup=REQUESTFORLOOKUP&productid=mmnet&isLoggedIn=mmnet&rows=50&for=stock&by=cusip&criteria=\"+c+\"&submit=Search\"\n    html = requests.get(url).text\n    soup = BeautifulSoup(html, 'lxml')\n    ticker_elem = soup.find('tr', attrs={\"bgcolor\":\"#666666\"})\n    ticker = \"\"\n    try:\n        ticker = ticker_elem.next_sibling.next_sibling.find('a').text\n        ticker_dic[c] = ticker\n    except:\n        pass\n\n    time.sleep(1)\n",[86,692,693,706,717,743,747,771,785,805,814,826,860,870,878,894,904,911,916,920],{"__ignoreMap":110},[114,694,695,698,700,703],{"class":116,"line":117},[114,696,697],{"class":120},"cusip_nums ",[114,699,125],{"class":124},[114,701,702],{"class":408}," set",[114,704,705],{"class":120},"()\n",[114,707,708,710,712,714],{"class":116,"line":138},[114,709,556],{"class":124},[114,711,559],{"class":216},[114,713,562],{"class":124},[114,715,716],{"class":120}," files:\n",[114,718,719,722,724,727,730,732,734,736,738,741],{"class":116,"line":220},[114,720,721],{"class":120},"    cusip_nums ",[114,723,125],{"class":124},[114,725,726],{"class":120}," cusip_nums ",[114,728,729],{"class":124},"|",[114,731,702],{"class":408},[114,733,542],{"class":120},[114,735,203],{"class":216},[114,737,547],{"class":120},[114,739,740],{"class":166},"CUSIP",[114,742,135],{"class":120},[114,744,745],{"class":116,"line":243},[114,746,498],{"emptyLinePlaceholder":497},[114,748,749,752,754,757,760,763,766,768],{"class":116,"line":259},[114,750,751],{"class":120},"ticker_dic ",[114,753,125],{"class":124},[114,755,756],{"class":120}," {c:",[114,758,759],{"class":131},"\"\"",[114,761,762],{"class":124}," for",[114,764,765],{"class":120}," c ",[114,767,302],{"class":124},[114,769,770],{"class":120}," cusip_nums}\n",[114,772,773,775,777,779,782],{"class":116,"line":282},[114,774,556],{"class":124},[114,776,765],{"class":120},[114,778,302],{"class":124},[114,780,781],{"class":408}," list",[114,783,784],{"class":120},"(ticker_dic.keys()):\n",[114,786,787,790,792,795,797,800,802],{"class":116,"line":293},[114,788,789],{"class":120},"    url ",[114,791,125],{"class":124},[114,793,794],{"class":131}," \"http://quotes.fidelity.com/mmnet/SymLookup.phtml?reqforlookup=REQUESTFORLOOKUP&productid=mmnet&isLoggedIn=mmnet&rows=50&for=stock&by=cusip&criteria=\"",[114,796,235],{"class":124},[114,798,799],{"class":120},"c",[114,801,235],{"class":124},[114,803,804],{"class":131},"\"&submit=Search\"\n",[114,806,807,809,811],{"class":116,"line":308},[114,808,223],{"class":120},[114,810,125],{"class":124},[114,812,813],{"class":120}," requests.get(url).text\n",[114,815,816,818,820,822,824],{"class":116,"line":319},[114,817,246],{"class":120},[114,819,125],{"class":124},[114,821,251],{"class":120},[114,823,254],{"class":131},[114,825,135],{"class":120},[114,827,828,831,833,836,838,840,843,845,848,851,854,857],{"class":116,"line":335},[114,829,830],{"class":120},"    ticker_elem ",[114,832,125],{"class":124},[114,834,835],{"class":120}," soup.find(",[114,837,270],{"class":131},[114,839,424],{"class":120},[114,841,842],{"class":157},"attrs",[114,844,125],{"class":124},[114,846,847],{"class":120},"{",[114,849,850],{"class":131},"\"bgcolor\"",[114,852,853],{"class":120},":",[114,855,856],{"class":131},"\"#666666\"",[114,858,859],{"class":120},"})\n",[114,861,862,865,867],{"class":116,"line":358},[114,863,864],{"class":120},"    ticker ",[114,866,125],{"class":124},[114,868,869],{"class":131}," \"\"\n",[114,871,872,875],{"class":116,"line":377},[114,873,874],{"class":124},"    try",[114,876,877],{"class":120},":\n",[114,879,880,883,885,888,891],{"class":116,"line":396},[114,881,882],{"class":120},"        ticker ",[114,884,125],{"class":124},[114,886,887],{"class":120}," ticker_elem.next_sibling.next_sibling.find(",[114,889,890],{"class":131},"'a'",[114,892,893],{"class":120},").text\n",[114,895,896,899,901],{"class":116,"line":438},[114,897,898],{"class":120},"        ticker_dic[c] ",[114,900,125],{"class":124},[114,902,903],{"class":120}," ticker\n",[114,905,906,909],{"class":116,"line":468},[114,907,908],{"class":124},"    except",[114,910,877],{"class":120},[114,912,913],{"class":116,"line":488},[114,914,915],{"class":124},"        pass\n",[114,917,918],{"class":116,"line":494},[114,919,498],{"emptyLinePlaceholder":497},[114,921,922,925,927],{"class":116,"line":501},[114,923,924],{"class":120},"    time.sleep(",[114,926,372],{"class":166},[114,928,135],{"class":120},[10,930,931,932,935,936,939],{},"I couldn't get all the CUSIP numbers, but I was able to get most of them. Some of the CUSIP numbers have changed for certain stocks and couldn't be looked up with this service. For now I won't fill these in. With the ",[86,933,934],{},"ticker_dic"," dictionary, we can make a quick edit to our ",[86,937,938],{},"scrape_13f"," function to populate ticker data for each holding:",[105,941,943],{"className":107,"code":942,"language":109,"meta":110,"style":110},"ticker_dict = {'00206R102': 'T', '00507V109': 'ATVI', '00724F101': 'ADBE', ... }\n\ndef scrape_13f(file):\n    date = file\n    html = open(\"13f/\"+file).read()\n    soup = BeautifulSoup(html, 'lxml')\n    rows = soup.find_all('tr')[11:]\n    positions = []\n    for row in rows:\n        dic = {}\n        position = row.find_all('td')\n        dic[\"NAME_OF_ISSUER\"] = position[0].text\n        dic[\"TITLE_OF_CLASS\"] = position[1].text\n        dic[\"CUSIP\"] = position[2].text\n        dic[\"VALUE\"] = int(position[3].text.replace(',', ''))*1000\n        dic[\"SHARES\"] = int(position[4].text.replace(',', ''))\n        dic[\"DATE\"] = date.strip(\".html\")\n        dic[\"TICKER\"] = ticker_dict[position[2].text]\n        positions.append(dic)\n\n    df = pd.DataFrame(positions)\n    return df\n",[86,944,945,992,996,1008,1016,1034,1046,1062,1070,1080,1088,1100,1116,1132,1148,1178,1204,1220,1239,1243,1248,1257],{"__ignoreMap":110},[114,946,947,950,952,955,958,961,964,966,969,971,974,976,979,981,984,986,989],{"class":116,"line":117},[114,948,949],{"class":120},"ticker_dict ",[114,951,125],{"class":124},[114,953,954],{"class":120}," {",[114,956,957],{"class":131},"'00206R102'",[114,959,960],{"class":120},": ",[114,962,963],{"class":131},"'T'",[114,965,424],{"class":120},[114,967,968],{"class":131},"'00507V109'",[114,970,960],{"class":120},[114,972,973],{"class":131},"'ATVI'",[114,975,424],{"class":120},[114,977,978],{"class":131},"'00724F101'",[114,980,960],{"class":120},[114,982,983],{"class":131},"'ADBE'",[114,985,424],{"class":120},[114,987,988],{"class":166},"...",[114,990,991],{"class":120}," }\n",[114,993,994],{"class":116,"line":138},[114,995,498],{"emptyLinePlaceholder":497},[114,997,998,1000,1002,1004,1006],{"class":116,"line":220},[114,999,193],{"class":192},[114,1001,197],{"class":196},[114,1003,145],{"class":120},[114,1005,203],{"class":202},[114,1007,206],{"class":120},[114,1009,1010,1012,1014],{"class":116,"line":243},[114,1011,211],{"class":120},[114,1013,125],{"class":124},[114,1015,217],{"class":216},[114,1017,1018,1020,1022,1024,1026,1028,1030,1032],{"class":116,"line":259},[114,1019,223],{"class":120},[114,1021,125],{"class":124},[114,1023,228],{"class":141},[114,1025,145],{"class":120},[114,1027,132],{"class":131},[114,1029,235],{"class":124},[114,1031,203],{"class":216},[114,1033,240],{"class":120},[114,1035,1036,1038,1040,1042,1044],{"class":116,"line":282},[114,1037,246],{"class":120},[114,1039,125],{"class":124},[114,1041,251],{"class":120},[114,1043,254],{"class":131},[114,1045,135],{"class":120},[114,1047,1048,1050,1052,1054,1056,1058,1060],{"class":116,"line":293},[114,1049,262],{"class":120},[114,1051,125],{"class":124},[114,1053,267],{"class":120},[114,1055,270],{"class":131},[114,1057,273],{"class":120},[114,1059,276],{"class":166},[114,1061,279],{"class":120},[114,1063,1064,1066,1068],{"class":116,"line":308},[114,1065,285],{"class":120},[114,1067,125],{"class":124},[114,1069,290],{"class":120},[114,1071,1072,1074,1076,1078],{"class":116,"line":319},[114,1073,296],{"class":124},[114,1075,299],{"class":120},[114,1077,302],{"class":124},[114,1079,305],{"class":120},[114,1081,1082,1084,1086],{"class":116,"line":335},[114,1083,311],{"class":120},[114,1085,125],{"class":124},[114,1087,316],{"class":120},[114,1089,1090,1092,1094,1096,1098],{"class":116,"line":358},[114,1091,322],{"class":120},[114,1093,125],{"class":124},[114,1095,327],{"class":120},[114,1097,330],{"class":131},[114,1099,135],{"class":120},[114,1101,1102,1104,1106,1108,1110,1112,1114],{"class":116,"line":377},[114,1103,338],{"class":120},[114,1105,341],{"class":131},[114,1107,344],{"class":120},[114,1109,125],{"class":124},[114,1111,349],{"class":120},[114,1113,352],{"class":166},[114,1115,355],{"class":120},[114,1117,1118,1120,1122,1124,1126,1128,1130],{"class":116,"line":396},[114,1119,338],{"class":120},[114,1121,363],{"class":131},[114,1123,344],{"class":120},[114,1125,125],{"class":124},[114,1127,349],{"class":120},[114,1129,372],{"class":166},[114,1131,355],{"class":120},[114,1133,1134,1136,1138,1140,1142,1144,1146],{"class":116,"line":438},[114,1135,338],{"class":120},[114,1137,382],{"class":131},[114,1139,344],{"class":120},[114,1141,125],{"class":124},[114,1143,349],{"class":120},[114,1145,391],{"class":166},[114,1147,355],{"class":120},[114,1149,1150,1152,1154,1156,1158,1160,1162,1164,1166,1168,1170,1172,1174,1176],{"class":116,"line":468},[114,1151,338],{"class":120},[114,1153,401],{"class":131},[114,1155,344],{"class":120},[114,1157,125],{"class":124},[114,1159,409],{"class":408},[114,1161,412],{"class":120},[114,1163,415],{"class":166},[114,1165,418],{"class":120},[114,1167,421],{"class":131},[114,1169,424],{"class":120},[114,1171,427],{"class":131},[114,1173,430],{"class":120},[114,1175,148],{"class":124},[114,1177,435],{"class":166},[114,1179,1180,1182,1184,1186,1188,1190,1192,1194,1196,1198,1200,1202],{"class":116,"line":488},[114,1181,338],{"class":120},[114,1183,443],{"class":131},[114,1185,344],{"class":120},[114,1187,125],{"class":124},[114,1189,409],{"class":408},[114,1191,412],{"class":120},[114,1193,454],{"class":166},[114,1195,418],{"class":120},[114,1197,421],{"class":131},[114,1199,424],{"class":120},[114,1201,427],{"class":131},[114,1203,465],{"class":120},[114,1205,1206,1208,1210,1212,1214,1216,1218],{"class":116,"line":494},[114,1207,338],{"class":120},[114,1209,473],{"class":131},[114,1211,344],{"class":120},[114,1213,125],{"class":124},[114,1215,480],{"class":120},[114,1217,483],{"class":131},[114,1219,135],{"class":120},[114,1221,1222,1224,1227,1229,1231,1234,1236],{"class":116,"line":501},[114,1223,338],{"class":120},[114,1225,1226],{"class":131},"\"TICKER\"",[114,1228,344],{"class":120},[114,1230,125],{"class":124},[114,1232,1233],{"class":120}," ticker_dict[position[",[114,1235,391],{"class":166},[114,1237,1238],{"class":120},"].text]\n",[114,1240,1241],{"class":116,"line":512},[114,1242,491],{"class":120},[114,1244,1246],{"class":116,"line":1245},20,[114,1247,498],{"emptyLinePlaceholder":497},[114,1249,1251,1253,1255],{"class":116,"line":1250},21,[114,1252,504],{"class":120},[114,1254,125],{"class":124},[114,1256,509],{"class":120},[114,1258,1260,1262],{"class":116,"line":1259},22,[114,1261,515],{"class":124},[114,1263,518],{"class":120},[10,1265,1266],{},"Let's check this:",[105,1268,1271],{"className":1269,"code":1270,"language":177},[175],"df = scrape_13f(files[2])\nprint(df[[\"CUSIP\", \"NAME_OF_ISSUER\", \"TICKER\"]].head())\n",[86,1272,1270],{"__ignoreMap":110},[105,1274,1277],{"className":1275,"code":1276,"language":177},[175],"       CUSIP         NAME_OF_ISSUER TICKER\n0  88579Y101                  3M CO    MMM\n1  G1151C101  ACCENTURE PLC IRELAND    ACN\n2  02209S103       ALTRIA GROUP INC     MO\n3  03076C106    AMERIPRISE FINL INC    AMP\n4  035710409    ANNALY CAP MGMT INC    NLY\n",[86,1278,1276],{"__ignoreMap":110},[10,1280,1281],{},"Let's take a look at the last filing, Q4 2017.",[105,1283,1285],{"className":107,"code":1284,"language":109,"meta":110,"style":110},"q4_2017 = sorted(files)[-1]\ndf_q4_2017 = scrape_13f(q4_2017)\n\ntop_20 = df_q4_2017.sort_values(by=\"VALUE\", ascending=False)[[\"TICKER\", \"VALUE\"]][:40]\na = top_20.TICKER\nb = top_20.VALUE\nc = range(len(b))\n\nfig = plt.figure(figsize=(15,5))\nax = fig.add_subplot(111)\nax.bar(c, b)\n\nplt.xticks(c, a, rotation=90)\nplt.title('Top 40 Stock Holdings by Value')\nplt.xlabel('Stock Ticker')\nplt.ylabel('USD (10 MM))')\nplt.show()\n",[86,1286,1287,1307,1317,1321,1365,1378,1390,1408,1412,1437,1452,1457,1461,1475,1484,1493,1502],{"__ignoreMap":110},[114,1288,1289,1292,1294,1296,1299,1302,1304],{"class":116,"line":117},[114,1290,1291],{"class":120},"q4_2017 ",[114,1293,125],{"class":124},[114,1295,565],{"class":141},[114,1297,1298],{"class":120},"(files)[",[114,1300,1301],{"class":124},"-",[114,1303,372],{"class":166},[114,1305,1306],{"class":120},"]\n",[114,1308,1309,1312,1314],{"class":116,"line":138},[114,1310,1311],{"class":120},"df_q4_2017 ",[114,1313,125],{"class":124},[114,1315,1316],{"class":120}," scrape_13f(q4_2017)\n",[114,1318,1319],{"class":116,"line":220},[114,1320,498],{"emptyLinePlaceholder":497},[114,1322,1323,1326,1328,1331,1334,1336,1338,1340,1343,1345,1348,1351,1353,1355,1357,1360,1363],{"class":116,"line":243},[114,1324,1325],{"class":120},"top_20 ",[114,1327,125],{"class":124},[114,1329,1330],{"class":120}," df_q4_2017.sort_values(",[114,1332,1333],{"class":157},"by",[114,1335,125],{"class":124},[114,1337,401],{"class":131},[114,1339,424],{"class":120},[114,1341,1342],{"class":157},"ascending",[114,1344,125],{"class":124},[114,1346,1347],{"class":166},"False",[114,1349,1350],{"class":120},")[[",[114,1352,1226],{"class":131},[114,1354,424],{"class":120},[114,1356,401],{"class":131},[114,1358,1359],{"class":120},"]][:",[114,1361,1362],{"class":166},"40",[114,1364,1306],{"class":120},[114,1366,1367,1370,1372,1375],{"class":116,"line":259},[114,1368,1369],{"class":120},"a ",[114,1371,125],{"class":124},[114,1373,1374],{"class":120}," top_20.",[114,1376,1377],{"class":166},"TICKER\n",[114,1379,1380,1383,1385,1387],{"class":116,"line":282},[114,1381,1382],{"class":120},"b ",[114,1384,125],{"class":124},[114,1386,1374],{"class":120},[114,1388,1389],{"class":166},"VALUE\n",[114,1391,1392,1395,1397,1400,1402,1405],{"class":116,"line":293},[114,1393,1394],{"class":120},"c ",[114,1396,125],{"class":124},[114,1398,1399],{"class":141}," range",[114,1401,145],{"class":120},[114,1403,1404],{"class":141},"len",[114,1406,1407],{"class":120},"(b))\n",[114,1409,1410],{"class":116,"line":308},[114,1411,498],{"emptyLinePlaceholder":497},[114,1413,1414,1417,1419,1422,1424,1426,1428,1431,1433,1435],{"class":116,"line":319},[114,1415,1416],{"class":120},"fig ",[114,1418,125],{"class":124},[114,1420,1421],{"class":120}," plt.figure(",[114,1423,602],{"class":157},[114,1425,125],{"class":124},[114,1427,145],{"class":120},[114,1429,1430],{"class":166},"15",[114,1432,612],{"class":120},[114,1434,615],{"class":166},[114,1436,465],{"class":120},[114,1438,1439,1442,1444,1447,1450],{"class":116,"line":335},[114,1440,1441],{"class":120},"ax ",[114,1443,125],{"class":124},[114,1445,1446],{"class":120}," fig.add_subplot(",[114,1448,1449],{"class":166},"111",[114,1451,135],{"class":120},[114,1453,1454],{"class":116,"line":358},[114,1455,1456],{"class":120},"ax.bar(c, b)\n",[114,1458,1459],{"class":116,"line":377},[114,1460,498],{"emptyLinePlaceholder":497},[114,1462,1463,1466,1468,1470,1473],{"class":116,"line":396},[114,1464,1465],{"class":120},"plt.xticks(c, a, ",[114,1467,665],{"class":157},[114,1469,125],{"class":124},[114,1471,1472],{"class":166},"90",[114,1474,135],{"class":120},[114,1476,1477,1479,1482],{"class":116,"line":438},[114,1478,622],{"class":120},[114,1480,1481],{"class":131},"'Top 40 Stock Holdings by Value'",[114,1483,135],{"class":120},[114,1485,1486,1488,1491],{"class":116,"line":468},[114,1487,632],{"class":120},[114,1489,1490],{"class":131},"'Stock Ticker'",[114,1492,135],{"class":120},[114,1494,1495,1497,1500],{"class":116,"line":488},[114,1496,642],{"class":120},[114,1498,1499],{"class":131},"'USD (10 MM))'",[114,1501,135],{"class":120},[114,1503,1504],{"class":116,"line":494},[114,1505,1506],{"class":120},"plt.show()\n",[10,1508,1509],{},[676,1510],{"alt":678,"src":1511},"/static/sec/2017_filing.png",[1513,1514,1515],"style",{},"html pre.shiki code .sMOD_, html code.shiki .sMOD_{--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html pre.shiki code .sC2Qs, html code.shiki .sC2Qs{--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672}html pre.shiki code .sstjo, html code.shiki .sstjo{--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .sTrkL, html code.shiki .sTrkL{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF}html pre.shiki code .sTHNf, html code.shiki .sTHNf{--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}html pre.shiki code .s7F3e, html code.shiki .s7F3e{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html pre.shiki code .sq6CD, html code.shiki .sq6CD{--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}html pre.shiki code .srTi1, html code.shiki .srTi1{--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E}html pre.shiki code .so59x, html code.shiki .so59x{--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}html pre.shiki code .sOrwc, html code.shiki .sOrwc{--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#F8F8F2}html pre.shiki code .s-m8C, html code.shiki .s-m8C{--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}",{"title":110,"searchDepth":138,"depth":138,"links":1517},[1518],{"id":683,"depth":138,"text":684},"2018-01-30","How to read SEC filing data with Python",false,"md",null,"/static/sec/sec.jpg",{"layout":1526},"post","/2018/01/30/reading-13f-sec-filings-with-python",{"title":5,"description":1520},"2018/01/30/reading-13f-sec-filings-with-python",[1531,109,1532,1533],"sec","data","scraping","VdxsAoHhWBei2IJRIzWg7z1CA1MC-hir5JSJrsRh5nI",1753140976284]