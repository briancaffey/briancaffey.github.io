<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Setting up a Flask project with Flask CLI and Docker</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Brian Caffey's personal website"><meta data-n-head="ssr" name="robots" content="all"><meta data-n-head="ssr" property="og:title" content="Setting up a Flask project with Flask CLI and Docker"><meta data-n-head="ssr" property="og:description" content="undefined"><meta data-n-head="ssr" property="og:image" content="https://briancaffey.github.io/static/flask-docker.png"><meta data-n-head="ssr" property="twitter:card" content="https://briancaffey.github.io/static/flask-docker.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/4edefe3.js" as="script"><link rel="preload" href="/_nuxt/6fd12fd.js" as="script"><link rel="preload" href="/_nuxt/6f69ae2.js" as="script"><link rel="preload" href="/_nuxt/5505ae8.js" as="script"><link rel="preload" href="/_nuxt/aa6092f.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 f52d43e0:0 9592d830:0 517a8dd7:0 072b2f8a:0 fa7ff0ca:0 56b15182:0 5a4b6265:0 14b1eaf9:0 a0fa61ae:0 7f6c3ed0:0 64516d8e:0 5586ddaf:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-black{--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity))}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-red-300{--bg-opacity:1;background-color:#feb2b2;background-color:rgba(254,178,178,var(--bg-opacity))}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.flex-1{flex:1 1 0%}.flex-grow{flex-grow:1}.float-right{float:right}.font-bold{font-weight:700}.h-3{height:.75rem}.h-4{height:1rem}.h-12{height:3rem}.h-32{height:8rem}.h-64{height:16rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-8{line-height:2rem}.leading-9{line-height:2.25rem}.m-2{margin:.5rem}.m-4{margin:1rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mb-8{margin-bottom:2rem}.-ml-1{margin-left:-.25rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.object-cover{-o-object-fit:cover;object-fit:cover}.p-3{padding:.75rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-32{padding-top:8rem;padding-bottom:8rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.pr-4{padding-right:1rem}.pb-4{padding-bottom:1rem}.pt-8{padding-top:2rem}.pb-8{padding-bottom:2rem}.pt-16{padding-top:4rem}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.resize{resize:both}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-red-400{--text-opacity:1;color:#fc8181;color:rgba(252,129,129,var(--text-opacity))}.text-red-600{--text-opacity:1;color:#e53e3e;color:rgba(229,62,62,var(--text-opacity))}.uppercase{text-transform:uppercase}.visible{visibility:visible}.w-3{width:.75rem}.w-4{width:1rem}.w-12{width:3rem}.w-32{width:8rem}.w-full{width:100%}.z-10{z-index:10}.gap-4{grid-gap:1rem;gap:1rem}.gap-6{grid-gap:1.5rem;gap:1.5rem}.gap-8{grid-gap:2rem;gap:2rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition-all{transition-property:all}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.duration-150{transition-duration:.15s}.delay-150{transition-delay:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:inline{display:inline}.sm\:hidden{display:none}.sm\:p-16{padding:4rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:w-2\/3{width:66.666667%}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:px-1{padding-left:.25rem;padding-right:.25rem}.md\:px-4{padding-left:1rem;padding-right:1rem}.md\:w-1\/2{width:50%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:1024px){.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pl-64{padding-left:16rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1280px){.xl\:pb-16{padding-bottom:4rem}}:root{--color:#243746;--color-primary:#158876;--color-secondary:#0e2233;--bg:#f3f5f4;--bg-secondary:#fff;--bg-code:#ddd;--border-color:#ddd}.dark-mode{--color:#ebf4f1;--color-primary:#41b38a;--color-secondary:#fdf9f3;--bg:#091a28;--bg-secondary:#071521;--bg-code:#ddd;--border-color:#0d2538}.sepia-mode{--color:#433422;--color-primary:#504231;--color-secondary:#504231;--bg:#f1e7d0;--bg-code:#ddd;--bg-secondary:#eae0c9;--border-color:#ded0bf}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;background-color:#f3f5f4;background-color:var(--bg);color:#243746;color:var(--color);transition:background-color .7s}a{color:#158876;color:var(--color-primary)}.py-05{padding-top:.125rem;padding-bottom:.125rem}.markdown{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity));line-height:1.5;color:#0e2233;color:var(--color-secondary)}.markdown .token.operator{background:0 0}.markdown>*+*{margin-top:0;margin-bottom:1rem}.markdown li+li{margin-top:.25rem}.markdown li>p+p{margin-top:1.5rem;color:#158876;color:var(--color-primary)}.markdown img{margin:auto}.markdown a,.markdown strong{font-weight:600}.markdown strong a{font-weight:700}.markdown h1{font-size:2.25rem}.markdown h1,.markdown h2{border-color:#158876;border-color:var(--color-primary);line-height:1.25;border-bottom-width:1px;font-weight:600;margin-bottom:1rem;margin-top:1.5rem;padding-bottom:.5rem}.markdown h2{font-size:1.5rem}.markdown h3{line-height:1.375;font-size:1.125rem}.markdown h3,.markdown h4{border-color:#158876;border-color:var(--color-primary);font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown h4{line-height:1;font-size:1rem}.markdown h5{border-color:#158876;border-color:var(--color-primary)}.markdown h5,.markdown h6{line-height:1.25;font-size:.875rem;font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown blockquote,.markdown h6{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.markdown blockquote{font-size:1rem;border-left-width:4px;--border-opacity:1;border-color:#e2e8f0;border-color:rgba(226,232,240,var(--border-opacity));padding-left:1rem;padding-right:1rem;border-color:#158876;border-color:var(--color-primary)}.markdown code{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875rem;display:inline;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity));padding:.125rem .25rem;background-color:#ddd;background-color:var(--bg-code);color:#000}.markdown code,.markdown pre{--bg-opacity:1;border-radius:.25rem}.markdown pre{background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity));padding:1rem}.markdown pre code{display:block;background-color:transparent;padding:0;overflow:visible;border-radius:0;color:#000}.markdown p{margin-bottom:10px}code[class*=language-],pre[class*=language-]{background:#ddd!important;background:var(--bg-code)!important;text-shadow:none!important}.markdown ul{list-style-type:disc}.markdown ol,.markdown ul{font-size:1rem;padding-left:2rem}.markdown ol{list-style-type:decimal}.markdown kbd{font-size:.75rem;display:inline-block;border-radius:.25rem;border-width:1px;padding:.125rem .25rem;vertical-align:middle;font-weight:400;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.markdown table,td,th{font-size:1rem;border:1px solid #243746;border-color:var(--color)}.markdown table{overflow-x:scroll}.markdown td,.markdown th{border-width:1px;padding:.25rem .75rem}.markdown .highlight pre{--bg-opacity:1!important;background-color:#f7fafc!important;background-color:rgba(247,250,252,var(--bg-opacity))!important}.article-card{box-shadow:0 5px 10px 0 #0e2233;box-shadow:0 5px 10px 0 var(--color-secondary);transition:box-shadow .2s,transform .2s;height:100%}.article-card:hover{box-shadow:0 10px 40px 0 #0e2233;box-shadow:0 10px 40px 0 var(--color-secondary);transform:scale(1.025)}.blog-card-description,.blog-date{color:#0e2233;color:var(--color-secondary)}.blog-date{font-style:italic}hr{background-color:#243746;background-color:var(--color);border:none;height:1px}.menu-icon{background-color:#ddd;background-color:var(--border-color)}.menu-icon,.mobile-menu{color:#243746;color:var(--color)}.mobile-menu{background-color:#fff;background-color:var(--bg-secondary)}.btn{border-radius:1;border-color:#158876;border-color:var(--color-primary)}.btn:hover{background-color:#fff;background-color:var(--bg-secondary)}.hero{border-color:#158876;border-color:var(--color-primary)}.markdown{word-wrap:break-word}.markdown h2:before,.markdown h3:before{display:block;content:" ";margin-top:-85px;height:85px;visibility:hidden;pointer-events:none}.markdown h2>a,.markdown h3>a{margin-left:1.25rem}.markdown h2>a:before,.markdown h3>a:before{content:"#";font-weight:400;font-size:1.25rem;line-height:2rem;margin-left:-1.25rem;padding-right:.5rem;position:absolute;opacity:1}@media (min-width:1024px){.markdown h2>a,.markdown h3>a{margin-left:0}.markdown h2>a:before,.markdown h3>a:before{opacity:0}}.markdown h2:hover>a:before,.markdown h3:hover>a:before{opacity:1}& pre[class*=language-]{--bg-opacity:1;background-color:#2d3748;background-color:rgba(45,55,72,var(--bg-opacity));position:static}.mc{background-color:#f3f5f4;background-color:var(--bg);border-color:#158876;border-color:var(--color-primary);border-width:1px;color:#158876;color:var(--color-primary);justify-content:center;padding:5px 10px;border-radius:5px;width:100%}.mc-btn{color:#fff;color:var(--bg-secondary);background-color:#0e2233;background-color:var(--color-secondary);cursor:pointer}.page-enter-active,.page-leave-active{transition:filter 2s linear;transition:margin-top .15s,opacity .15s}.page-enter,.page-leave-to{opacity:0;margin-top:5px}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.emoji-mart,.emoji-mart *{-webkit-box-sizing:border-box;box-sizing:border-box;line-height:1.15}.emoji-mart{font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif;font-size:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:420px;color:#222427;border:1px solid #d9d9d9;border-radius:5px;background:#fff}.emoji-mart-emoji{padding:6px;border:none;background:0 0;-webkit-box-shadow:none;box-shadow:none}.emoji-mart-emoji span{display:inline-block}.emoji-mart-preview-emoji .emoji-mart-emoji span{width:38px;height:38px;font-size:32px}.emoji-type-native{font-family:"Segoe UI Emoji","Segoe UI Symbol","Segoe UI","Apple Color Emoji","Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji";word-break:keep-all}.emoji-type-image{background-size:5700%}.emoji-type-image.emoji-set-apple{background-image:url(https://unpkg.com/emoji-datasource-apple@6.0.1/img/apple/sheets-256/64.png)}.emoji-type-image.emoji-set-facebook{background-image:url(https://unpkg.com/emoji-datasource-facebook@6.0.1/img/facebook/sheets-256/64.png)}.emoji-type-image.emoji-set-google{background-image:url(https://unpkg.com/emoji-datasource-google@6.0.1/img/google/sheets-256/64.png)}.emoji-type-image.emoji-set-twitter{background-image:url(https://unpkg.com/emoji-datasource-twitter@6.0.1/img/twitter/sheets-256/64.png)}.emoji-mart-bar{border:0 solid #d9d9d9}.emoji-mart-bar:first-child{border-bottom-width:1px;border-top-left-radius:5px;border-top-right-radius:5px}.emoji-mart-bar:last-child{border-top-width:1px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.emoji-mart-scroll{position:relative;overflow-y:scroll;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-anchors{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 6px;color:#858585;line-height:0}.emoji-mart-anchor{position:relative;display:block;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;text-align:center;padding:12px 4px;overflow:hidden;-webkit-transition:color .1s ease-out;-o-transition:color .1s ease-out;transition:color .1s ease-out;border:none;background:0 0;-webkit-box-shadow:none;box-shadow:none}.emoji-mart-anchor-selected,.emoji-mart-anchor:hover{color:#464646}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0}.emoji-mart-anchor-bar{position:absolute;bottom:-3px;left:0;width:100%;height:3px;background-color:#464646}.emoji-mart-anchors i{display:inline-block;width:100%;max-width:22px}.emoji-mart-anchors svg{fill:currentColor;max-height:18px}.emoji-mart .scroller{height:250px;position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-search{margin-top:6px;padding:0 6px}.emoji-mart-search input{font-size:16px;display:block;width:100%;padding:.2em .6em;border-radius:25px;border:1px solid #d9d9d9;outline:0}.emoji-mart-search-results{height:250px;overflow-y:scroll}.emoji-mart-category{position:relative}.emoji-mart-category .emoji-mart-emoji span{z-index:1;position:relative;text-align:center;cursor:default}.emoji-mart-category .emoji-mart-emoji:hover:before,.emoji-mart-emoji-selected:before{z-index:0;content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;border-radius:100%;opacity:0;opacity:1}.emoji-mart-category-label{position:-webkit-sticky;position:sticky;top:0}.emoji-mart-static .emoji-mart-category-label{z-index:2;position:relative}.emoji-mart-category-label h3{display:block;font-size:16px;width:100%;font-weight:500;padding:5px 6px;background-color:#fff;background-color:hsla(0,0%,100%,.95)}.emoji-mart-emoji{position:relative;display:inline-block;font-size:0}.emoji-mart-no-results{font-size:14px;text-align:center;padding-top:70px;color:#858585}.emoji-mart-no-results .emoji-mart-category-label{display:none}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:.2em}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none}.emoji-mart-preview{position:relative;height:70px}.emoji-mart-preview-data,.emoji-mart-preview-emoji,.emoji-mart-preview-skins{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.emoji-mart-preview-emoji{left:12px}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all}.emoji-mart-preview-skins{right:30px;text-align:right}.emoji-mart-preview-name{font-size:14px}.emoji-mart-preview-shortname{font-size:12px;color:#888}.emoji-mart-preview-emoticon+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-shortname{margin-left:.5em}.emoji-mart-preview-emoticon{font-size:11px;color:#bbb}.emoji-mart-title span{display:inline-block;vertical-align:middle}.emoji-mart-title .emoji-mart-emoji{padding:0}.emoji-mart-title-label{color:#999a9c;font-size:21px;font-weight:300}.emoji-mart-skin-swatches{font-size:0;padding:2px 0;border:1px solid #d9d9d9;border-radius:12px;background-color:#fff}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch{width:16px;padding:0 2px}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after{opacity:.75}.emoji-mart-skin-swatch{display:inline-block;width:0;vertical-align:middle;-webkit-transition-property:width,padding;-o-transition-property:width,padding;transition-property:width,padding;-webkit-transition-duration:.125s;-o-transition-duration:.125s;transition-duration:.125s;-webkit-transition-timing-function:ease-out;-o-transition-timing-function:ease-out;transition-timing-function:ease-out}.emoji-mart-skin-swatch:first-child{-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s}.emoji-mart-skin-swatch:nth-child(2){-webkit-transition-delay:.03s;-o-transition-delay:.03s;transition-delay:.03s}.emoji-mart-skin-swatch:nth-child(3){-webkit-transition-delay:.06s;-o-transition-delay:.06s;transition-delay:.06s}.emoji-mart-skin-swatch:nth-child(4){-webkit-transition-delay:.09s;-o-transition-delay:.09s;transition-delay:.09s}.emoji-mart-skin-swatch:nth-child(5){-webkit-transition-delay:.12s;-o-transition-delay:.12s;transition-delay:.12s}.emoji-mart-skin-swatch:nth-child(6){-webkit-transition-delay:.15s;-o-transition-delay:.15s;transition-delay:.15s}.emoji-mart-skin-swatch-selected{position:relative;width:16px;padding:0 2px}.emoji-mart-skin-swatch-selected:after{content:"";position:absolute;top:50%;left:50%;width:4px;height:4px;margin:-2px 0 0 -2px;background-color:#fff;border-radius:100%;pointer-events:none;opacity:0;-webkit-transition:opacity .2s ease-out;-o-transition:opacity .2s ease-out;transition:opacity .2s ease-out}.emoji-mart-skin{display:inline-block;width:100%;padding-top:100%;max-width:12px;border-radius:100%}.emoji-mart-skin-tone-1{background-color:#ffc93a}.emoji-mart-skin-tone-2{background-color:#fadcbc}.emoji-mart-skin-tone-3{background-color:#e0bb95}.emoji-mart-skin-tone-4{background-color:#bf8f68}.emoji-mart-skin-tone-5{background-color:#9b643d}.emoji-mart-skin-tone-6{background-color:#594539}.emoji-mart .vue-recycle-scroller{position:relative}.emoji-mart .vue-recycle-scroller.direction-vertical:not(.page-mode){overflow-y:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal:not(.page-mode){overflow-x:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal{display:-webkit-box;display:-ms-flexbox;display:flex}.emoji-mart .vue-recycle-scroller__slot{-webkit-box-flex:1;-ms-flex:auto 0 0px;flex:auto 0 0}.emoji-mart .vue-recycle-scroller__item-wrapper{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;position:relative}.emoji-mart .vue-recycle-scroller.ready .vue-recycle-scroller__item-view{position:absolute;top:0;left:0;will-change:transform}.emoji-mart .vue-recycle-scroller.direction-vertical .vue-recycle-scroller__item-wrapper{width:100%}.emoji-mart .vue-recycle-scroller.direction-horizontal .vue-recycle-scroller__item-wrapper{height:100%}.emoji-mart .vue-recycle-scroller.ready.direction-vertical .vue-recycle-scroller__item-view{width:100%}.emoji-mart .vue-recycle-scroller.ready.direction-horizontal .vue-recycle-scroller__item-view{height:100%}.emoji-mart .resize-observer[data-v-b329ee4c]{border:none;background-color:transparent;opacity:0}.emoji-mart .resize-observer[data-v-b329ee4c],.emoji-mart .resize-observer[data-v-b329ee4c] object{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;pointer-events:none;display:block;overflow:hidden}.emoji-mart-search .hidden{display:none;visibility:hidden}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}span.emoji-mart-emoji[data-v-3f691362]{padding:0}.selected[data-v-3f691362]{text-shadow:.25px 0 0 #000}.picker[data-v-3f691362]{position:absolute;top:10px;margin-left:auto;margin-right:auto;transform:translate(50%,50%)}.top[data-v-3f691362]{width:100%;background-color:var(--color-primary);height:3px}.selected[data-v-107ae01e]{text-shadow:.9px 0 0}span.emoji-mart-emoji[data-v-288717a6]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-288717a6]:hover{transform:scale(1.3)}.centered[data-v-288717a6]{position:absolute;left:50vw;right:50vw;margin-left:auto;margin-right:auto}span.emoji-mart-emoji[data-v-4f7c5820]{padding:0}.modal[data-v-4f7c5820]{z-index:100000000;top:0;-webkit-backdrop-filter:blur(.4px);backdrop-filter:blur(.4px);background-color:rgba(0,0,0,.2)}.modal[data-v-4f7c5820],.picker[data-v-4f7c5820]{position:absolute;left:0}.picker[data-v-4f7c5820]{z-index:10000000000;right:0;margin-left:auto;margin-right:auto}.cover-image[data-v-4b9599ea]{transition:transform .2s}.cover-image[data-v-4b9599ea]:hover{transform:scale(1.025)}.tag[data-v-3fbcd028]{background-color:var(--color-primary);transition:transform .2s}.tag[data-v-3fbcd028]:hover{transform:scale(1.05)}</style><link rel="preload" href="/_nuxt/static/1633840431/2017/12/09/setting-up-flask-cli-with-docker.html/state.js" as="script"><link rel="preload" href="/_nuxt/static/1633840431/2017/12/09/setting-up-flask-cli-with-docker.html/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1633840431/manifest.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function(){"use strict";var t=window,r=document,s=r.documentElement,n=["dark","light"],e=function(){for(var e="nuxt-color-mode=",t=r.cookie.split(";"),s=0;s<t.length;s++){for(var n=t[s];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null}()||"system",a="system"===e?l():e;function c(e){e+="-mode";s.classList?s.classList.add(e):s.className+=" "+e}function o(e){return t.matchMedia("(prefers-color-scheme"+e+")")}function l(){if(t.matchMedia&&"not all"!==o("").media)for(var e of n)if(o(":"+e).matches)return e;return"light"}c(a),t.__NUXT_COLOR_MODE__={preference:e,value:a,getColorScheme:l,addClass:c,removeClass:function(e){e+="-mode";s.classList?s.classList.remove(e):s.className=s.className.replace(new RegExp(e,"g"),"")}}}()</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div data-v-3f691362><div class="top" data-v-3f691362></div> <div class="mx-auto flex py-2 px-2 sm:px-4 items-center max-w-6xl justify-center" data-v-3f691362><div class="justify-left flex-grow flex-cols-4" data-v-3f691362><a href="/" class="text-xl nuxt-link-active" data-v-3f691362><span class="hidden sm:inline text-2xl" data-v-3f691362>Brian Caffey</span><span class="inline sm:hidden" data-v-3f691362>JBC</span></a></div> <div class="flex-grow relative" data-v-3f691362><nav z-index="10000" data-v-107ae01e data-v-3f691362><div data-v-107ae01e><ul class="items-right float-right hidden md:flex" data-v-107ae01e><li class="px-4 text-lg" data-v-107ae01e><a href="/blog/1" data-v-107ae01e>
          Blog
        </a></li> <li class="px-4 text-lg" data-v-107ae01e><a href="/projects" data-v-107ae01e>
          Projects
        </a></li> <li class="px-4 text-lg" data-v-107ae01e><a href="/contact" data-v-107ae01e>
          Contact
        </a></li></ul> <div class="flex justify-end md:hidden z-1000" data-v-107ae01e><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-107ae01e><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current h-3 w-3" data-v-107ae01e><title data-v-107ae01e>Menu</title> <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-107ae01e></path></svg></button></div> <!----></div></nav></div></div> <div class="picker" data-v-3f691362><div class="centered" data-v-288717a6 data-v-3f691362><div class="grid items-center justify-center" data-v-288717a6><ul class="flex px-4" data-v-288717a6><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="🖥️, desktop_computer" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:52.63% 12.28%;width:32px;height:32px"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="🌞, sun_with_face" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:8.77% 77.19%;width:32px;height:32px"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="🌚, new_moon_with_face" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:8.77% 70.18%;width:32px;height:32px"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="☕, coffee" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:94.74% 8.77%;width:32px;height:32px"></span></span></li> <li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><div data-v-4f7c5820 data-v-288717a6><!----> <ul data-v-4f7c5820><li class="md:px-1 px-1 cursor-pointer" data-v-4f7c5820><span aria-label="🇺🇸, us, flag-us" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:7.02% 68.42%;width:32px;height:32px"></span></span></li></ul> <div class="rounded-md z-10 picker" data-v-4f7c5820><div class="bg-white shadow-md rounded px-4 py-2 w-32 text" style="display:none" data-v-4f7c5820><a href="/2017/12/09/setting-up-flask-cli-with-docker.html" aria-current="page" class="nuxt-link-exact-active nuxt-link-active" data-v-4f7c5820><span aria-label="🇺🇸, us, flag-us" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:7.02% 68.42%;width:16px;height:16px"></span></span> English <br data-v-4f7c5820></a><a href="/fr/2017/12/09/setting-up-flask-cli-with-docker.html" data-v-4f7c5820><span aria-label="🇫🇷, fr, flag-fr" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:1.75% 91.23%;width:16px;height:16px"></span></span> Français <br data-v-4f7c5820></a><a href="/zh/2017/12/09/setting-up-flask-cli-with-docker.html" data-v-4f7c5820><span aria-label="🇨🇳, cn, flag-cn" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:1.75% 36.84%;width:16px;height:16px"></span></span> 简体中文 <br data-v-4f7c5820></a><a href="/ru/2017/12/09/setting-up-flask-cli-with-docker.html" data-v-4f7c5820><span aria-label="🇷🇺, ru, flag-ru" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:5.26% 92.98%;width:16px;height:16px"></span></span> Русский <br data-v-4f7c5820></a><a href="/jp/2017/12/09/setting-up-flask-cli-with-docker.html" data-v-4f7c5820><span aria-label="🇯🇵, jp, flag-jp" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:3.51% 59.65%;width:16px;height:16px"></span></span> 日本語 <br data-v-4f7c5820></a><a href="/in/2017/12/09/setting-up-flask-cli-with-docker.html" data-v-4f7c5820><span aria-label="🇮🇳, flag-in" class="emoji-mart-emoji" data-v-4f7c5820><span class="emoji-set-apple emoji-type-image" style="background-position:3.51% 43.86%;width:16px;height:16px"></span></span> हिंदी <br data-v-4f7c5820></a></div></div></div></li></ul></div></div></div></div> <article data-v-4b9599ea><img src="/static/flask-docker.png" class="pt-2 h-64 w-full object-cover cover-image" data-v-4b9599ea> <div class="mx-auto max-w-5xl px-2 sm:px-4 md:px-4 lg:px-16 mt-2" data-v-4b9599ea><h1 class="prose text-3xl leading-9" data-v-4b9599ea>
      Setting up a Flask project with Flask CLI and Docker
    </h1> <div class="flex flex-wrap -ml-1 py-2" data-v-21780fb6 data-v-4b9599ea><a href="/blog/tags/flask" data-v-3fbcd028 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mt-1 uppercase cursor-pointer tag" data-v-3fbcd028>
    flask 🏷️
    <!----></div></a><a href="/blog/tags/docker" data-v-3fbcd028 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mt-1 uppercase cursor-pointer tag" data-v-3fbcd028>
    docker 🏷️
    <!----></div></a></div> <!----> <p class="blog-date text-gray-500 mb-4" data-v-4b9599ea>
      Last Updated on
      December 9, 2017
    </p> <!----> <div class="markdown nuxt-content" data-v-4b9599ea data-v-4b9599ea><p data-v-4b9599ea data-v-4b9599ea><img alt="png" src="/static/flask-docker.png" data-v-4b9599ea data-v-4b9599ea></p>
<p data-v-4b9599ea data-v-4b9599ea>⚠️ This article is under contruction ⚠️</p>
<p data-v-4b9599ea data-v-4b9599ea>I've recently been working on an awesome tutorial from <a href="https://testdriven.io" rel="nofollow noopener noreferrer" target="_blank" data-v-4b9599ea data-v-4b9599ea>testdriven.io</a> that covers flask, react and docker. The beginning of the project covers how to setup a basic flask app using <code data-v-4b9599ea data-v-4b9599ea>flask-scripts</code>. <code data-v-4b9599ea data-v-4b9599ea>flask-scripts</code> is a deprecated tool and the tutorial recommends using <code data-v-4b9599ea data-v-4b9599ea>Flask CLI</code>. I have fumbled with this the first time I tried to set it up and while I was able to get it working, I couldn't get it working inside of docker. In this article I'll detail the setup of my flask project with <code data-v-4b9599ea data-v-4b9599ea>Flask CLI</code>.</p>
<blockquote data-v-4b9599ea data-v-4b9599ea>
<p data-v-4b9599ea data-v-4b9599ea>One of the nice new features in Flask 0.11 is the built-in integration of the click command line interface. This enables a wide range of new features for the Flask ecosystem and your own applications.</p>
</blockquote>
<p data-v-4b9599ea data-v-4b9599ea>OK. Let's set up a basic flask app:</p>
<h3 id="directories" data-v-4b9599ea data-v-4b9599ea><a href="#directories" aria-hidden="true" tabindex="-1" data-v-4b9599ea data-v-4b9599ea><span class="icon icon-link" data-v-4b9599ea data-v-4b9599ea></span></a>Directories</h3>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ mkdir test-flask && cd test-flask
 $ mkdir users-service && cd users-service
 $ mkdir project

</code></pre></div>
<h3 id="virtual-environment" data-v-4b9599ea data-v-4b9599ea><a href="#virtual-environment" aria-hidden="true" tabindex="-1" data-v-4b9599ea data-v-4b9599ea><span class="icon icon-link" data-v-4b9599ea data-v-4b9599ea></span></a>Virtual Environment</h3>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ virtualenv -p python3 env
Running virtualenv with interpreter /home/brian/anaconda3/bin/python3
Using base prefix '/home/brian/anaconda3'
New python executable in /home/brian/Documents/flask/test-flask/users-service/env/bin/python3
Also creating executable in /home/brian/Documents/flask/test-flask/users-service/env/bin/python
Installing setuptools, pip, wheel...done.
</code></pre></div>
<h3 id="activate-virtual-environment" data-v-4b9599ea data-v-4b9599ea><a href="#activate-virtual-environment" aria-hidden="true" tabindex="-1" data-v-4b9599ea data-v-4b9599ea><span class="icon icon-link" data-v-4b9599ea data-v-4b9599ea></span></a>Activate Virtual Environment</h3>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ source env/bin/activate
(env) $
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>We will come back to the <code data-v-4b9599ea data-v-4b9599ea>activate</code> script and add some environment variables to the bottom if it so we have them accessible when we activate the virtual environment.</p>
<h3 id="install-flask-in-the-virtual-environment" data-v-4b9599ea data-v-4b9599ea><a href="#install-flask-in-the-virtual-environment" aria-hidden="true" tabindex="-1" data-v-4b9599ea data-v-4b9599ea><span class="icon icon-link" data-v-4b9599ea data-v-4b9599ea></span></a>Install flask in the virtual environment</h3>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ pip install flask==0.12.2
Collecting flask==0.12.2
  Using cached Flask-0.12.2-py2.py3-none-any.whl
Collecting itsdangerous>=0.21 (from flask==0.12.2)
Collecting Werkzeug>=0.7 (from flask==0.12.2)
  Using cached Werkzeug-0.13-py2.py3-none-any.whl
Collecting click>=2.0 (from flask==0.12.2)
  Using cached click-6.7-py2.py3-none-any.whl
Collecting Jinja2>=2.4 (from flask==0.12.2)
  Using cached Jinja2-2.10-py2.py3-none-any.whl
Collecting MarkupSafe>=0.23 (from Jinja2>=2.4->flask==0.12.2)
Installing collected packages: itsdangerous, Werkzeug, click, MarkupSafe, Jinja2, flask
Successfully installed Jinja2-2.10 MarkupSafe-1.0 Werkzeug-0.13 click-6.7 flask-0.12.2 itsdangerous-0.24
(env) $
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>At this point we are ready to create our flask app.</p>
<p data-v-4b9599ea data-v-4b9599ea>Here's a note about the CLI:</p>
<blockquote data-v-4b9599ea data-v-4b9599ea>
<p data-v-4b9599ea data-v-4b9599ea>For the <strong data-v-4b9599ea data-v-4b9599ea>flask</strong> script to work, an application needs to be discovered. This is achieved by exporting the <code data-v-4b9599ea data-v-4b9599ea>FLASK_APP</code> environment variable. It can be either set to an import path or to a filename of a Python module that contains a Flask application.</p>
</blockquote>
<p data-v-4b9599ea data-v-4b9599ea>Let's add an <code data-v-4b9599ea data-v-4b9599ea>app.py</code> file inside the <code data-v-4b9599ea data-v-4b9599ea>project</code> folder:</p>
<p data-v-4b9599ea data-v-4b9599ea><em data-v-4b9599ea data-v-4b9599ea>app.py</em></p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-python" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea><span class="token keyword" data-v-4b9599ea data-v-4b9599ea>from</span> flask <span class="token keyword" data-v-4b9599ea data-v-4b9599ea>import</span> Flask<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>,</span> jsonify

app <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> Flask<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span>__name__<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>

<span class="token decorator annotation punctuation" data-v-4b9599ea data-v-4b9599ea>@app<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>.</span>route</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'/users/ping'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>,</span> methods<span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>[</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'GET'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>]</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>
<span class="token keyword" data-v-4b9599ea data-v-4b9599ea>def</span> <span class="token function" data-v-4b9599ea data-v-4b9599ea>ping_pong</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span>
    <span class="token keyword" data-v-4b9599ea data-v-4b9599ea>return</span> jsonify<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>{</span>
        <span class="token string" data-v-4b9599ea data-v-4b9599ea>'message'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'pong!'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>,</span>
        <span class="token string" data-v-4b9599ea data-v-4b9599ea>'status'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'success'</span>
        <span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>}</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>And now let's add an environment variable to tell the Flask CLI where our app is located:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ export FLASK_APP=/home/brian/Documents/flask/test-flask/users-service/project/app.py
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>OK, now let's try to run <code data-v-4b9599ea data-v-4b9599ea>flask run</code> and navigate to <code data-v-4b9599ea data-v-4b9599ea>/users/ping</code> and see what happens:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ flask run
 * Serving Flask app "app"
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [09/Dec/2017 19:20:14] "GET /users/ping HTTP/1.1" 200 -
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Great! We see our <code data-v-4b9599ea data-v-4b9599ea>pong!</code> message returned in the browser. Next, let's configure our settings:</p>
<p data-v-4b9599ea data-v-4b9599ea><em data-v-4b9599ea data-v-4b9599ea>project/config.py</em></p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-python" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea><span class="token keyword" data-v-4b9599ea data-v-4b9599ea>class</span> <span class="token class-name" data-v-4b9599ea data-v-4b9599ea>BaseConfig</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span>
    <span class="token triple-quoted-string string" data-v-4b9599ea data-v-4b9599ea>"""Base configuration"""</span>
    DEBUG <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> <span class="token boolean" data-v-4b9599ea data-v-4b9599ea>False</span>
    TESTING <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> <span class="token boolean" data-v-4b9599ea data-v-4b9599ea>False</span>
<span class="token keyword" data-v-4b9599ea data-v-4b9599ea>class</span> <span class="token class-name" data-v-4b9599ea data-v-4b9599ea>DevelopmentConfig</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span>BaseConfig<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span>
    <span class="token triple-quoted-string string" data-v-4b9599ea data-v-4b9599ea>"""Development configuration"""</span>
    DEBUG <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> <span class="token boolean" data-v-4b9599ea data-v-4b9599ea>True</span>
<span class="token keyword" data-v-4b9599ea data-v-4b9599ea>class</span> <span class="token class-name" data-v-4b9599ea data-v-4b9599ea>TestingConfig</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span>BaseConfig<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span>
    <span class="token triple-quoted-string string" data-v-4b9599ea data-v-4b9599ea>"""Testing configuration"""</span>
    DEBUG <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> <span class="token boolean" data-v-4b9599ea data-v-4b9599ea>True</span>
    TESTING <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> <span class="token boolean" data-v-4b9599ea data-v-4b9599ea>True</span>
<span class="token keyword" data-v-4b9599ea data-v-4b9599ea>class</span> <span class="token class-name" data-v-4b9599ea data-v-4b9599ea>ProductionConfig</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span>BaseConfig<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span>
    <span class="token triple-quoted-string string" data-v-4b9599ea data-v-4b9599ea>"""Production configuration"""</span>
    DEBUG <span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span> <span class="token boolean" data-v-4b9599ea data-v-4b9599ea>False</span>
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>And now we can add the following line right below where we define <code data-v-4b9599ea data-v-4b9599ea>app = Flask(__name__)</code>:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-python" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>app<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>.</span>config<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>.</span>from_object<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'project.config.DevelopmentConfig'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>When we run <code data-v-4b9599ea data-v-4b9599ea>flask run</code>, we get a long error message including:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>Debugged import:

- 'project' not found.

Original exception:

ImportStringError: import_string() failed for 'project.config'. Possible reasons are:

- missing __init__.py in a package;
- package or module path not included in sys.path;
- duplicated package or module name taking precedence in sys.path;
- missing module, class, function or variable;
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Let's try to add <code data-v-4b9599ea data-v-4b9599ea>__init__.py</code> to our <code data-v-4b9599ea data-v-4b9599ea>project</code> folder.</p>
<p data-v-4b9599ea data-v-4b9599ea>Once we do this, we are able to run the app successfully, but we don't see any special message about Debug mode being on:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ flask run
 * Serving Flask app "project.app"
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>The documentation mentions that we can turn on Debug mode with:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>export FLASK_DEBUG=1
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>We can check the debug mode by printing <code data-v-4b9599ea data-v-4b9599ea>app.config</code> in the <code data-v-4b9599ea data-v-4b9599ea>ping_pong()</code> function that is returned when we hit <code data-v-4b9599ea data-v-4b9599ea>/users/ping</code>:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-python" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea><span class="token decorator annotation punctuation" data-v-4b9599ea data-v-4b9599ea>@app<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>.</span>route</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'/users/ping'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>,</span> methods<span class="token operator" data-v-4b9599ea data-v-4b9599ea>=</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>[</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'GET'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>]</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>
<span class="token keyword" data-v-4b9599ea data-v-4b9599ea>def</span> <span class="token function" data-v-4b9599ea data-v-4b9599ea>ping_pong</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span>
    <span class="token keyword" data-v-4b9599ea data-v-4b9599ea>print</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span>app<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>.</span>config<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>
    <span class="token keyword" data-v-4b9599ea data-v-4b9599ea>return</span> jsonify<span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>(</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>{</span>
        <span class="token string" data-v-4b9599ea data-v-4b9599ea>'message'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'pong!'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>,</span>
        <span class="token string" data-v-4b9599ea data-v-4b9599ea>'status'</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>:</span><span class="token string" data-v-4b9599ea data-v-4b9599ea>'success'</span>
        <span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>}</span><span class="token punctuation" data-v-4b9599ea data-v-4b9599ea>)</span>
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Here's what we see in the terminal:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>&lt;Config {'DEBUG': True, 'TESTING': False, 'PROPAGATE_EXCEPTIONS': None, 'PRESERVE_CONTEXT_ON_EXCEPTION': None, 'SECRET_KEY': None, 'PERMANENT_SESSION_LIFETIME': datetime.timedelta(31), 'USE_X_SENDFILE': False, 'LOGGER_NAME': 'project.app', 'LOGGER_HANDLER_POLICY': 'always', 'SERVER_NAME': None, 'APPLICATION_ROOT': None, 'SESSION_COOKIE_NAME': 'session', 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_PATH': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_SECURE': False, 'SESSION_REFRESH_EACH_REQUEST': True, 'MAX_CONTENT_LENGTH': None, 'SEND_FILE_MAX_AGE_DEFAULT': datetime.timedelta(0, 43200), 'TRAP_BAD_REQUEST_ERRORS': False, 'TRAP_HTTP_EXCEPTIONS': False, 'EXPLAIN_TEMPLATE_LOADING': False, 'PREFERRED_URL_SCHEME': 'http', 'JSON_AS_ASCII': True, 'JSON_SORT_KEYS': True, 'JSONIFY_PRETTYPRINT_REGULAR': True, 'JSONIFY_MIMETYPE': 'application/json', 'TEMPLATES_AUTO_RELOAD': None}>
127.0.0.1 - - [09/Dec/2017 19:42:46] "GET /users/ping HTTP/1.1" 200 -
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Just to be sure this is working correctly, let's try another config setting, <code data-v-4b9599ea data-v-4b9599ea>ProductionConfig</code>:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>&lt;Config {'DEBUG': False, 'TESTING': False, 'PROPAGATE_EXCEPTIONS': None, 'PRESERVE_CONTEXT_ON_EXCEPTION': None, 'SECRET_KEY': None, 'PERMANENT_SESSION_LIFETIME': datetime.timedelta(31), 'USE_X_SENDFILE': False, 'LOGGER_NAME': 'project.app', 'LOGGER_HANDLER_POLICY': 'always', 'SERVER_NAME': None, 'APPLICATION_ROOT': None, 'SESSION_COOKIE_NAME': 'session', 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_PATH': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_SECURE': False, 'SESSION_REFRESH_EACH_REQUEST': True, 'MAX_CONTENT_LENGTH': None, 'SEND_FILE_MAX_AGE_DEFAULT': datetime.timedelta(0, 43200), 'TRAP_BAD_REQUEST_ERRORS': False, 'TRAP_HTTP_EXCEPTIONS': False, 'EXPLAIN_TEMPLATE_LOADING': False, 'PREFERRED_URL_SCHEME': 'http', 'JSON_AS_ASCII': True, 'JSON_SORT_KEYS': True, 'JSONIFY_PRETTYPRINT_REGULAR': True, 'JSONIFY_MIMETYPE': 'application/json', 'TEMPLATES_AUTO_RELOAD': None}>
127.0.0.1 - - [09/Dec/2017 19:45:29] "GET /users/ping HTTP/1.1" 200 -
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>OK, so far so good! I think that <code data-v-4b9599ea data-v-4b9599ea>FLASK_DEBUG</code> may give us some additional information in the terminal.</p>
<p data-v-4b9599ea data-v-4b9599ea>Let's run:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>export FLASK_DEBUG=1
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>and run our app in <code data-v-4b9599ea data-v-4b9599ea>ProductionConfig</code> mode:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ flask run
 * Serving Flask app "project.app"
 * Forcing debug mode on
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 775-946-486
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>and when we hit <code data-v-4b9599ea data-v-4b9599ea>/users/ping</code> we get:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>&lt;Config {'DEBUG': True, 'TESTING': False, 'PROPAGATE_EXCEPTIONS': None, 'PRESERVE_CONTEXT_ON_EXCEPTION': None, 'SECRET_KEY': None, 'PERMANENT_SESSION_LIFETIME': datetime.timedelta(31), 'USE_X_SENDFILE': False, 'LOGGER_NAME': 'project.app', 'LOGGER_HANDLER_POLICY': 'always', 'SERVER_NAME': None, 'APPLICATION_ROOT': None, 'SESSION_COOKIE_NAME': 'session', 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_PATH': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_SECURE': False, 'SESSION_REFRESH_EACH_REQUEST': True, 'MAX_CONTENT_LENGTH': None, 'SEND_FILE_MAX_AGE_DEFAULT': datetime.timedelta(0, 43200), 'TRAP_BAD_REQUEST_ERRORS': False, 'TRAP_HTTP_EXCEPTIONS': False, 'EXPLAIN_TEMPLATE_LOADING': False, 'PREFERRED_URL_SCHEME': 'http', 'JSON_AS_ASCII': True, 'JSON_SORT_KEYS': True, 'JSONIFY_PRETTYPRINT_REGULAR': True, 'JSONIFY_MIMETYPE': 'application/json', 'TEMPLATES_AUTO_RELOAD': None}>
127.0.0.1 - - [09/Dec/2017 19:51:17] "GET /users/ping HTTP/1.1" 200 -
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Here we can see that <code data-v-4b9599ea data-v-4b9599ea>DEBUG</code> is <code data-v-4b9599ea data-v-4b9599ea>True</code>, which was forced when we set <code data-v-4b9599ea data-v-4b9599ea>FLASK_DEBUG=1</code>.</p>
<p data-v-4b9599ea data-v-4b9599ea>For clarity, let's review the directory structure of our project:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ tree project/
project/
├── app.py
├── config.py
└── __init__.py
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>__init__.py</code> is just an empty file at this point, but in the testdriven.io tutorial it is the file that contains our app.</p>
<p data-v-4b9599ea data-v-4b9599ea>OK, we have a very simple flask app that we can control with the flask cli. Let's get ready to dockerize this simple project.</p>
<p data-v-4b9599ea data-v-4b9599ea>We need a <code data-v-4b9599ea data-v-4b9599ea>requirements.txt</code> file. So far we just have flask. We want to place this file on the same level as our <code data-v-4b9599ea data-v-4b9599ea>project</code> folder:</p>
<p data-v-4b9599ea data-v-4b9599ea><em data-v-4b9599ea data-v-4b9599ea>requirements.txt</em></p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>Flask==0.12.1
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>And we can add a <code data-v-4b9599ea data-v-4b9599ea>.gitignore</code> file as well at the same level:</p>
<p data-v-4b9599ea data-v-4b9599ea><em data-v-4b9599ea data-v-4b9599ea>.gitignore</em></p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>__pycache__
env
</code></pre></div>
<h2 id="docker" data-v-4b9599ea data-v-4b9599ea><a href="#docker" aria-hidden="true" tabindex="-1" data-v-4b9599ea data-v-4b9599ea><span class="icon icon-link" data-v-4b9599ea data-v-4b9599ea></span></a>Docker</h2>
<p data-v-4b9599ea data-v-4b9599ea>Here are the versions of docker applications I have installed:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ docker -v && docker-compose -v && docker-machine -v
Docker version 17.10.0-ce, build f4ffd2511c
docker-compose version 1.17.1, build unknown
docker-machine version 0.13.0, build HEAD
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Currently I don't have any docker machines, images or containers. Here is the status of the docker service:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ systemctl status docker
● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2017-12-08 19:13:09 EST; 24h ago
     Docs: https://docs.docker.com
 Main PID: 5486 (dockerd)
    Tasks: 26 (limit: 4915)
   CGroup: /system.slice/docker.service
           ├─5486 /usr/bin/dockerd -g /home/brian/docker -H fd://
           └─5492 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-interval=0 --start-timeout 2m --state-dir /var/run/docker/libcontainerd/containerd --shim docker-containerd-shim --runtime docker-runc

Dec 08 19:13:08 archthinkpad dockerd[5486]: time="2017-12-08T19:13:08.126834430-05:00" level=warning msg="Your kernel does not support cgroup rt period"
Dec 08 19:13:08 archthinkpad dockerd[5486]: time="2017-12-08T19:13:08.126850093-05:00" level=warning msg="Your kernel does not support cgroup rt runtime"
Dec 08 19:13:08 archthinkpad dockerd[5486]: time="2017-12-08T19:13:08.127216425-05:00" level=info msg="Loading containers: start."
Dec 08 19:13:08 archthinkpad dockerd[5486]: time="2017-12-08T19:13:08.776371797-05:00" level=info msg="Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address"
Dec 08 19:13:09 archthinkpad dockerd[5486]: time="2017-12-08T19:13:09.013651222-05:00" level=info msg="Loading containers: done."
Dec 08 19:13:09 archthinkpad dockerd[5486]: time="2017-12-08T19:13:09.041318847-05:00" level=warning msg="Not using native diff for overlay2, this may cause degraded performance for building images: kernel has CONFIG_OVERLAY_FS_REDIRECT_DIR enabled"
Dec 08 19:13:09 archthinkpad dockerd[5486]: time="2017-12-08T19:13:09.075633462-05:00" level=info msg="Docker daemon" commit=f4ffd2511c graphdriver(s)=overlay2 version=17.10.0-ce
Dec 08 19:13:09 archthinkpad dockerd[5486]: time="2017-12-08T19:13:09.076162900-05:00" level=info msg="Daemon has completed initialization"
Dec 08 19:13:09 archthinkpad dockerd[5486]: time="2017-12-08T19:13:09.082056339-05:00" level=info msg="API listen on /var/run/docker.sock"
Dec 08 19:13:09 archthinkpad systemd[1]: Started Docker Application Container Engine.
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>OK, docker seems to be working fine. Now we need to create a Docker host and point the docker client at it. What does this mean? From what I understand, we will be running docker containers not on our local machine but in an instance of <code data-v-4b9599ea data-v-4b9599ea>virtualbox</code> on our local machine. To do this, we will use the <code data-v-4b9599ea data-v-4b9599ea>docker-machine</code> command:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ docker-machine create -d virtualbox testdriven-dev
Running pre-create checks...
Creating machine...
(testdriven-dev) Copying /home/brian/.docker/machine/cache/boot2docker.iso to /home/brian/.docker/machine/machines/testdriven-dev/boot2docker.iso...
(testdriven-dev) Creating VirtualBox VM...
(testdriven-dev) Creating SSH key...
(testdriven-dev) Starting the VM...
(testdriven-dev) Check network to re-create if needed...
(testdriven-dev) Waiting for an IP...
Waiting for machine to be running, this may take a few minutes...
Detecting operating system of created instance...
Waiting for SSH to be available...
Detecting the provisioner...
Provisioning with boot2docker...
Copying certs to the local machine directory...
Copying certs to the remote machine...
Setting Docker configuration on the remote daemon...

This machine has been allocated an IP address, but Docker Machine could not reach it successfully.

SSH for the machine should still work, but connecting to exposed ports, such as the Docker daemon port (usually &lt;ip>:2376), may not work properly.

You may need to add the route manually, or use another related workaround.

This could be due to a VPN, proxy, or host file configuration issue.

You also might want to clear any VirtualBox host only interfaces you are not using.
Checking connection to Docker...
Docker is up and running!
To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: docker-machine env testdriven-dev
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>We see that <code data-v-4b9599ea data-v-4b9599ea>Docker is up and running!</code>, but notice this line:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>This machine has been allocated an IP address, but Docker Machine could not reach it successfully.
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>This might be a problem. I think that the <code data-v-4b9599ea data-v-4b9599ea>docker-machine env &lt;machine-name></code> command fixes this:</p>
<p data-v-4b9599ea data-v-4b9599ea>When you run this command you get the following:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ docker-machine env testdriven-dev
export DOCKER_TLS_VERIFY="1"
export DOCKER_HOST="tcp://192.168.99.100:2376"
export DOCKER_CERT_PATH="/home/brian/.docker/machine/machines/testdriven-dev"
export DOCKER_MACHINE_NAME="testdriven-dev"
# Run this command to configure your shell:
# eval $(docker-machine env testdriven-dev)
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>The result of this command tells us to run `eval $(docker-machine env testdriven-dev):</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>eval "$(docker-machine env testdriven-dev)"
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>To clarify, running the above commands puts adds some environment variables:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ env | grep DOCKER
DOCKER_MACHINE_NAME=testdriven-dev
DOCKER_CERT_PATH=/home/brian/.docker/machine/machines/testdriven-dev
DOCKER_TLS_VERIFY=1
DOCKER_HOST=tcp://192.168.99.100:2376
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Next we need to add a Dockerfile. We will call it <code data-v-4b9599ea data-v-4b9599ea>Dockerfile-dev</code>. Let's look at <code data-v-4b9599ea data-v-4b9599ea>Dockerfile-dev</code> from the tutorial and see how we may need to modify it for the way we set up our project:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>FROM python:3.6.3

# set working directory
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

# add requirements
ADD ./requirements.txt /usr/src/app/requirements.txt

# install requirements
RUN pip install -r requirements.txt

# add app
ADD . /usr/src/app

# run server
CMD python manage.py runserver -h 0.0.0.0
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>We start by defining a base image with the <code data-v-4b9599ea data-v-4b9599ea>FROM</code> line which will give us the correct version of python. We then set folders and the current working directory in docker. Next we install flask add the <code data-v-4b9599ea data-v-4b9599ea>requirements.txt</code> file and install flask with the <code data-v-4b9599ea data-v-4b9599ea>RUN</code> line. We then add the directory (on our local machine) with <code data-v-4b9599ea data-v-4b9599ea>ADD . /usr/src/app</code>.</p>
<p data-v-4b9599ea data-v-4b9599ea>This should all be fine up until the last line where we see a <code data-v-4b9599ea data-v-4b9599ea>manage.py</code> file. We never created this file since we wish to use the Flask CLI. We could try replicating the process did locally inside our Dockerfile. We need to add the the <code data-v-4b9599ea data-v-4b9599ea>FLASK_APP</code> environment variable, and its value should be the script that has just been added to the docker image. Let's try:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>[...]

ENV FLASK_APP /usr/src/app/project/app.py

CMD flask run
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>Next we need a script for <code data-v-4b9599ea data-v-4b9599ea>docker-compose</code>. <code data-v-4b9599ea data-v-4b9599ea>docker-compose</code> is a tool for defining and running multi-container Docker applications. Again, let's look at what was included in the tutorial and then see if we need to make any adjustments:</p>
<p data-v-4b9599ea data-v-4b9599ea><em data-v-4b9599ea data-v-4b9599ea>docker-compose-dev.yml</em> (this file goes in the root directory, one level up from where <code data-v-4b9599ea data-v-4b9599ea>Dockerfile-dev</code>)</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea>version: '3.3'

services:

  users-service:
    container_name: users-service
      build:
        context: ./users-service
        dockerfile: Dockerfile-dev
      volumes:
        - './users-service:/usr/src/app'
      ports:
        - 5001:5000
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>OK, this looks good! Let's give it a try. We can run the following command:</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ docker-compose -f docker-compose-dev.yml build
Building users-service
85b1f47fba49: Pull complete
ba6bd283713a: Pull complete
817c8cd48a09: Pull complete
47cc0ed96dc3: Pull complete
4a36819a59dc: Pull complete
db9a0221399f: Pull complete
7a511a7689b6: Pull complete
1223757f6914: Pull complete
Digest: sha256:db9d8546f3ff74e96702abe0a78a0e0454df6ea898de8f124feba81deea416d7
Status: Downloaded newer image for python:3.6.3
 ---> 79e1dc9af1c1
Step 2/8 : RUN mkdir -p /usr/src/app
 ---> Running in 808f6c0497d3
 ---> 8873e8e0d526
Removing intermediate container 808f6c0497d3
Step 3/8 : WORKDIR /usr/src/app
 ---> 76ef8912b4d5
Removing intermediate container a3ca419fe9c1
Step 4/8 : ADD ./requirements.txt /usr/src/app/requirements.txt
 ---> eb513314527a
Step 5/8 : RUN pip install -r requirements.txt
 ---> Running in 1a708ec3b565
Collecting Flask==0.12.1 (from -r requirements.txt (line 1))
  Downloading Flask-0.12.1-py2.py3-none-any.whl (82kB)
Collecting Jinja2>=2.4 (from Flask==0.12.1->-r requirements.txt (line 1))
  Downloading Jinja2-2.10-py2.py3-none-any.whl (126kB)
Collecting click>=2.0 (from Flask==0.12.1->-r requirements.txt (line 1))
  Downloading click-6.7-py2.py3-none-any.whl (71kB)
Collecting Werkzeug>=0.7 (from Flask==0.12.1->-r requirements.txt (line 1))
  Downloading Werkzeug-0.13-py2.py3-none-any.whl (311kB)
Collecting itsdangerous>=0.21 (from Flask==0.12.1->-r requirements.txt (line 1))
  Downloading itsdangerous-0.24.tar.gz (46kB)
Collecting MarkupSafe>=0.23 (from Jinja2>=2.4->Flask==0.12.1->-r requirements.txt (line 1))
  Downloading MarkupSafe-1.0.tar.gz
Building wheels for collected packages: itsdangerous, MarkupSafe
  Running setup.py bdist_wheel for itsdangerous: started
  Running setup.py bdist_wheel for itsdangerous: finished with status 'done'
  Stored in directory: /root/.cache/pip/wheels/fc/a8/66/24d655233c757e178d45dea2de22a04c6d92766abfb741129a
  Running setup.py bdist_wheel for MarkupSafe: started
  Running setup.py bdist_wheel for MarkupSafe: finished with status 'done'
  Stored in directory: /root/.cache/pip/wheels/88/a7/30/e39a54a87bcbe25308fa3ca64e8ddc75d9b3e5afa21ee32d57
Successfully built itsdangerous MarkupSafe
Installing collected packages: MarkupSafe, Jinja2, click, Werkzeug, itsdangerous, Flask
Successfully installed Flask-0.12.1 Jinja2-2.10 MarkupSafe-1.0 Werkzeug-0.13 click-6.7 itsdangerous-0.24
 ---> d828a0518114
Removing intermediate container 1a708ec3b565
Step 6/8 : ADD . /usr/src/app
 ---> 8e0efae73a47
Step 7/8 : ENV FLASK_APP /usr/src/app/project/app.py
 ---> Running in 959581952d05
 ---> 20aaec61b615
Removing intermediate container 959581952d05
Step 8/8 : CMD flask run
 ---> Running in 4f2fc701ba14
 ---> 1d5b59f3cef2
Removing intermediate container 4f2fc701ba14

Successfully built 1d5b59f3cef2
Successfully tagged testflask_users-service:latest

</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>That seemed to work. Next the tutorial says to run <code data-v-4b9599ea data-v-4b9599ea>docker-compose -f docker-compose-dev.yml up -d</code>. I'll run this without the <code data-v-4b9599ea data-v-4b9599ea>-d</code> flag so we can see if there are any errors. Moment of truth!</p>
<div class="nuxt-content-highlight" data-v-4b9599ea data-v-4b9599ea><pre class="line-numbers language-text" data-v-4b9599ea data-v-4b9599ea><code data-v-4b9599ea data-v-4b9599ea> $ docker-compose -f docker-compose-dev.yml up
Creating network "testflask_default" with the default driver
Creating users-service ...
Creating users-service ... done
Attaching to users-service
users-service    | Usage: flask run [OPTIONS]
users-service    |
users-service    | Error: The file/path provided (/usr/src/app/project/app.py) does not appear to exist.  Please verify the path is correct.  If app is not on PYTHONPATH, ensure the extension is .py
users-service exited with code 2
</code></pre></div>
<p data-v-4b9599ea data-v-4b9599ea>OK, we have an error that seems to have come from our <code data-v-4b9599ea data-v-4b9599ea>flask run</code> command.</p>
<p data-v-4b9599ea data-v-4b9599ea>To bo continued...</p></div> <div class="text-center pb-4 pt-8" data-v-4b9599ea><button class="mc-btn rounded py-1 px-2" data-v-4b9599ea>
        Show Disqus Comments 💬
      </button></div> <!----> <h1 data-v-4b9599ea></h1></div></article> <div class="mx-auto max-w-6xl p-4 lg:px-16 text-center" data-v-27f2d9d4><hr class="mt-4" data-v-27f2d9d4> <div class="mx-auto py-4" data-v-27f2d9d4><div class="pb-4" data-v-27f2d9d4>
      Join my mailing list to get updated whenever I publish a new article.
    </div> <div class="mx-auto" data-v-89248ae4 data-v-27f2d9d4><div id="mc_embed_signup" class="mx-auto w-full md:w-1/2" data-v-89248ae4><form id="mc-embedded-subscribe-form" action="https://github.us2.list-manage.com/subscribe/post?u=43a795784ca963e25903a0da6&id=9937fe4fc5" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate" data-v-89248ae4><div id="mc_embed_signup_scroll" class="grid grid-cols-1 sm:grid-cols-2 gap-4 items-center" data-v-89248ae4><input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Enter your email address" class="rounded mc text-center" data-v-89248ae4> <div aria-hidden="true" style="position:absolute;left:-5000px" data-v-89248ae4><input name="b_43a795784ca963e25903a0da6_9937fe4fc5" tabindex="-1" data-v-89248ae4></div> <div data-v-89248ae4><input id="mc-embedded-subscribe" type="submit" name="subscribe" value="Subscribe" class="mc-btn rounded px-2 py-1 w-full" data-v-89248ae4></div></div></form></div></div></div> <hr data-v-27f2d9d4> <div class="py-4" data-v-27f2d9d4>
    Thanks for checking out my site!
  </div> <div class="pb-4" data-v-27f2d9d4>
    © 2021 Brian Caffey
  </div></div></div></div></div><script defer src="/_nuxt/static/1633840431/2017/12/09/setting-up-flask-cli-with-docker.html/state.js"></script><script src="/_nuxt/4edefe3.js" defer></script><script src="/_nuxt/aa6092f.js" defer></script><script src="/_nuxt/6fd12fd.js" defer></script><script src="/_nuxt/6f69ae2.js" defer></script><script src="/_nuxt/5505ae8.js" defer></script>
  </body>
</html>
