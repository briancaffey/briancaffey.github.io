[{"data":1,"prerenderedAt":1676},["ShallowReactive",2],{"arch-linux-package-data-analysis":3},{"id":4,"title":5,"body":6,"comments":758,"date":1662,"description":1663,"draft":1664,"extension":1665,"external":1666,"image":246,"meta":1667,"navigation":758,"path":1669,"seo":1670,"stem":1671,"tags":1672,"__hash__":1675},"blog/2017/12/02/arch-linux-package-data-analysis.md","Analysis of AUR and Official Arch Repository data",{"type":7,"value":8,"toc":1655},"minimark",[9,18,28,33,41,48,232,235,239,242,247,250,261,278,298,301,309,312,315,344,347,352,403,408,423,428,457,462,526,531,568,588,669,672,676,692,702,705,708,1105,1109,1112,1117,1120,1486,1490,1493,1498,1643,1651],[10,11,12,13,17],"p",{},"Arch Linux provides packages through the official Arch Linux repositories and the Arch User Repository (AUR). I recently gathered data on ~50,000 packages from these repositories on ",[14,15,16],"a",{"href":16},"archlinux.org"," to better understand the makeup of the packages. In this article I will share some visualizations I made as well as some key takeaways about the data set I gathered.",[10,19,20,21,27],{},"The repo with all of the data I collected as well as the code I used to do so is available in ",[14,22,26],{"href":23,"rel":24},"https://github.com/briancaffey/AUR-data",[25],"nofollow","this repository"," on my Github account.",[29,30,32],"h2",{"id":31},"growth-of-the-aur","Growth of the AUR",[10,34,35,36,40],{},"The first questions I had about the dataset were about visualizing the growth of the AUR over time. Each package in the AUR has a ",[37,38,39],"code",{},"First Submitted"," date, so I was able to put this together easily:",[10,42,43],{},[44,45],"img",{"alt":46,"src":47},"png","/static/aur/aur_packages.png",[49,50,55],"pre",{"className":51,"code":52,"language":53,"meta":54,"style":54},"language-python shiki shiki-themes github-light github-dark monokai","sns.set()\ndf = df[df['First Submitted'].notnull()]\ndf[\"First Submitted\"] = pd.to_datetime(df['First Submitted'])\nlist_of_dates = df[\"First Submitted\"].sort_values()\ncounts = np.arange(0, len(list_of_dates))\nplt.figure(figsize=(10, 5))\n_ = plt.plot(list_of_dates, counts)\n_ = plt.title('AUR Packages over time')\n_ = plt.xlabel('Date')\n_ = plt.ylabel('Packages')\n","python","",[37,56,57,66,86,108,124,149,175,186,202,217],{"__ignoreMap":54},[58,59,62],"span",{"class":60,"line":61},"line",1,[58,63,65],{"class":64},"sMOD_","sns.set()\n",[58,67,69,72,76,79,83],{"class":60,"line":68},2,[58,70,71],{"class":64},"df ",[58,73,75],{"class":74},"sC2Qs","=",[58,77,78],{"class":64}," df[df[",[58,80,82],{"class":81},"sstjo","'First Submitted'",[58,84,85],{"class":64},"].notnull()]\n",[58,87,89,92,95,98,100,103,105],{"class":60,"line":88},3,[58,90,91],{"class":64},"df[",[58,93,94],{"class":81},"\"First Submitted\"",[58,96,97],{"class":64},"] ",[58,99,75],{"class":74},[58,101,102],{"class":64}," pd.to_datetime(df[",[58,104,82],{"class":81},[58,106,107],{"class":64},"])\n",[58,109,111,114,116,119,121],{"class":60,"line":110},4,[58,112,113],{"class":64},"list_of_dates ",[58,115,75],{"class":74},[58,117,118],{"class":64}," df[",[58,120,94],{"class":81},[58,122,123],{"class":64},"].sort_values()\n",[58,125,127,130,132,135,139,142,146],{"class":60,"line":126},5,[58,128,129],{"class":64},"counts ",[58,131,75],{"class":74},[58,133,134],{"class":64}," np.arange(",[58,136,138],{"class":137},"s7F3e","0",[58,140,141],{"class":64},", ",[58,143,145],{"class":144},"sTrkL","len",[58,147,148],{"class":64},"(list_of_dates))\n",[58,150,152,155,159,161,164,167,169,172],{"class":60,"line":151},6,[58,153,154],{"class":64},"plt.figure(",[58,156,158],{"class":157},"sTHNf","figsize",[58,160,75],{"class":74},[58,162,163],{"class":64},"(",[58,165,166],{"class":137},"10",[58,168,141],{"class":64},[58,170,171],{"class":137},"5",[58,173,174],{"class":64},"))\n",[58,176,178,181,183],{"class":60,"line":177},7,[58,179,180],{"class":64},"_ ",[58,182,75],{"class":74},[58,184,185],{"class":64}," plt.plot(list_of_dates, counts)\n",[58,187,189,191,193,196,199],{"class":60,"line":188},8,[58,190,180],{"class":64},[58,192,75],{"class":74},[58,194,195],{"class":64}," plt.title(",[58,197,198],{"class":81},"'AUR Packages over time'",[58,200,201],{"class":64},")\n",[58,203,205,207,209,212,215],{"class":60,"line":204},9,[58,206,180],{"class":64},[58,208,75],{"class":74},[58,210,211],{"class":64}," plt.xlabel(",[58,213,214],{"class":81},"'Date'",[58,216,201],{"class":64},[58,218,220,222,224,227,230],{"class":60,"line":219},10,[58,221,180],{"class":64},[58,223,75],{"class":74},[58,225,226],{"class":64}," plt.ylabel(",[58,228,229],{"class":81},"'Packages'",[58,231,201],{"class":64},[10,233,234],{},"It looks like there was a big boost in the number of packages submitted in mid-2015 and that number has been growing consistantly since then.",[29,236,238],{"id":237},"official-repositories","Official Repositories",[10,240,241],{},"The official repositories contain just under 10,000 packages. Here is a force-directed graph (undirected graph) in D3.js that shows these packages as nodes and package dependencies as edges. This image shows a sample of about 1,000 packages and it is somewhat representative of the whole graph show further below.",[10,243,244],{},[44,245],{"alt":46,"src":246},"/static/aur/official_repos.png",[10,248,249],{},"There are four main repo in the official repositories:",[251,252,253],"ul",{},[254,255,256,260],"li",{},[257,258,259],"strong",{},"core"," contains packages for:",[251,262,263,266,269,272,275],{},[254,264,265],{},"booting Arch Linux",[254,267,268],{},"connecting to the Internet",[254,270,271],{},"building packages",[254,273,274],{},"management and repair of supported file systems",[254,276,277],{},"the system setup process (e.g. openssh)",[251,279,280,286,292],{},[254,281,282,285],{},[257,283,284],{},"extra"," contains all packages that do not fit in core. Example: Xorg, window managers, web browsers, media players, tools for working with languages such as Python and Ruby, and a lot more.",[254,287,288,291],{},[257,289,290],{},"community"," contains packages that have been adopted by Trusted Users from the Arch User Repository. Some of these packages may eventually make the transition to the core or extra repositories as the developers consider them crucial to the distribution.",[254,293,294,297],{},[257,295,296],{},"multilib"," contains 32 bit software and libraries that can be used to run and build 32 bit applications on 64 bit installs (e.g. wine, steam, etc).",[10,299,300],{},"Here is an SVG showing all packages in the official repository. Click on the image to explore the SVG in more detail, and you can hover over nodes to see which packages they represent.",[10,302,303],{},[14,304,306],{"href":305},"/static/aur/graph.svg",[44,307],{"alt":308,"src":305},"svg",[10,310,311],{},"Turn off the lights and you can see a ring of packages orbiting in a circle!",[313,314],"color-mode-picker",{},[10,316,317,318,321,322,141,324,327,328,331,332,335,336,339,340,343],{},"If you look at this file in detail you can find some interesting clusters of packages. The \"island\" in the top left includes mostly Haskell packages and ",[37,319,320],{},"pandoc",". ",[37,323,53],{},[37,325,326],{},"python2",", and ",[37,329,330],{},"git"," are three of the main central hubs in the middle cluster. ",[37,333,334],{},"perl"," and other related packages make of most of the bottom right cluster and you can see \"flowers\" of package dependencies mostly for internationalization for popular programs like ",[37,337,338],{},"firefox"," and ",[37,341,342],{},"thunderbird",".",[10,345,346],{},"To make this interactive graph and SVG images I did the following:",[251,348,349],{},[254,350,351],{},"Create a dictionary from my data base with packages keys and a list of dependencies as values:",[49,353,355],{"className":51,"code":354,"language":53,"meta":54,"style":54},"graph_dict = {}\nfor _, i in df.iterrows():\n    graph_dict[i[\"package_name\"]] = i[\"pkgdeps\"]\n",[37,356,357,367,381],{"__ignoreMap":54},[58,358,359,362,364],{"class":60,"line":61},[58,360,361],{"class":64},"graph_dict ",[58,363,75],{"class":74},[58,365,366],{"class":64}," {}\n",[58,368,369,372,375,378],{"class":60,"line":68},[58,370,371],{"class":74},"for",[58,373,374],{"class":64}," _, i ",[58,376,377],{"class":74},"in",[58,379,380],{"class":64}," df.iterrows():\n",[58,382,383,386,389,392,394,397,400],{"class":60,"line":88},[58,384,385],{"class":64},"    graph_dict[i[",[58,387,388],{"class":81},"\"package_name\"",[58,390,391],{"class":64},"]] ",[58,393,75],{"class":74},[58,395,396],{"class":64}," i[",[58,398,399],{"class":81},"\"pkgdeps\"",[58,401,402],{"class":64},"]\n",[251,404,405],{},[254,406,407],{},"Create a NetworkX graph with the dictionary created in the previous step:",[49,409,411],{"className":51,"code":410,"language":53,"meta":54,"style":54},"G = nx.Graph(graph_dict)\n",[37,412,413],{"__ignoreMap":54},[58,414,415,418,420],{"class":60,"line":61},[58,416,417],{"class":64},"G ",[58,419,75],{"class":74},[58,421,422],{"class":64}," nx.Graph(graph_dict)\n",[251,424,425],{},[254,426,427],{},"Export the NetworkX graph to JSON using a built-in NetworkX function:",[49,429,431],{"className":51,"code":430,"language":53,"meta":54,"style":54},"from networkx.readwrite import json_graph\ndata = json_graph.node_link_data(G)\n",[37,432,433,447],{"__ignoreMap":54},[58,434,435,438,441,444],{"class":60,"line":61},[58,436,437],{"class":74},"from",[58,439,440],{"class":64}," networkx.readwrite ",[58,442,443],{"class":74},"import",[58,445,446],{"class":64}," json_graph\n",[58,448,449,452,454],{"class":60,"line":68},[58,450,451],{"class":64},"data ",[58,453,75],{"class":74},[58,455,456],{"class":64}," json_graph.node_link_data(G)\n",[251,458,459],{},[254,460,461],{},"Add a group number to each node element cooresponding to the repository it belongs to.",[49,463,465],{"className":51,"code":464,"language":53,"meta":54,"style":54},"for n in data['nodes']:\n    n['group'] = int(df.loc[(df.package_name == n[\"id\"]), \"repo_number\"].iloc[0])\n",[37,466,467,485],{"__ignoreMap":54},[58,468,469,471,474,476,479,482],{"class":60,"line":61},[58,470,371],{"class":74},[58,472,473],{"class":64}," n ",[58,475,377],{"class":74},[58,477,478],{"class":64}," data[",[58,480,481],{"class":81},"'nodes'",[58,483,484],{"class":64},"]:\n",[58,486,487,490,493,495,497,501,504,507,510,513,516,519,522,524],{"class":60,"line":68},[58,488,489],{"class":64},"    n[",[58,491,492],{"class":81},"'group'",[58,494,97],{"class":64},[58,496,75],{"class":74},[58,498,500],{"class":499},"s-m8C"," int",[58,502,503],{"class":64},"(df.loc[(df.package_name ",[58,505,506],{"class":74},"==",[58,508,509],{"class":64}," n[",[58,511,512],{"class":81},"\"id\"",[58,514,515],{"class":64},"]), ",[58,517,518],{"class":81},"\"repo_number\"",[58,520,521],{"class":64},"].iloc[",[58,523,138],{"class":137},[58,525,107],{"class":64},[251,527,528],{},[254,529,530],{},"Save the JSON to a file:",[49,532,534],{"className":51,"code":533,"language":53,"meta":54,"style":54},"with open('/home/brian/Documents/github/briancaffey.github.io/aur/data.json', 'w') as outfile:\n    json.dump(data, outfile)\n",[37,535,536,563],{"__ignoreMap":54},[58,537,538,541,544,546,549,551,554,557,560],{"class":60,"line":61},[58,539,540],{"class":74},"with",[58,542,543],{"class":144}," open",[58,545,163],{"class":64},[58,547,548],{"class":81},"'/home/brian/Documents/github/briancaffey.github.io/aur/data.json'",[58,550,141],{"class":64},[58,552,553],{"class":81},"'w'",[58,555,556],{"class":64},") ",[58,558,559],{"class":74},"as",[58,561,562],{"class":64}," outfile:\n",[58,564,565],{"class":60,"line":68},[58,566,567],{"class":64},"    json.dump(data, outfile)\n",[251,569,570,579],{},[254,571,572,573,578],{},"Feed the JSON file into ",[14,574,577],{"href":575,"rel":576},"https://bl.ocks.org/mbostock/4062045",[25],"this template"," which renders a D3.js force-directed graph.",[254,580,581,582,587],{},"To save the graph as a SVG file, I ran the ",[14,583,586],{"href":584,"rel":585},"https://graphicdesign.stackexchange.com/questions/55123/how-do-i-save-an-svg-thats-on-a-website-to-my-computer",[25],"NYT crowbar script"," in the browser console:",[49,589,593],{"className":590,"code":591,"language":592,"meta":54,"style":54},"language-javascript shiki shiki-themes github-light github-dark monokai","var e = document.createElement('script')\ne.setAttribute('src', 'https://nytimes.github.io/svg-crowbar/svg-crowbar.js')\ne.setAttribute('class', 'svg-crowbar')\ndocument.body.appendChild(e)\n","javascript",[37,594,595,620,640,658],{"__ignoreMap":54},[58,596,597,601,604,606,609,613,615,618],{"class":60,"line":61},[58,598,600],{"class":599},"sq6CD","var",[58,602,603],{"class":64}," e ",[58,605,75],{"class":74},[58,607,608],{"class":64}," document.",[58,610,612],{"class":611},"srTi1","createElement",[58,614,163],{"class":64},[58,616,617],{"class":81},"'script'",[58,619,201],{"class":64},[58,621,622,625,628,630,633,635,638],{"class":60,"line":68},[58,623,624],{"class":64},"e.",[58,626,627],{"class":611},"setAttribute",[58,629,163],{"class":64},[58,631,632],{"class":81},"'src'",[58,634,141],{"class":64},[58,636,637],{"class":81},"'https://nytimes.github.io/svg-crowbar/svg-crowbar.js'",[58,639,201],{"class":64},[58,641,642,644,646,648,651,653,656],{"class":60,"line":88},[58,643,624],{"class":64},[58,645,627],{"class":611},[58,647,163],{"class":64},[58,649,650],{"class":81},"'class'",[58,652,141],{"class":64},[58,654,655],{"class":81},"'svg-crowbar'",[58,657,201],{"class":64},[58,659,660,663,666],{"class":60,"line":110},[58,661,662],{"class":64},"document.body.",[58,664,665],{"class":611},"appendChild",[58,667,668],{"class":64},"(e)\n",[10,670,671],{},"Let's take one more look at how tightly",[29,673,675],{"id":674},"official-repository-package-sizes","Official Repository Package Sizes",[10,677,678,679,339,682,685,686,688,689,691],{},"Official Packages include both a ",[37,680,681],{},"Package Size",[37,683,684],{},"Installed Size",". Here is a Bokeh plot showing ",[37,687,681],{}," vs. ",[37,690,684],{},":",[10,693,694,697,698,701],{},[257,695,696],{},"Warning",": Don't hover directly over the cluster of plotted points near the origin of the graph. ",[257,699,700],{},"DOING SO WILL CRASH YOUR BROWSER",". This is because the hover tool will attempt to display all packages that you are hovered over and it may be far too many for the browser to handle. Carefully zoom in using the scroll tool and you can find some interesting trends in the types of packages and how much they are able to be compressed.",[10,703,704],{},"{% include package_sizes.html %}",[10,706,707],{},"Here's the setup for this bokeh graph:",[49,709,711],{"className":51,"code":710,"language":53,"meta":54,"style":54},"from bokeh.plotting import figure, output_file, show, ColumnDataSource\nfrom bokeh.models import HoverTool\nfrom bokeh.io import output_notebook\noutput_notebook()\n\noutput_file(\"/home/brian/Documents/github/briancaffey.github.io/_includes/package_sizes.html\")\n\nsource = ColumnDataSource(\n        data=dict(\n            x=df.package_size,\n            y=df.installed_size,\n            desc=df.Description,\n            name=df.package_name\n        )\n    )\n\nhover = HoverTool(\n        tooltips=[\n            (\"Name\", \"@name\"),\n            (\"Package Size\", \"@x MB\"),\n            (\"Installed Size\", \"@y MB\"),\n            (\"Description\", \"@desc\"),\n        ]\n    )\n\nTOOLS = 'box_zoom,box_select,reset,pan,wheel_zoom'\n\np = figure(plot_width=400, plot_height=400, tools=[TOOLS, hover],\n           title=\"Packages Size vs. Installed Size\", sizing_mode='scale_width')\n\np.circle('x', 'y', size=5, source=source, alpha=0.2)\np.toolbar.logo = None\nshow(p)\n",[37,712,713,725,737,749,754,760,770,774,784,797,807,818,829,840,846,852,857,868,879,896,911,926,941,947,952,957,969,974,1017,1040,1045,1088,1099],{"__ignoreMap":54},[58,714,715,717,720,722],{"class":60,"line":61},[58,716,437],{"class":74},[58,718,719],{"class":64}," bokeh.plotting ",[58,721,443],{"class":74},[58,723,724],{"class":64}," figure, output_file, show, ColumnDataSource\n",[58,726,727,729,732,734],{"class":60,"line":68},[58,728,437],{"class":74},[58,730,731],{"class":64}," bokeh.models ",[58,733,443],{"class":74},[58,735,736],{"class":64}," HoverTool\n",[58,738,739,741,744,746],{"class":60,"line":88},[58,740,437],{"class":74},[58,742,743],{"class":64}," bokeh.io ",[58,745,443],{"class":74},[58,747,748],{"class":64}," output_notebook\n",[58,750,751],{"class":60,"line":110},[58,752,753],{"class":64},"output_notebook()\n",[58,755,756],{"class":60,"line":126},[58,757,759],{"emptyLinePlaceholder":758},true,"\n",[58,761,762,765,768],{"class":60,"line":151},[58,763,764],{"class":64},"output_file(",[58,766,767],{"class":81},"\"/home/brian/Documents/github/briancaffey.github.io/_includes/package_sizes.html\"",[58,769,201],{"class":64},[58,771,772],{"class":60,"line":177},[58,773,759],{"emptyLinePlaceholder":758},[58,775,776,779,781],{"class":60,"line":188},[58,777,778],{"class":64},"source ",[58,780,75],{"class":74},[58,782,783],{"class":64}," ColumnDataSource(\n",[58,785,786,789,791,794],{"class":60,"line":204},[58,787,788],{"class":157},"        data",[58,790,75],{"class":74},[58,792,793],{"class":499},"dict",[58,795,796],{"class":64},"(\n",[58,798,799,802,804],{"class":60,"line":219},[58,800,801],{"class":157},"            x",[58,803,75],{"class":74},[58,805,806],{"class":64},"df.package_size,\n",[58,808,810,813,815],{"class":60,"line":809},11,[58,811,812],{"class":157},"            y",[58,814,75],{"class":74},[58,816,817],{"class":64},"df.installed_size,\n",[58,819,821,824,826],{"class":60,"line":820},12,[58,822,823],{"class":157},"            desc",[58,825,75],{"class":74},[58,827,828],{"class":64},"df.Description,\n",[58,830,832,835,837],{"class":60,"line":831},13,[58,833,834],{"class":157},"            name",[58,836,75],{"class":74},[58,838,839],{"class":64},"df.package_name\n",[58,841,843],{"class":60,"line":842},14,[58,844,845],{"class":64},"        )\n",[58,847,849],{"class":60,"line":848},15,[58,850,851],{"class":64},"    )\n",[58,853,855],{"class":60,"line":854},16,[58,856,759],{"emptyLinePlaceholder":758},[58,858,860,863,865],{"class":60,"line":859},17,[58,861,862],{"class":64},"hover ",[58,864,75],{"class":74},[58,866,867],{"class":64}," HoverTool(\n",[58,869,871,874,876],{"class":60,"line":870},18,[58,872,873],{"class":157},"        tooltips",[58,875,75],{"class":74},[58,877,878],{"class":64},"[\n",[58,880,882,885,888,890,893],{"class":60,"line":881},19,[58,883,884],{"class":64},"            (",[58,886,887],{"class":81},"\"Name\"",[58,889,141],{"class":64},[58,891,892],{"class":81},"\"@name\"",[58,894,895],{"class":64},"),\n",[58,897,899,901,904,906,909],{"class":60,"line":898},20,[58,900,884],{"class":64},[58,902,903],{"class":81},"\"Package Size\"",[58,905,141],{"class":64},[58,907,908],{"class":81},"\"@x MB\"",[58,910,895],{"class":64},[58,912,914,916,919,921,924],{"class":60,"line":913},21,[58,915,884],{"class":64},[58,917,918],{"class":81},"\"Installed Size\"",[58,920,141],{"class":64},[58,922,923],{"class":81},"\"@y MB\"",[58,925,895],{"class":64},[58,927,929,931,934,936,939],{"class":60,"line":928},22,[58,930,884],{"class":64},[58,932,933],{"class":81},"\"Description\"",[58,935,141],{"class":64},[58,937,938],{"class":81},"\"@desc\"",[58,940,895],{"class":64},[58,942,944],{"class":60,"line":943},23,[58,945,946],{"class":64},"        ]\n",[58,948,950],{"class":60,"line":949},24,[58,951,851],{"class":64},[58,953,955],{"class":60,"line":954},25,[58,956,759],{"emptyLinePlaceholder":758},[58,958,960,963,966],{"class":60,"line":959},26,[58,961,962],{"class":137},"TOOLS",[58,964,965],{"class":74}," =",[58,967,968],{"class":81}," 'box_zoom,box_select,reset,pan,wheel_zoom'\n",[58,970,972],{"class":60,"line":971},27,[58,973,759],{"emptyLinePlaceholder":758},[58,975,977,980,982,985,988,990,993,995,998,1000,1002,1004,1007,1009,1012,1014],{"class":60,"line":976},28,[58,978,979],{"class":64},"p ",[58,981,75],{"class":74},[58,983,984],{"class":64}," figure(",[58,986,987],{"class":157},"plot_width",[58,989,75],{"class":74},[58,991,992],{"class":137},"400",[58,994,141],{"class":64},[58,996,997],{"class":157},"plot_height",[58,999,75],{"class":74},[58,1001,992],{"class":137},[58,1003,141],{"class":64},[58,1005,1006],{"class":157},"tools",[58,1008,75],{"class":74},[58,1010,1011],{"class":64},"[",[58,1013,962],{"class":137},[58,1015,1016],{"class":64},", hover],\n",[58,1018,1020,1023,1025,1028,1030,1033,1035,1038],{"class":60,"line":1019},29,[58,1021,1022],{"class":157},"           title",[58,1024,75],{"class":74},[58,1026,1027],{"class":81},"\"Packages Size vs. Installed Size\"",[58,1029,141],{"class":64},[58,1031,1032],{"class":157},"sizing_mode",[58,1034,75],{"class":74},[58,1036,1037],{"class":81},"'scale_width'",[58,1039,201],{"class":64},[58,1041,1043],{"class":60,"line":1042},30,[58,1044,759],{"emptyLinePlaceholder":758},[58,1046,1048,1051,1054,1056,1059,1061,1064,1066,1068,1070,1073,1075,1078,1081,1083,1086],{"class":60,"line":1047},31,[58,1049,1050],{"class":64},"p.circle(",[58,1052,1053],{"class":81},"'x'",[58,1055,141],{"class":64},[58,1057,1058],{"class":81},"'y'",[58,1060,141],{"class":64},[58,1062,1063],{"class":157},"size",[58,1065,75],{"class":74},[58,1067,171],{"class":137},[58,1069,141],{"class":64},[58,1071,1072],{"class":157},"source",[58,1074,75],{"class":74},[58,1076,1077],{"class":64},"source, ",[58,1079,1080],{"class":157},"alpha",[58,1082,75],{"class":74},[58,1084,1085],{"class":137},"0.2",[58,1087,201],{"class":64},[58,1089,1091,1094,1096],{"class":60,"line":1090},32,[58,1092,1093],{"class":64},"p.toolbar.logo ",[58,1095,75],{"class":74},[58,1097,1098],{"class":137}," None\n",[58,1100,1102],{"class":60,"line":1101},33,[58,1103,1104],{"class":64},"show(p)\n",[29,1106,1108],{"id":1107},"aur-word-cloud","AUR Word Cloud",[10,1110,1111],{},"Let's make a word cloud out of text descriptions for packages in the AUR.",[10,1113,1114],{},[44,1115],{"alt":46,"src":1116},"/static/aur/word_cloud.png",[10,1118,1119],{},"We can use a popular python package for making word clouds. Here's the code:",[49,1121,1123],{"className":51,"code":1122,"language":53,"meta":54,"style":54},"import numpy as np\nfrom PIL import Image\nfrom os import path\nimport matplotlib.pyplot as plt\nimport random\n\nfrom wordcloud import WordCloud, STOPWORDS\n\ndef grey_color_func(word, font_size, position, orientation, random_state=None,\n                    **kwargs):\n    return \"hsl(0, 0%%, %d%%)\" % random.randint(60, 100)\n\nmask = np.array(Image.open(\"/home/brian/Documents/aur/images/arch_logo.png\"))\n\ntext = open(\"/home/brian/Documents/aur/ipynb/package_descriptions.txt\").read()\n\nwc = WordCloud(max_words=1000, mask=mask, stopwords=stopwords, margin=10,\n               random_state=1).generate(text)\n\ndefault_colors = wc.to_array()\nplt.figure(figsize=(20, 20))\nplt.imshow(wc.recolor(color_func=grey_color_func, random_state=3),\n           interpolation=\"bilinear\")\nwc.to_file(\"arch_word_cloud.png\")\nplt.axis(\"off\")\nplt.show()\n",[37,1124,1125,1137,1150,1162,1174,1181,1185,1200,1204,1246,1257,1292,1296,1311,1315,1332,1336,1381,1394,1398,1408,1427,1449,1461,1471,1481],{"__ignoreMap":54},[58,1126,1127,1129,1132,1134],{"class":60,"line":61},[58,1128,443],{"class":74},[58,1130,1131],{"class":64}," numpy ",[58,1133,559],{"class":74},[58,1135,1136],{"class":64}," np\n",[58,1138,1139,1141,1144,1147],{"class":60,"line":68},[58,1140,437],{"class":74},[58,1142,1143],{"class":137}," PIL",[58,1145,1146],{"class":74}," import",[58,1148,1149],{"class":64}," Image\n",[58,1151,1152,1154,1157,1159],{"class":60,"line":88},[58,1153,437],{"class":74},[58,1155,1156],{"class":64}," os ",[58,1158,443],{"class":74},[58,1160,1161],{"class":64}," path\n",[58,1163,1164,1166,1169,1171],{"class":60,"line":110},[58,1165,443],{"class":74},[58,1167,1168],{"class":64}," matplotlib.pyplot ",[58,1170,559],{"class":74},[58,1172,1173],{"class":64}," plt\n",[58,1175,1176,1178],{"class":60,"line":126},[58,1177,443],{"class":74},[58,1179,1180],{"class":64}," random\n",[58,1182,1183],{"class":60,"line":151},[58,1184,759],{"emptyLinePlaceholder":758},[58,1186,1187,1189,1192,1194,1197],{"class":60,"line":177},[58,1188,437],{"class":74},[58,1190,1191],{"class":64}," wordcloud ",[58,1193,443],{"class":74},[58,1195,1196],{"class":64}," WordCloud, ",[58,1198,1199],{"class":137},"STOPWORDS\n",[58,1201,1202],{"class":60,"line":188},[58,1203,759],{"emptyLinePlaceholder":758},[58,1205,1206,1209,1212,1214,1218,1220,1223,1225,1228,1230,1233,1235,1238,1240,1243],{"class":60,"line":204},[58,1207,1208],{"class":599},"def",[58,1210,1211],{"class":611}," grey_color_func",[58,1213,163],{"class":64},[58,1215,1217],{"class":1216},"so59x","word",[58,1219,141],{"class":64},[58,1221,1222],{"class":1216},"font_size",[58,1224,141],{"class":64},[58,1226,1227],{"class":1216},"position",[58,1229,141],{"class":64},[58,1231,1232],{"class":1216},"orientation",[58,1234,141],{"class":64},[58,1236,1237],{"class":1216},"random_state",[58,1239,75],{"class":74},[58,1241,1242],{"class":137},"None",[58,1244,1245],{"class":64},",\n",[58,1247,1248,1251,1254],{"class":60,"line":219},[58,1249,1250],{"class":74},"                    **",[58,1252,1253],{"class":1216},"kwargs",[58,1255,1256],{"class":64},"):\n",[58,1258,1259,1262,1265,1268,1270,1273,1276,1279,1282,1285,1287,1290],{"class":60,"line":809},[58,1260,1261],{"class":74},"    return",[58,1263,1264],{"class":81}," \"hsl(0, 0",[58,1266,1267],{"class":137},"%%",[58,1269,141],{"class":81},[58,1271,1272],{"class":137},"%d%%",[58,1274,1275],{"class":81},")\"",[58,1277,1278],{"class":74}," %",[58,1280,1281],{"class":64}," random.randint(",[58,1283,1284],{"class":137},"60",[58,1286,141],{"class":64},[58,1288,1289],{"class":137},"100",[58,1291,201],{"class":64},[58,1293,1294],{"class":60,"line":820},[58,1295,759],{"emptyLinePlaceholder":758},[58,1297,1298,1301,1303,1306,1309],{"class":60,"line":831},[58,1299,1300],{"class":64},"mask ",[58,1302,75],{"class":74},[58,1304,1305],{"class":64}," np.array(Image.open(",[58,1307,1308],{"class":81},"\"/home/brian/Documents/aur/images/arch_logo.png\"",[58,1310,174],{"class":64},[58,1312,1313],{"class":60,"line":842},[58,1314,759],{"emptyLinePlaceholder":758},[58,1316,1317,1320,1322,1324,1326,1329],{"class":60,"line":848},[58,1318,1319],{"class":64},"text ",[58,1321,75],{"class":74},[58,1323,543],{"class":144},[58,1325,163],{"class":64},[58,1327,1328],{"class":81},"\"/home/brian/Documents/aur/ipynb/package_descriptions.txt\"",[58,1330,1331],{"class":64},").read()\n",[58,1333,1334],{"class":60,"line":854},[58,1335,759],{"emptyLinePlaceholder":758},[58,1337,1338,1341,1343,1346,1349,1351,1354,1356,1359,1361,1364,1367,1369,1372,1375,1377,1379],{"class":60,"line":859},[58,1339,1340],{"class":64},"wc ",[58,1342,75],{"class":74},[58,1344,1345],{"class":64}," WordCloud(",[58,1347,1348],{"class":157},"max_words",[58,1350,75],{"class":74},[58,1352,1353],{"class":137},"1000",[58,1355,141],{"class":64},[58,1357,1358],{"class":157},"mask",[58,1360,75],{"class":74},[58,1362,1363],{"class":64},"mask, ",[58,1365,1366],{"class":157},"stopwords",[58,1368,75],{"class":74},[58,1370,1371],{"class":64},"stopwords, ",[58,1373,1374],{"class":157},"margin",[58,1376,75],{"class":74},[58,1378,166],{"class":137},[58,1380,1245],{"class":64},[58,1382,1383,1386,1388,1391],{"class":60,"line":870},[58,1384,1385],{"class":157},"               random_state",[58,1387,75],{"class":74},[58,1389,1390],{"class":137},"1",[58,1392,1393],{"class":64},").generate(text)\n",[58,1395,1396],{"class":60,"line":881},[58,1397,759],{"emptyLinePlaceholder":758},[58,1399,1400,1403,1405],{"class":60,"line":898},[58,1401,1402],{"class":64},"default_colors ",[58,1404,75],{"class":74},[58,1406,1407],{"class":64}," wc.to_array()\n",[58,1409,1410,1412,1414,1416,1418,1421,1423,1425],{"class":60,"line":913},[58,1411,154],{"class":64},[58,1413,158],{"class":157},[58,1415,75],{"class":74},[58,1417,163],{"class":64},[58,1419,1420],{"class":137},"20",[58,1422,141],{"class":64},[58,1424,1420],{"class":137},[58,1426,174],{"class":64},[58,1428,1429,1432,1435,1437,1440,1442,1444,1447],{"class":60,"line":928},[58,1430,1431],{"class":64},"plt.imshow(wc.recolor(",[58,1433,1434],{"class":157},"color_func",[58,1436,75],{"class":74},[58,1438,1439],{"class":64},"grey_color_func, ",[58,1441,1237],{"class":157},[58,1443,75],{"class":74},[58,1445,1446],{"class":137},"3",[58,1448,895],{"class":64},[58,1450,1451,1454,1456,1459],{"class":60,"line":943},[58,1452,1453],{"class":157},"           interpolation",[58,1455,75],{"class":74},[58,1457,1458],{"class":81},"\"bilinear\"",[58,1460,201],{"class":64},[58,1462,1463,1466,1469],{"class":60,"line":949},[58,1464,1465],{"class":64},"wc.to_file(",[58,1467,1468],{"class":81},"\"arch_word_cloud.png\"",[58,1470,201],{"class":64},[58,1472,1473,1476,1479],{"class":60,"line":954},[58,1474,1475],{"class":64},"plt.axis(",[58,1477,1478],{"class":81},"\"off\"",[58,1480,201],{"class":64},[58,1482,1483],{"class":60,"line":959},[58,1484,1485],{"class":64},"plt.show()\n",[29,1487,1489],{"id":1488},"arch-wiki-members","Arch Wiki Members",[10,1491,1492],{},"The Arch wiki is the first place I go for troubleshooting any issue with Arch. Users of other Linux distributions have also said how useful it can be even if you don't user Arch Linux. Here's a look at the number of registered users on the Arch Wiki over time:",[10,1494,1495],{},[44,1496],{"alt":46,"src":1497},"/static/aur/wiki_users.png",[49,1499,1501],{"className":51,"code":1500,"language":53,"meta":54,"style":54},"sns.set()\ndf = df[df['registered'].notnull()]\ndf[\"registered\"] = pd.to_datetime(df['registered'])\nlist_of_dates = df[\"registered\"].sort_values()\ncounts = np.arange(0, len(list_of_dates))\nplt.figure(figsize=(10, 5))\n_ = plt.plot(list_of_dates, counts)\n_ = plt.title('Registered Arch Wiki members over time')\n_ = plt.xlabel('Date')\n_ = plt.ylabel('Members')\nplt.show()\nplt.savefig('/home/brian/Documents/github/briancaffey.github.io/aur/wiki_users.png')\n",[37,1502,1503,1507,1520,1537,1549,1565,1583,1591,1604,1616,1629,1633],{"__ignoreMap":54},[58,1504,1505],{"class":60,"line":61},[58,1506,65],{"class":64},[58,1508,1509,1511,1513,1515,1518],{"class":60,"line":68},[58,1510,71],{"class":64},[58,1512,75],{"class":74},[58,1514,78],{"class":64},[58,1516,1517],{"class":81},"'registered'",[58,1519,85],{"class":64},[58,1521,1522,1524,1527,1529,1531,1533,1535],{"class":60,"line":88},[58,1523,91],{"class":64},[58,1525,1526],{"class":81},"\"registered\"",[58,1528,97],{"class":64},[58,1530,75],{"class":74},[58,1532,102],{"class":64},[58,1534,1517],{"class":81},[58,1536,107],{"class":64},[58,1538,1539,1541,1543,1545,1547],{"class":60,"line":110},[58,1540,113],{"class":64},[58,1542,75],{"class":74},[58,1544,118],{"class":64},[58,1546,1526],{"class":81},[58,1548,123],{"class":64},[58,1550,1551,1553,1555,1557,1559,1561,1563],{"class":60,"line":126},[58,1552,129],{"class":64},[58,1554,75],{"class":74},[58,1556,134],{"class":64},[58,1558,138],{"class":137},[58,1560,141],{"class":64},[58,1562,145],{"class":144},[58,1564,148],{"class":64},[58,1566,1567,1569,1571,1573,1575,1577,1579,1581],{"class":60,"line":151},[58,1568,154],{"class":64},[58,1570,158],{"class":157},[58,1572,75],{"class":74},[58,1574,163],{"class":64},[58,1576,166],{"class":137},[58,1578,141],{"class":64},[58,1580,171],{"class":137},[58,1582,174],{"class":64},[58,1584,1585,1587,1589],{"class":60,"line":177},[58,1586,180],{"class":64},[58,1588,75],{"class":74},[58,1590,185],{"class":64},[58,1592,1593,1595,1597,1599,1602],{"class":60,"line":188},[58,1594,180],{"class":64},[58,1596,75],{"class":74},[58,1598,195],{"class":64},[58,1600,1601],{"class":81},"'Registered Arch Wiki members over time'",[58,1603,201],{"class":64},[58,1605,1606,1608,1610,1612,1614],{"class":60,"line":204},[58,1607,180],{"class":64},[58,1609,75],{"class":74},[58,1611,211],{"class":64},[58,1613,214],{"class":81},[58,1615,201],{"class":64},[58,1617,1618,1620,1622,1624,1627],{"class":60,"line":219},[58,1619,180],{"class":64},[58,1621,75],{"class":74},[58,1623,226],{"class":64},[58,1625,1626],{"class":81},"'Members'",[58,1628,201],{"class":64},[58,1630,1631],{"class":60,"line":809},[58,1632,1485],{"class":64},[58,1634,1635,1638,1641],{"class":60,"line":820},[58,1636,1637],{"class":64},"plt.savefig(",[58,1639,1640],{"class":81},"'/home/brian/Documents/github/briancaffey.github.io/aur/wiki_users.png'",[58,1642,201],{"class":64},[10,1644,1645,1646,343],{},"There is a massive amount of data in the Wiki that I haven't obtained for this article. You can also find some interesting statistics on the Arch Wiki site ",[14,1647,1650],{"href":1648,"rel":1649},"https://wiki.archlinux.org/index.php/ArchWiki:Statistics#Histograms",[25],"here",[1652,1653,1654],"style",{},"html pre.shiki code .sMOD_, html code.shiki .sMOD_{--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2}html pre.shiki code .sC2Qs, html code.shiki .sC2Qs{--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672}html pre.shiki code .sstjo, html code.shiki .sstjo{--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74}html pre.shiki code .s7F3e, html code.shiki .s7F3e{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF}html pre.shiki code .sTrkL, html code.shiki .sTrkL{--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF}html pre.shiki code .sTHNf, html code.shiki .sTHNf{--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html pre.shiki code .s-m8C, html code.shiki .s-m8C{--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}html pre.shiki code .sq6CD, html code.shiki .sq6CD{--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic}html pre.shiki code .srTi1, html code.shiki .srTi1{--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E}html pre.shiki code .so59x, html code.shiki .so59x{--shiki-default:#24292E;--shiki-default-font-style:inherit;--shiki-dark:#E1E4E8;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic}",{"title":54,"searchDepth":68,"depth":68,"links":1656},[1657,1658,1659,1660,1661],{"id":31,"depth":68,"text":32},{"id":237,"depth":68,"text":238},{"id":674,"depth":68,"text":675},{"id":1107,"depth":68,"text":1108},{"id":1488,"depth":68,"text":1489},"2017-12-02","Arch Linux provides packages through the official Arch Linux repositories and the Arch User Repository (AUR). I recently gathered data on ~50,000 packages from these repositories on archlinux.org to better understand the makeup of the packages. In this article I will share some visualizations I made as well as some key takeaways about the data set I gathered.",false,"md",null,{"layout":1668},"post","/2017/12/02/arch-linux-package-data-analysis",{"title":5,"description":1663},"2017/12/02/arch-linux-package-data-analysis",[1673,1674,53],"arch-linux","data","dN_Y426m-pwCzBqV-bbP7MCJR2JChPiT8jl2dA5QUB4",1757463813758]