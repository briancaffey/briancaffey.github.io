[{"data":1,"prerenderedAt":4045},["ShallowReactive",2],{"langton-ant-notebook":3},{"id":4,"title":5,"body":6,"comments":51,"date":4031,"description":4032,"draft":4033,"extension":4034,"external":4035,"image":4036,"meta":4037,"navigation":51,"path":4039,"seo":4040,"stem":4041,"tags":4042,"__hash__":4044},"blog/2017/04/02/langton-ant-notebook.md","Python script for generating 2D n-state Langton's Ant animations",{"type":7,"value":8,"toc":4029},"minimark",[9,17,33,42,52,61,76,96,105,194,1784,1789,1796,1799,1855,1869,1878,1886,1895,2139,2150,2159,2168,2174,2177,2186,2195,2215,2224,2567,2576,2579,2619,2625,2630,2639,2645,2648,2657,2666,2672,2675,2684,2690,2693,2717,2723,2728,2731,2770,2776,2781,2790,2796,2810,2813,2822,2831,2837,2840,2849,2852,2880,2886,2891,2894,2903,2909,2918,2921,3104,3113,3119,3124,3133,3139,3144,3153,3159,3164,3173,3179,3184,3193,3199,3204,3213,3219,3224,3233,3239,3244,3253,3259,3264,3273,3279,3284,3287,3296,3302,3307,3315,3320,3325,3334,3340,3345,3354,3359,3364,3373,3379,3384,3393,3399,3404,3413,3419,3424,3433,3439,3444,3453,3459,3464,3473,3479,3484,3493,3499,3504,3513,3519,3524,3533,3539,3544,3552,3557,3562,3571,3577,3582,3591,3597,3602,3611,3617,3622,3631,3637,3642,3650,3655,3660,3669,3675,3680,3689,3695,3700,3709,3715,3720,3729,3735,3740,3749,3755,3760,3769,3775,3780,3789,3795,3800,3809,3815,3820,3829,3835,3840,3843,3847,3850,3859,3868,3877,3901,3910,3916,3919,3928,3937,3943,3946,3961,3966,3971,3986,3991,3996,3999,4003,4006,4025],[10,11,12],"p",{},[13,14],"img",{"alt":15,"src":16},"png","/static/LLRRRLRRRRR.png",[10,18,19,20,27,28,32],{},"This is an old project that I would like to refactor. I'm copying the contents of ",[21,22,26],"a",{"href":23,"rel":24},"https://github.com/briancaffey/cellular-automata/blob/master/ants.ipynb",[25],"nofollow","this Jupyter notebook"," into this article with the ",[29,30,31],"code",{},"jupyter nbconvert ants.ipynb --to markdown",".",[10,34,35,36,41],{},"This notebook explores a type of Turing Machine known as ",[21,37,40],{"href":38,"rel":39},"https://en.wikipedia.org/wiki/Turmite",[25],"termites",". The first part is a script I wrote a few years ago when I was first learning Python. If you are new to learning Python, I suggest you give it a try before reading the script; there's a lot you will learn about flow control and data structures. My script is far from perfect and every time I come back to it there is an idiom I can add and areas that can be refactored and cleaned up. It generates images of 2-dimensional n-state termites on an $a$ x $b$ rectangular grid, or it can generate multiple images (frames) of a single termite as it grows to make a video. Here's an example of a termite animatino that I made using the script below:",[43,44],"iframe",{"width":45,"height":46,"src":47,"frameBorder":48,"gesture":49,"allow":50,"allowFullScreen":51},"100%",400,"https://www.youtube-nocookie.com/embed/Du2DorTLAo4?rel=0","0","media","encrypted-media",true,[10,53,54,55,60],{},"The type of termite explored here is a modified version of a type of cellular automata known as ",[21,56,59],{"href":57,"rel":58},"https://en.wikipedia.org/wiki/Langton%27s_ant",[25],"Langton's Ant",". Langton's Ant has a simple ruleset: an ant is placed on a 2-dimensional grid of 2-state cells (black or white) with a directional orientation. If the ant is on a black cell at $t=n$, the ant enters the cell on the immediate left at $t=n+1$ and the state of the cell it exits changes to white. If the state of the cell that the ant enters is white, the ant enters the cell immediately to the right and the cell it exits turns black. Around 11,000 steps, the ant enters a 'highway' which results in a repeated motion that moves the ant continually in one direction.",[10,62,63,64,67,68,71,72,75],{},"Instead of black and white cells, we can define $n$ number of states (colors) and assign any combination of $n$ instructions (eg. LRLLLRLLLRL). The script below generates generates an arbitrary number of ",[29,65,66],{},"ants",". Each number in ",[29,69,70],{},"range(ants)"," is converted to binary and then 1s and 0s of the corresponding binary number represent the left and right turns for each individual ant. For example: ",[29,73,74],{},"bin(23)"," corresponds to a 5-state ant with the following rules: RLRRR. This method avoids generating isotropes (RLRRR is the same ant as LRLLL).",[10,77,78,79,82,83,86,87,90,91,32],{},"If ",[29,80,81],{},"record"," is set to ",[29,84,85],{},"True",", one frame will be captured every ",[29,88,89],{},"frame_interval"," number of steps. These images can be converted into video easily with open-source programs like ",[21,92,95],{"href":93,"rel":94},"https://www.blender.org/",[25],"Blender",[10,97,98,99,104],{},"The last part of the notebook attempts to use new methods from the latest version of scikit-learn (",[21,100,103],{"href":101,"rel":102},"http://scikit-learn.org/stable/whats_new.html",[25],"0.18.1",") to cluster ants by their behavior: k-means (for clustering) and Isolation Forests (for detecting outliers).",[106,107,112],"pre",{"className":108,"code":109,"language":110,"meta":111,"style":111},"language-python shiki shiki-themes github-light github-dark","import PIL\nfrom PIL import Image\nimport random\nimport os\nimport sys\nimport pandas as pd\nimport numpy as np\nimport scipy\nimport matplotlib.pyplot as plt\nfrom __future__ import print_function\nfrom sklearn import cluster\nimport seaborn as sns\n%matplotlib inline\n","python","",[29,113,114,122,128,134,140,146,152,158,164,170,176,182,188],{"__ignoreMap":111},[115,116,119],"span",{"class":117,"line":118},"line",1,[115,120,121],{},"import PIL\n",[115,123,125],{"class":117,"line":124},2,[115,126,127],{},"from PIL import Image\n",[115,129,131],{"class":117,"line":130},3,[115,132,133],{},"import random\n",[115,135,137],{"class":117,"line":136},4,[115,138,139],{},"import os\n",[115,141,143],{"class":117,"line":142},5,[115,144,145],{},"import sys\n",[115,147,149],{"class":117,"line":148},6,[115,150,151],{},"import pandas as pd\n",[115,153,155],{"class":117,"line":154},7,[115,156,157],{},"import numpy as np\n",[115,159,161],{"class":117,"line":160},8,[115,162,163],{},"import scipy\n",[115,165,167],{"class":117,"line":166},9,[115,168,169],{},"import matplotlib.pyplot as plt\n",[115,171,173],{"class":117,"line":172},10,[115,174,175],{},"from __future__ import print_function\n",[115,177,179],{"class":117,"line":178},11,[115,180,181],{},"from sklearn import cluster\n",[115,183,185],{"class":117,"line":184},12,[115,186,187],{},"import seaborn as sns\n",[115,189,191],{"class":117,"line":190},13,[115,192,193],{},"%matplotlib inline\n",[106,195,197],{"className":108,"code":196,"language":110,"meta":111,"style":111},"#this script generates an image (or a series of images) for n-state 2D Langton's Ant cellular automaton.\n\n#SETTINGS\n\n#number of ants to run\nants = 65536\n#ants = 100\n#set record to True to record frames once every frame_interval steps\nrecord = False\nframe_interval = 5000\n\n#Boolean for recording final image\nrecord_final_image = False\n\n#set scale to scale the resulting images in save_image(i) function\nscale = 1\n\n#set the length and width of the square image canvas\nwidth = int(200)\nlength = int(200)\n\n#initialize ant in the center of the grid\n#grid contains length_width**2 cells\nant_pos = int((length*width)/2) + int(width/2)\n\n#boolean to check if the ant touches the border (out of bounds)\noob = False\n\n#number of steps that the ant will take on each walk\niterations = 100000\n\n#for naming the image file below\nnumber = str(iterations)\n\n#set the direction of the ant's first step: 1 --> Right; -1 --> Left. Eliminates mirror images (isotropes) from dataset\ndirection = 1\n\n#Ininitialize a blank square image\nim1 = Image.new('RGBA', (width,length),'white')\n\n#color selection\nwhite = (255,255,255,255)\nred = (255,0,0,255)\norange = (255,128,0,255)\nyellow = (255,255,0,255)\nyellow_green = (128,255,0,255)\ngreen = (0,255,0,255)\nteal = (0,255,255,255)\nlight_blue = (0,128,255,255)\nblue = (0,0,255,255)\npurple = (127,0,255,255)\nblack = (0,0,0,255)\ngrey = (150,150,150,255)\nother = (40,100,50,255)\nbrown = (130,90,44,255)\npink = (244,114,208,255)\nmauve = (118,96,138,255)\nmagenta = (216,0,115,255)\n\ncolor_choices = [red, orange, yellow, light_blue, yellow_green, blue, purple, black, grey, green, teal, light_blue, other, brown, pink, mauve, magenta]\n\n#convert an integer to binary and then convert\ndef num_to_string(num):\n    binary = bin(num)\n    moves = \"\"\n    for x in str(binary)[2:]:\n        if x == '1':\n            moves += \"R\"\n        else:\n            moves += \"L\"\n    return moves\n\n#moves list includes all 16 length moves\n#moves_list = [num_to_string(ant) for ant in range(32768,65536)]\n\n#defines the list of strings that is used for the main loop bellow\nmoves_list = [num_to_string(ant) for ant in range(ants)]\n\n#a list of the dictionaries to by passed into the pandas dataframe for later analysis\ndf_row_list = []\n\n#dataframe object for later analysis\ndf = pd.DataFrame() #index=[0]\n\n#functions for moving the postition of the ant right, left, up or down\ndef move_right():\n    global ant_pos\n    #move ant_pos one pixel to the right\n    ant_pos += 1\n    return ant_pos\ndef move_left():\n    global ant_pos\n    #move ant_pos one pixel to the left\n    ant_pos -= 1\n    return ant_pos\ndef move_up():\n    global ant_pos\n    #move ant_pos one pixel up\n    ant_pos += width\n    return ant_pos\ndef move_down():\n    global ant_pos\n    #move ant_pos one pixel down\n    ant_pos -= width\n    return ant_pos\n\ndef move(color,d):\n    global direction\n    while True:\n        #this part is a little confusing and may need to be rewritten\n        #it uses the current direction of the ant to determine the appropriate direction for the next turn\n        #breaks are used\n        if pix_list[ant_pos][2] == color and direction == width*d:\n            #set the color to the next color in the list, or loop back to the beginning of the list if the end has been reached\n            pix_list[ant_pos][2] = (color + 1) % len(pixel_colors)\n            #save the current postion of the ant\n            init = ant_pos\n            #move the ant\n            move_right()\n            #save the updated position of the ant\n            end = ant_pos\n            #calculate the new direction of the ant by taking the difference between end and init\n            direction = end - init\n            break\n\n        #same idea as above\n        elif pix_list[ant_pos][2] == color and direction == -1*width*d:\n            pix_list[ant_pos][2] = (color + 1) % len(pixel_colors)\n            init = ant_pos\n            move_left()\n            end = ant_pos\n            direction = end - init\n            break\n        #same idea as above\n        elif pix_list[ant_pos][2] == color and direction == 1*d:\n            pix_list[ant_pos][2] = (color + 1) % len(pixel_colors)\n            init = ant_pos\n            move_down()\n            end = ant_pos\n            direction = end - init\n            break\n        #same idea as above\n        elif pix_list[ant_pos][2] == color and direction == -1*d:\n            pix_list[ant_pos][2] = (color + 1) % len(pixel_colors)\n            init = ant_pos\n            move_up()\n            end = ant_pos\n            direction = end - init\n            break\n        break\n\n#captures series of pixels used for generating images\ndef get_pix_series():\n    global pix_series\n    pix_series = []\n    for x in range(len(pix_list)):\n        for y in range(len(pixel_colors)):\n            if pix_list[x][2] == y:\n                pixel = pixel_colors[y]\n                pix_series.append(pixel)\n\n#runs ant along the grid according to the moves (defined above) for the number of steps in iterations (defined above)\ndef run():\n    #variable the tracks the step number if the ant goes out of bounds\n    global oob\n    #converts moves string into a list of 0s and 1s; these numbers correspond to direction and are passed into the move() function\n    moves1 = [1 if x == 'R' else -1 for x in moves]\n    for step in range(iterations):\n        #exit the loop if the ant reaches the edge of the grid\n        if ant_pos \u003C width or ant_pos % width == 0:\n            oob = step\n            return\n        #loop through the moves\n        for index, direction in enumerate(moves1):\n            try:\n                #remember the ant position\n                not_moved = ant_pos\n                #try to move the ant position\n                move(index,direction)\n                #check to see if the position was moved\n                if ant_pos != not_moved:\n                    #set record to false in the settings to turn of frame recording\n                    if record == True:\n                        #records a new frame every frame_interval frame\n                        if step % frame_interval == 0:\n                            counter += 1\n                            print(\"Generating frame number \" + str(counter))\n                            get_pix_series()\n                            save_image(counter)\n                    break\n                else:\n                    continue\n            except:\n                #print(\"Out of bounds at step number \" + str(step))\n                oob = step\n                return\n\ndef save_image(i):\n    #give access to the image instantiated at the beginning of the script\n    global im1\n    #fill blank image canvas with pix_series pixel data\n    im1.putdata(pix_series)\n    #to rescale the image, set the scale variable in settings and call resize on im1\n    im1.resize((scale*im1.size[0],scale*im1.size[1])).save('%s.png' % (moves))\n\n#builds a dictionary to count pixels by color\ndef build_df_row():\n    colors_dict = {str(val): 0 for val, color in enumerate(pixel_colors)}\n    moves_dict = {'moves':moves}\n    last_step = {'last_step':oob}\n    row_dict = dict(colors_dict.items()+moves_dict.items()+last_step.items())\n    for x in pix_list:\n        pixel_color = str(x[2])\n        #print(pixel_color)\n        row_dict[pixel_color] += 1\n    return row_dict\n\n#uncomment below to overwrite moves_list\n#moves_list = ['LR', 'RRLR']\n\nfor _, moves in enumerate(moves_list):\n    oob = 0\n    dir_path = str(_)\n\n    #make a new directory for each new ant walk in walks based on the the walk number and navigate to that directory\n    if record == True:\n        #make a new directory to record frames for a give ant if record is set to true and that directory does not yet exist\n        if not os.path.isdir(dir_path):\n            os.makedirs(dir_path)\n        #otherwise just change into the directory\n        else:\n            os.chdir(dir_path)\n\n    #set ant at middle of grid\n    ant_pos = int((length*width)/2) + int(width/2)\n\n    #moves = len(moves)\n    pixel_colors = color_choices[:(len(moves))]\n\n    #defines an empty list of elements [x,y,0] where x amd y are the position 0 is the 0ht color in the color list (the base canvas color)\n    pix_list = []\n    for x in range(length):\n        for y in range(width):\n            a = [x,y,0]\n            pix_list.append(a)\n\n    #pix_series is a list of pixels that is passed into the put_data function to generate an image\n    pix_series = []\n\n    #counter keeps track of the frame number (if recording a series of images)\n    counter = 0\n\n    #run the ant\n    run()\n\n    #capture the final state of the grid with get_pix_series\n    get_pix_series()\n\n    #uncomment below to preview images for testing\n    #im1.putdata(pix_series)\n    #im1.resize((scale*im1.size[0],scale*im1.size[1])).show()\n\n    #build a dictionary with pixel counts\n    colors_dict = build_df_row()\n    row_df = pd.DataFrame(colors_dict, index=[0])\n    df = df.append(row_df, ignore_index=True)\n\n    if record_final_image == True:\n        os.chdir(os.path.expanduser('~/Documents/CA_1/imgs/'))\n        save_image(_)\n        os.chdir('../')\n\n    #summary\n    print(str(_), end=' ')\n\nos.chdir(os.path.expanduser('~/Documents/CA_1/'))\ndf.to_csv('ants_hist_.csv', index=False)\n",[29,198,199,204,209,214,218,223,228,233,238,243,248,252,257,262,267,273,279,284,290,296,302,307,313,319,325,330,336,342,347,353,359,364,370,376,381,387,393,398,404,410,415,421,427,433,439,445,451,457,463,469,475,481,487,493,499,505,511,517,523,528,534,539,545,551,557,563,569,575,581,587,593,599,604,610,616,621,627,633,638,644,650,655,661,667,672,678,684,690,696,702,708,714,719,725,731,736,742,747,753,759,764,770,775,781,787,792,797,803,809,815,821,827,833,839,845,851,857,863,869,875,881,887,893,899,905,910,916,922,927,932,938,943,948,953,958,964,969,974,980,985,990,995,1000,1006,1011,1016,1022,1027,1032,1037,1043,1048,1054,1060,1066,1072,1078,1084,1090,1096,1102,1107,1113,1119,1125,1131,1137,1143,1149,1155,1161,1167,1173,1179,1185,1191,1197,1203,1209,1215,1221,1227,1233,1239,1245,1251,1257,1263,1269,1275,1281,1287,1293,1299,1305,1311,1317,1322,1328,1334,1340,1346,1352,1358,1364,1369,1375,1381,1387,1393,1399,1405,1411,1417,1423,1429,1435,1440,1446,1452,1457,1463,1469,1475,1480,1486,1492,1498,1504,1510,1516,1521,1527,1532,1538,1544,1549,1555,1561,1566,1572,1578,1584,1590,1596,1602,1607,1613,1618,1623,1629,1635,1640,1646,1652,1657,1663,1669,1674,1680,1686,1692,1697,1703,1709,1715,1721,1726,1732,1738,1744,1750,1755,1761,1767,1772,1778],{"__ignoreMap":111},[115,200,201],{"class":117,"line":118},[115,202,203],{},"#this script generates an image (or a series of images) for n-state 2D Langton's Ant cellular automaton.\n",[115,205,206],{"class":117,"line":124},[115,207,208],{"emptyLinePlaceholder":51},"\n",[115,210,211],{"class":117,"line":130},[115,212,213],{},"#SETTINGS\n",[115,215,216],{"class":117,"line":136},[115,217,208],{"emptyLinePlaceholder":51},[115,219,220],{"class":117,"line":142},[115,221,222],{},"#number of ants to run\n",[115,224,225],{"class":117,"line":148},[115,226,227],{},"ants = 65536\n",[115,229,230],{"class":117,"line":154},[115,231,232],{},"#ants = 100\n",[115,234,235],{"class":117,"line":160},[115,236,237],{},"#set record to True to record frames once every frame_interval steps\n",[115,239,240],{"class":117,"line":166},[115,241,242],{},"record = False\n",[115,244,245],{"class":117,"line":172},[115,246,247],{},"frame_interval = 5000\n",[115,249,250],{"class":117,"line":178},[115,251,208],{"emptyLinePlaceholder":51},[115,253,254],{"class":117,"line":184},[115,255,256],{},"#Boolean for recording final image\n",[115,258,259],{"class":117,"line":190},[115,260,261],{},"record_final_image = False\n",[115,263,265],{"class":117,"line":264},14,[115,266,208],{"emptyLinePlaceholder":51},[115,268,270],{"class":117,"line":269},15,[115,271,272],{},"#set scale to scale the resulting images in save_image(i) function\n",[115,274,276],{"class":117,"line":275},16,[115,277,278],{},"scale = 1\n",[115,280,282],{"class":117,"line":281},17,[115,283,208],{"emptyLinePlaceholder":51},[115,285,287],{"class":117,"line":286},18,[115,288,289],{},"#set the length and width of the square image canvas\n",[115,291,293],{"class":117,"line":292},19,[115,294,295],{},"width = int(200)\n",[115,297,299],{"class":117,"line":298},20,[115,300,301],{},"length = int(200)\n",[115,303,305],{"class":117,"line":304},21,[115,306,208],{"emptyLinePlaceholder":51},[115,308,310],{"class":117,"line":309},22,[115,311,312],{},"#initialize ant in the center of the grid\n",[115,314,316],{"class":117,"line":315},23,[115,317,318],{},"#grid contains length_width**2 cells\n",[115,320,322],{"class":117,"line":321},24,[115,323,324],{},"ant_pos = int((length*width)/2) + int(width/2)\n",[115,326,328],{"class":117,"line":327},25,[115,329,208],{"emptyLinePlaceholder":51},[115,331,333],{"class":117,"line":332},26,[115,334,335],{},"#boolean to check if the ant touches the border (out of bounds)\n",[115,337,339],{"class":117,"line":338},27,[115,340,341],{},"oob = False\n",[115,343,345],{"class":117,"line":344},28,[115,346,208],{"emptyLinePlaceholder":51},[115,348,350],{"class":117,"line":349},29,[115,351,352],{},"#number of steps that the ant will take on each walk\n",[115,354,356],{"class":117,"line":355},30,[115,357,358],{},"iterations = 100000\n",[115,360,362],{"class":117,"line":361},31,[115,363,208],{"emptyLinePlaceholder":51},[115,365,367],{"class":117,"line":366},32,[115,368,369],{},"#for naming the image file below\n",[115,371,373],{"class":117,"line":372},33,[115,374,375],{},"number = str(iterations)\n",[115,377,379],{"class":117,"line":378},34,[115,380,208],{"emptyLinePlaceholder":51},[115,382,384],{"class":117,"line":383},35,[115,385,386],{},"#set the direction of the ant's first step: 1 --> Right; -1 --> Left. Eliminates mirror images (isotropes) from dataset\n",[115,388,390],{"class":117,"line":389},36,[115,391,392],{},"direction = 1\n",[115,394,396],{"class":117,"line":395},37,[115,397,208],{"emptyLinePlaceholder":51},[115,399,401],{"class":117,"line":400},38,[115,402,403],{},"#Ininitialize a blank square image\n",[115,405,407],{"class":117,"line":406},39,[115,408,409],{},"im1 = Image.new('RGBA', (width,length),'white')\n",[115,411,413],{"class":117,"line":412},40,[115,414,208],{"emptyLinePlaceholder":51},[115,416,418],{"class":117,"line":417},41,[115,419,420],{},"#color selection\n",[115,422,424],{"class":117,"line":423},42,[115,425,426],{},"white = (255,255,255,255)\n",[115,428,430],{"class":117,"line":429},43,[115,431,432],{},"red = (255,0,0,255)\n",[115,434,436],{"class":117,"line":435},44,[115,437,438],{},"orange = (255,128,0,255)\n",[115,440,442],{"class":117,"line":441},45,[115,443,444],{},"yellow = (255,255,0,255)\n",[115,446,448],{"class":117,"line":447},46,[115,449,450],{},"yellow_green = (128,255,0,255)\n",[115,452,454],{"class":117,"line":453},47,[115,455,456],{},"green = (0,255,0,255)\n",[115,458,460],{"class":117,"line":459},48,[115,461,462],{},"teal = (0,255,255,255)\n",[115,464,466],{"class":117,"line":465},49,[115,467,468],{},"light_blue = (0,128,255,255)\n",[115,470,472],{"class":117,"line":471},50,[115,473,474],{},"blue = (0,0,255,255)\n",[115,476,478],{"class":117,"line":477},51,[115,479,480],{},"purple = (127,0,255,255)\n",[115,482,484],{"class":117,"line":483},52,[115,485,486],{},"black = (0,0,0,255)\n",[115,488,490],{"class":117,"line":489},53,[115,491,492],{},"grey = (150,150,150,255)\n",[115,494,496],{"class":117,"line":495},54,[115,497,498],{},"other = (40,100,50,255)\n",[115,500,502],{"class":117,"line":501},55,[115,503,504],{},"brown = (130,90,44,255)\n",[115,506,508],{"class":117,"line":507},56,[115,509,510],{},"pink = (244,114,208,255)\n",[115,512,514],{"class":117,"line":513},57,[115,515,516],{},"mauve = (118,96,138,255)\n",[115,518,520],{"class":117,"line":519},58,[115,521,522],{},"magenta = (216,0,115,255)\n",[115,524,526],{"class":117,"line":525},59,[115,527,208],{"emptyLinePlaceholder":51},[115,529,531],{"class":117,"line":530},60,[115,532,533],{},"color_choices = [red, orange, yellow, light_blue, yellow_green, blue, purple, black, grey, green, teal, light_blue, other, brown, pink, mauve, magenta]\n",[115,535,537],{"class":117,"line":536},61,[115,538,208],{"emptyLinePlaceholder":51},[115,540,542],{"class":117,"line":541},62,[115,543,544],{},"#convert an integer to binary and then convert\n",[115,546,548],{"class":117,"line":547},63,[115,549,550],{},"def num_to_string(num):\n",[115,552,554],{"class":117,"line":553},64,[115,555,556],{},"    binary = bin(num)\n",[115,558,560],{"class":117,"line":559},65,[115,561,562],{},"    moves = \"\"\n",[115,564,566],{"class":117,"line":565},66,[115,567,568],{},"    for x in str(binary)[2:]:\n",[115,570,572],{"class":117,"line":571},67,[115,573,574],{},"        if x == '1':\n",[115,576,578],{"class":117,"line":577},68,[115,579,580],{},"            moves += \"R\"\n",[115,582,584],{"class":117,"line":583},69,[115,585,586],{},"        else:\n",[115,588,590],{"class":117,"line":589},70,[115,591,592],{},"            moves += \"L\"\n",[115,594,596],{"class":117,"line":595},71,[115,597,598],{},"    return moves\n",[115,600,602],{"class":117,"line":601},72,[115,603,208],{"emptyLinePlaceholder":51},[115,605,607],{"class":117,"line":606},73,[115,608,609],{},"#moves list includes all 16 length moves\n",[115,611,613],{"class":117,"line":612},74,[115,614,615],{},"#moves_list = [num_to_string(ant) for ant in range(32768,65536)]\n",[115,617,619],{"class":117,"line":618},75,[115,620,208],{"emptyLinePlaceholder":51},[115,622,624],{"class":117,"line":623},76,[115,625,626],{},"#defines the list of strings that is used for the main loop bellow\n",[115,628,630],{"class":117,"line":629},77,[115,631,632],{},"moves_list = [num_to_string(ant) for ant in range(ants)]\n",[115,634,636],{"class":117,"line":635},78,[115,637,208],{"emptyLinePlaceholder":51},[115,639,641],{"class":117,"line":640},79,[115,642,643],{},"#a list of the dictionaries to by passed into the pandas dataframe for later analysis\n",[115,645,647],{"class":117,"line":646},80,[115,648,649],{},"df_row_list = []\n",[115,651,653],{"class":117,"line":652},81,[115,654,208],{"emptyLinePlaceholder":51},[115,656,658],{"class":117,"line":657},82,[115,659,660],{},"#dataframe object for later analysis\n",[115,662,664],{"class":117,"line":663},83,[115,665,666],{},"df = pd.DataFrame() #index=[0]\n",[115,668,670],{"class":117,"line":669},84,[115,671,208],{"emptyLinePlaceholder":51},[115,673,675],{"class":117,"line":674},85,[115,676,677],{},"#functions for moving the postition of the ant right, left, up or down\n",[115,679,681],{"class":117,"line":680},86,[115,682,683],{},"def move_right():\n",[115,685,687],{"class":117,"line":686},87,[115,688,689],{},"    global ant_pos\n",[115,691,693],{"class":117,"line":692},88,[115,694,695],{},"    #move ant_pos one pixel to the right\n",[115,697,699],{"class":117,"line":698},89,[115,700,701],{},"    ant_pos += 1\n",[115,703,705],{"class":117,"line":704},90,[115,706,707],{},"    return ant_pos\n",[115,709,711],{"class":117,"line":710},91,[115,712,713],{},"def move_left():\n",[115,715,717],{"class":117,"line":716},92,[115,718,689],{},[115,720,722],{"class":117,"line":721},93,[115,723,724],{},"    #move ant_pos one pixel to the left\n",[115,726,728],{"class":117,"line":727},94,[115,729,730],{},"    ant_pos -= 1\n",[115,732,734],{"class":117,"line":733},95,[115,735,707],{},[115,737,739],{"class":117,"line":738},96,[115,740,741],{},"def move_up():\n",[115,743,745],{"class":117,"line":744},97,[115,746,689],{},[115,748,750],{"class":117,"line":749},98,[115,751,752],{},"    #move ant_pos one pixel up\n",[115,754,756],{"class":117,"line":755},99,[115,757,758],{},"    ant_pos += width\n",[115,760,762],{"class":117,"line":761},100,[115,763,707],{},[115,765,767],{"class":117,"line":766},101,[115,768,769],{},"def move_down():\n",[115,771,773],{"class":117,"line":772},102,[115,774,689],{},[115,776,778],{"class":117,"line":777},103,[115,779,780],{},"    #move ant_pos one pixel down\n",[115,782,784],{"class":117,"line":783},104,[115,785,786],{},"    ant_pos -= width\n",[115,788,790],{"class":117,"line":789},105,[115,791,707],{},[115,793,795],{"class":117,"line":794},106,[115,796,208],{"emptyLinePlaceholder":51},[115,798,800],{"class":117,"line":799},107,[115,801,802],{},"def move(color,d):\n",[115,804,806],{"class":117,"line":805},108,[115,807,808],{},"    global direction\n",[115,810,812],{"class":117,"line":811},109,[115,813,814],{},"    while True:\n",[115,816,818],{"class":117,"line":817},110,[115,819,820],{},"        #this part is a little confusing and may need to be rewritten\n",[115,822,824],{"class":117,"line":823},111,[115,825,826],{},"        #it uses the current direction of the ant to determine the appropriate direction for the next turn\n",[115,828,830],{"class":117,"line":829},112,[115,831,832],{},"        #breaks are used\n",[115,834,836],{"class":117,"line":835},113,[115,837,838],{},"        if pix_list[ant_pos][2] == color and direction == width*d:\n",[115,840,842],{"class":117,"line":841},114,[115,843,844],{},"            #set the color to the next color in the list, or loop back to the beginning of the list if the end has been reached\n",[115,846,848],{"class":117,"line":847},115,[115,849,850],{},"            pix_list[ant_pos][2] = (color + 1) % len(pixel_colors)\n",[115,852,854],{"class":117,"line":853},116,[115,855,856],{},"            #save the current postion of the ant\n",[115,858,860],{"class":117,"line":859},117,[115,861,862],{},"            init = ant_pos\n",[115,864,866],{"class":117,"line":865},118,[115,867,868],{},"            #move the ant\n",[115,870,872],{"class":117,"line":871},119,[115,873,874],{},"            move_right()\n",[115,876,878],{"class":117,"line":877},120,[115,879,880],{},"            #save the updated position of the ant\n",[115,882,884],{"class":117,"line":883},121,[115,885,886],{},"            end = ant_pos\n",[115,888,890],{"class":117,"line":889},122,[115,891,892],{},"            #calculate the new direction of the ant by taking the difference between end and init\n",[115,894,896],{"class":117,"line":895},123,[115,897,898],{},"            direction = end - init\n",[115,900,902],{"class":117,"line":901},124,[115,903,904],{},"            break\n",[115,906,908],{"class":117,"line":907},125,[115,909,208],{"emptyLinePlaceholder":51},[115,911,913],{"class":117,"line":912},126,[115,914,915],{},"        #same idea as above\n",[115,917,919],{"class":117,"line":918},127,[115,920,921],{},"        elif pix_list[ant_pos][2] == color and direction == -1*width*d:\n",[115,923,925],{"class":117,"line":924},128,[115,926,850],{},[115,928,930],{"class":117,"line":929},129,[115,931,862],{},[115,933,935],{"class":117,"line":934},130,[115,936,937],{},"            move_left()\n",[115,939,941],{"class":117,"line":940},131,[115,942,886],{},[115,944,946],{"class":117,"line":945},132,[115,947,898],{},[115,949,951],{"class":117,"line":950},133,[115,952,904],{},[115,954,956],{"class":117,"line":955},134,[115,957,915],{},[115,959,961],{"class":117,"line":960},135,[115,962,963],{},"        elif pix_list[ant_pos][2] == color and direction == 1*d:\n",[115,965,967],{"class":117,"line":966},136,[115,968,850],{},[115,970,972],{"class":117,"line":971},137,[115,973,862],{},[115,975,977],{"class":117,"line":976},138,[115,978,979],{},"            move_down()\n",[115,981,983],{"class":117,"line":982},139,[115,984,886],{},[115,986,988],{"class":117,"line":987},140,[115,989,898],{},[115,991,993],{"class":117,"line":992},141,[115,994,904],{},[115,996,998],{"class":117,"line":997},142,[115,999,915],{},[115,1001,1003],{"class":117,"line":1002},143,[115,1004,1005],{},"        elif pix_list[ant_pos][2] == color and direction == -1*d:\n",[115,1007,1009],{"class":117,"line":1008},144,[115,1010,850],{},[115,1012,1014],{"class":117,"line":1013},145,[115,1015,862],{},[115,1017,1019],{"class":117,"line":1018},146,[115,1020,1021],{},"            move_up()\n",[115,1023,1025],{"class":117,"line":1024},147,[115,1026,886],{},[115,1028,1030],{"class":117,"line":1029},148,[115,1031,898],{},[115,1033,1035],{"class":117,"line":1034},149,[115,1036,904],{},[115,1038,1040],{"class":117,"line":1039},150,[115,1041,1042],{},"        break\n",[115,1044,1046],{"class":117,"line":1045},151,[115,1047,208],{"emptyLinePlaceholder":51},[115,1049,1051],{"class":117,"line":1050},152,[115,1052,1053],{},"#captures series of pixels used for generating images\n",[115,1055,1057],{"class":117,"line":1056},153,[115,1058,1059],{},"def get_pix_series():\n",[115,1061,1063],{"class":117,"line":1062},154,[115,1064,1065],{},"    global pix_series\n",[115,1067,1069],{"class":117,"line":1068},155,[115,1070,1071],{},"    pix_series = []\n",[115,1073,1075],{"class":117,"line":1074},156,[115,1076,1077],{},"    for x in range(len(pix_list)):\n",[115,1079,1081],{"class":117,"line":1080},157,[115,1082,1083],{},"        for y in range(len(pixel_colors)):\n",[115,1085,1087],{"class":117,"line":1086},158,[115,1088,1089],{},"            if pix_list[x][2] == y:\n",[115,1091,1093],{"class":117,"line":1092},159,[115,1094,1095],{},"                pixel = pixel_colors[y]\n",[115,1097,1099],{"class":117,"line":1098},160,[115,1100,1101],{},"                pix_series.append(pixel)\n",[115,1103,1105],{"class":117,"line":1104},161,[115,1106,208],{"emptyLinePlaceholder":51},[115,1108,1110],{"class":117,"line":1109},162,[115,1111,1112],{},"#runs ant along the grid according to the moves (defined above) for the number of steps in iterations (defined above)\n",[115,1114,1116],{"class":117,"line":1115},163,[115,1117,1118],{},"def run():\n",[115,1120,1122],{"class":117,"line":1121},164,[115,1123,1124],{},"    #variable the tracks the step number if the ant goes out of bounds\n",[115,1126,1128],{"class":117,"line":1127},165,[115,1129,1130],{},"    global oob\n",[115,1132,1134],{"class":117,"line":1133},166,[115,1135,1136],{},"    #converts moves string into a list of 0s and 1s; these numbers correspond to direction and are passed into the move() function\n",[115,1138,1140],{"class":117,"line":1139},167,[115,1141,1142],{},"    moves1 = [1 if x == 'R' else -1 for x in moves]\n",[115,1144,1146],{"class":117,"line":1145},168,[115,1147,1148],{},"    for step in range(iterations):\n",[115,1150,1152],{"class":117,"line":1151},169,[115,1153,1154],{},"        #exit the loop if the ant reaches the edge of the grid\n",[115,1156,1158],{"class":117,"line":1157},170,[115,1159,1160],{},"        if ant_pos \u003C width or ant_pos % width == 0:\n",[115,1162,1164],{"class":117,"line":1163},171,[115,1165,1166],{},"            oob = step\n",[115,1168,1170],{"class":117,"line":1169},172,[115,1171,1172],{},"            return\n",[115,1174,1176],{"class":117,"line":1175},173,[115,1177,1178],{},"        #loop through the moves\n",[115,1180,1182],{"class":117,"line":1181},174,[115,1183,1184],{},"        for index, direction in enumerate(moves1):\n",[115,1186,1188],{"class":117,"line":1187},175,[115,1189,1190],{},"            try:\n",[115,1192,1194],{"class":117,"line":1193},176,[115,1195,1196],{},"                #remember the ant position\n",[115,1198,1200],{"class":117,"line":1199},177,[115,1201,1202],{},"                not_moved = ant_pos\n",[115,1204,1206],{"class":117,"line":1205},178,[115,1207,1208],{},"                #try to move the ant position\n",[115,1210,1212],{"class":117,"line":1211},179,[115,1213,1214],{},"                move(index,direction)\n",[115,1216,1218],{"class":117,"line":1217},180,[115,1219,1220],{},"                #check to see if the position was moved\n",[115,1222,1224],{"class":117,"line":1223},181,[115,1225,1226],{},"                if ant_pos != not_moved:\n",[115,1228,1230],{"class":117,"line":1229},182,[115,1231,1232],{},"                    #set record to false in the settings to turn of frame recording\n",[115,1234,1236],{"class":117,"line":1235},183,[115,1237,1238],{},"                    if record == True:\n",[115,1240,1242],{"class":117,"line":1241},184,[115,1243,1244],{},"                        #records a new frame every frame_interval frame\n",[115,1246,1248],{"class":117,"line":1247},185,[115,1249,1250],{},"                        if step % frame_interval == 0:\n",[115,1252,1254],{"class":117,"line":1253},186,[115,1255,1256],{},"                            counter += 1\n",[115,1258,1260],{"class":117,"line":1259},187,[115,1261,1262],{},"                            print(\"Generating frame number \" + str(counter))\n",[115,1264,1266],{"class":117,"line":1265},188,[115,1267,1268],{},"                            get_pix_series()\n",[115,1270,1272],{"class":117,"line":1271},189,[115,1273,1274],{},"                            save_image(counter)\n",[115,1276,1278],{"class":117,"line":1277},190,[115,1279,1280],{},"                    break\n",[115,1282,1284],{"class":117,"line":1283},191,[115,1285,1286],{},"                else:\n",[115,1288,1290],{"class":117,"line":1289},192,[115,1291,1292],{},"                    continue\n",[115,1294,1296],{"class":117,"line":1295},193,[115,1297,1298],{},"            except:\n",[115,1300,1302],{"class":117,"line":1301},194,[115,1303,1304],{},"                #print(\"Out of bounds at step number \" + str(step))\n",[115,1306,1308],{"class":117,"line":1307},195,[115,1309,1310],{},"                oob = step\n",[115,1312,1314],{"class":117,"line":1313},196,[115,1315,1316],{},"                return\n",[115,1318,1320],{"class":117,"line":1319},197,[115,1321,208],{"emptyLinePlaceholder":51},[115,1323,1325],{"class":117,"line":1324},198,[115,1326,1327],{},"def save_image(i):\n",[115,1329,1331],{"class":117,"line":1330},199,[115,1332,1333],{},"    #give access to the image instantiated at the beginning of the script\n",[115,1335,1337],{"class":117,"line":1336},200,[115,1338,1339],{},"    global im1\n",[115,1341,1343],{"class":117,"line":1342},201,[115,1344,1345],{},"    #fill blank image canvas with pix_series pixel data\n",[115,1347,1349],{"class":117,"line":1348},202,[115,1350,1351],{},"    im1.putdata(pix_series)\n",[115,1353,1355],{"class":117,"line":1354},203,[115,1356,1357],{},"    #to rescale the image, set the scale variable in settings and call resize on im1\n",[115,1359,1361],{"class":117,"line":1360},204,[115,1362,1363],{},"    im1.resize((scale*im1.size[0],scale*im1.size[1])).save('%s.png' % (moves))\n",[115,1365,1367],{"class":117,"line":1366},205,[115,1368,208],{"emptyLinePlaceholder":51},[115,1370,1372],{"class":117,"line":1371},206,[115,1373,1374],{},"#builds a dictionary to count pixels by color\n",[115,1376,1378],{"class":117,"line":1377},207,[115,1379,1380],{},"def build_df_row():\n",[115,1382,1384],{"class":117,"line":1383},208,[115,1385,1386],{},"    colors_dict = {str(val): 0 for val, color in enumerate(pixel_colors)}\n",[115,1388,1390],{"class":117,"line":1389},209,[115,1391,1392],{},"    moves_dict = {'moves':moves}\n",[115,1394,1396],{"class":117,"line":1395},210,[115,1397,1398],{},"    last_step = {'last_step':oob}\n",[115,1400,1402],{"class":117,"line":1401},211,[115,1403,1404],{},"    row_dict = dict(colors_dict.items()+moves_dict.items()+last_step.items())\n",[115,1406,1408],{"class":117,"line":1407},212,[115,1409,1410],{},"    for x in pix_list:\n",[115,1412,1414],{"class":117,"line":1413},213,[115,1415,1416],{},"        pixel_color = str(x[2])\n",[115,1418,1420],{"class":117,"line":1419},214,[115,1421,1422],{},"        #print(pixel_color)\n",[115,1424,1426],{"class":117,"line":1425},215,[115,1427,1428],{},"        row_dict[pixel_color] += 1\n",[115,1430,1432],{"class":117,"line":1431},216,[115,1433,1434],{},"    return row_dict\n",[115,1436,1438],{"class":117,"line":1437},217,[115,1439,208],{"emptyLinePlaceholder":51},[115,1441,1443],{"class":117,"line":1442},218,[115,1444,1445],{},"#uncomment below to overwrite moves_list\n",[115,1447,1449],{"class":117,"line":1448},219,[115,1450,1451],{},"#moves_list = ['LR', 'RRLR']\n",[115,1453,1455],{"class":117,"line":1454},220,[115,1456,208],{"emptyLinePlaceholder":51},[115,1458,1460],{"class":117,"line":1459},221,[115,1461,1462],{},"for _, moves in enumerate(moves_list):\n",[115,1464,1466],{"class":117,"line":1465},222,[115,1467,1468],{},"    oob = 0\n",[115,1470,1472],{"class":117,"line":1471},223,[115,1473,1474],{},"    dir_path = str(_)\n",[115,1476,1478],{"class":117,"line":1477},224,[115,1479,208],{"emptyLinePlaceholder":51},[115,1481,1483],{"class":117,"line":1482},225,[115,1484,1485],{},"    #make a new directory for each new ant walk in walks based on the the walk number and navigate to that directory\n",[115,1487,1489],{"class":117,"line":1488},226,[115,1490,1491],{},"    if record == True:\n",[115,1493,1495],{"class":117,"line":1494},227,[115,1496,1497],{},"        #make a new directory to record frames for a give ant if record is set to true and that directory does not yet exist\n",[115,1499,1501],{"class":117,"line":1500},228,[115,1502,1503],{},"        if not os.path.isdir(dir_path):\n",[115,1505,1507],{"class":117,"line":1506},229,[115,1508,1509],{},"            os.makedirs(dir_path)\n",[115,1511,1513],{"class":117,"line":1512},230,[115,1514,1515],{},"        #otherwise just change into the directory\n",[115,1517,1519],{"class":117,"line":1518},231,[115,1520,586],{},[115,1522,1524],{"class":117,"line":1523},232,[115,1525,1526],{},"            os.chdir(dir_path)\n",[115,1528,1530],{"class":117,"line":1529},233,[115,1531,208],{"emptyLinePlaceholder":51},[115,1533,1535],{"class":117,"line":1534},234,[115,1536,1537],{},"    #set ant at middle of grid\n",[115,1539,1541],{"class":117,"line":1540},235,[115,1542,1543],{},"    ant_pos = int((length*width)/2) + int(width/2)\n",[115,1545,1547],{"class":117,"line":1546},236,[115,1548,208],{"emptyLinePlaceholder":51},[115,1550,1552],{"class":117,"line":1551},237,[115,1553,1554],{},"    #moves = len(moves)\n",[115,1556,1558],{"class":117,"line":1557},238,[115,1559,1560],{},"    pixel_colors = color_choices[:(len(moves))]\n",[115,1562,1564],{"class":117,"line":1563},239,[115,1565,208],{"emptyLinePlaceholder":51},[115,1567,1569],{"class":117,"line":1568},240,[115,1570,1571],{},"    #defines an empty list of elements [x,y,0] where x amd y are the position 0 is the 0ht color in the color list (the base canvas color)\n",[115,1573,1575],{"class":117,"line":1574},241,[115,1576,1577],{},"    pix_list = []\n",[115,1579,1581],{"class":117,"line":1580},242,[115,1582,1583],{},"    for x in range(length):\n",[115,1585,1587],{"class":117,"line":1586},243,[115,1588,1589],{},"        for y in range(width):\n",[115,1591,1593],{"class":117,"line":1592},244,[115,1594,1595],{},"            a = [x,y,0]\n",[115,1597,1599],{"class":117,"line":1598},245,[115,1600,1601],{},"            pix_list.append(a)\n",[115,1603,1605],{"class":117,"line":1604},246,[115,1606,208],{"emptyLinePlaceholder":51},[115,1608,1610],{"class":117,"line":1609},247,[115,1611,1612],{},"    #pix_series is a list of pixels that is passed into the put_data function to generate an image\n",[115,1614,1616],{"class":117,"line":1615},248,[115,1617,1071],{},[115,1619,1621],{"class":117,"line":1620},249,[115,1622,208],{"emptyLinePlaceholder":51},[115,1624,1626],{"class":117,"line":1625},250,[115,1627,1628],{},"    #counter keeps track of the frame number (if recording a series of images)\n",[115,1630,1632],{"class":117,"line":1631},251,[115,1633,1634],{},"    counter = 0\n",[115,1636,1638],{"class":117,"line":1637},252,[115,1639,208],{"emptyLinePlaceholder":51},[115,1641,1643],{"class":117,"line":1642},253,[115,1644,1645],{},"    #run the ant\n",[115,1647,1649],{"class":117,"line":1648},254,[115,1650,1651],{},"    run()\n",[115,1653,1655],{"class":117,"line":1654},255,[115,1656,208],{"emptyLinePlaceholder":51},[115,1658,1660],{"class":117,"line":1659},256,[115,1661,1662],{},"    #capture the final state of the grid with get_pix_series\n",[115,1664,1666],{"class":117,"line":1665},257,[115,1667,1668],{},"    get_pix_series()\n",[115,1670,1672],{"class":117,"line":1671},258,[115,1673,208],{"emptyLinePlaceholder":51},[115,1675,1677],{"class":117,"line":1676},259,[115,1678,1679],{},"    #uncomment below to preview images for testing\n",[115,1681,1683],{"class":117,"line":1682},260,[115,1684,1685],{},"    #im1.putdata(pix_series)\n",[115,1687,1689],{"class":117,"line":1688},261,[115,1690,1691],{},"    #im1.resize((scale*im1.size[0],scale*im1.size[1])).show()\n",[115,1693,1695],{"class":117,"line":1694},262,[115,1696,208],{"emptyLinePlaceholder":51},[115,1698,1700],{"class":117,"line":1699},263,[115,1701,1702],{},"    #build a dictionary with pixel counts\n",[115,1704,1706],{"class":117,"line":1705},264,[115,1707,1708],{},"    colors_dict = build_df_row()\n",[115,1710,1712],{"class":117,"line":1711},265,[115,1713,1714],{},"    row_df = pd.DataFrame(colors_dict, index=[0])\n",[115,1716,1718],{"class":117,"line":1717},266,[115,1719,1720],{},"    df = df.append(row_df, ignore_index=True)\n",[115,1722,1724],{"class":117,"line":1723},267,[115,1725,208],{"emptyLinePlaceholder":51},[115,1727,1729],{"class":117,"line":1728},268,[115,1730,1731],{},"    if record_final_image == True:\n",[115,1733,1735],{"class":117,"line":1734},269,[115,1736,1737],{},"        os.chdir(os.path.expanduser('~/Documents/CA_1/imgs/'))\n",[115,1739,1741],{"class":117,"line":1740},270,[115,1742,1743],{},"        save_image(_)\n",[115,1745,1747],{"class":117,"line":1746},271,[115,1748,1749],{},"        os.chdir('../')\n",[115,1751,1753],{"class":117,"line":1752},272,[115,1754,208],{"emptyLinePlaceholder":51},[115,1756,1758],{"class":117,"line":1757},273,[115,1759,1760],{},"    #summary\n",[115,1762,1764],{"class":117,"line":1763},274,[115,1765,1766],{},"    print(str(_), end=' ')\n",[115,1768,1770],{"class":117,"line":1769},275,[115,1771,208],{"emptyLinePlaceholder":51},[115,1773,1775],{"class":117,"line":1774},276,[115,1776,1777],{},"os.chdir(os.path.expanduser('~/Documents/CA_1/'))\n",[115,1779,1781],{"class":117,"line":1780},277,[115,1782,1783],{},"df.to_csv('ants_hist_.csv', index=False)\n",[1785,1786,1788],"h1",{"id":1787},"clustering","Clustering",[10,1790,1791,1792,1795],{},"We now have a csv file where each row is a 16-state termite and the columns labeled 0 through 15 count the sum of pixels in each state (the different colors). With ",[29,1793,1794],{},"last_step"," we also track the last step reached in the event that the ant runs into the edge of the grid. This will be helpful in clustering ants that form highways in different groups from those that complete 100000 steps inside the 200 x 200 grid.",[10,1797,1798],{},"First let's read the csv into a pandas DataFrame and look at some of the data.",[106,1800,1801],{"className":108,"code":109,"language":110,"meta":111,"style":111},[29,1802,1803,1807,1811,1815,1819,1823,1827,1831,1835,1839,1843,1847,1851],{"__ignoreMap":111},[115,1804,1805],{"class":117,"line":118},[115,1806,121],{},[115,1808,1809],{"class":117,"line":124},[115,1810,127],{},[115,1812,1813],{"class":117,"line":130},[115,1814,133],{},[115,1816,1817],{"class":117,"line":136},[115,1818,139],{},[115,1820,1821],{"class":117,"line":142},[115,1822,145],{},[115,1824,1825],{"class":117,"line":148},[115,1826,151],{},[115,1828,1829],{"class":117,"line":154},[115,1830,157],{},[115,1832,1833],{"class":117,"line":160},[115,1834,163],{},[115,1836,1837],{"class":117,"line":166},[115,1838,169],{},[115,1840,1841],{"class":117,"line":172},[115,1842,175],{},[115,1844,1845],{"class":117,"line":178},[115,1846,181],{},[115,1848,1849],{"class":117,"line":184},[115,1850,187],{},[115,1852,1853],{"class":117,"line":190},[115,1854,193],{},[106,1856,1858],{"className":108,"code":1857,"language":110,"meta":111,"style":111},"os.chdir(os.path.expanduser('~/Documents/CA_1/'))\ndf1 = pd.read_csv('ants_hist_.csv')\n",[29,1859,1860,1864],{"__ignoreMap":111},[115,1861,1862],{"class":117,"line":118},[115,1863,1777],{},[115,1865,1866],{"class":117,"line":124},[115,1867,1868],{},"df1 = pd.read_csv('ants_hist_.csv')\n",[106,1870,1872],{"className":108,"code":1871,"language":110,"meta":111,"style":111},"df1.shape\n",[29,1873,1874],{"__ignoreMap":111},[115,1875,1876],{"class":117,"line":118},[115,1877,1871],{},[106,1879,1884],{"className":1880,"code":1882,"language":1883},[1881],"language-text","(32768, 18)\n","text",[29,1885,1882],{"__ignoreMap":111},[106,1887,1889],{"className":108,"code":1888,"language":110,"meta":111,"style":111},"df1.sample(3)\n",[29,1890,1891],{"__ignoreMap":111},[115,1892,1893],{"class":117,"line":118},[115,1894,1888],{},[1896,1897,1898],"div",{},[1899,1900,1903,1904,1903,1968],"table",{"border":118,"className":1901},[1902],"dataframe","\n  ",[1905,1906,1907,1908,1903],"thead",{},"\n    ",[1909,1910,1912,1913,1912,1916,1912,1918,1912,1921,1912,1924,1912,1927,1912,1930,1912,1933,1912,1936,1912,1939,1912,1942,1912,1945,1912,1948,1912,1951,1912,1954,1912,1957,1912,1960,1912,1963,1912,1965,1907],"tr",{"style":1911},"text-align: right;","\n      ",[1914,1915],"th",{},[1914,1917,48],{},[1914,1919,1920],{},"1",[1914,1922,1923],{},"10",[1914,1925,1926],{},"11",[1914,1928,1929],{},"12",[1914,1931,1932],{},"13",[1914,1934,1935],{},"14",[1914,1937,1938],{},"15",[1914,1940,1941],{},"2",[1914,1943,1944],{},"3",[1914,1946,1947],{},"4",[1914,1949,1950],{},"5",[1914,1952,1953],{},"6",[1914,1955,1956],{},"7",[1914,1958,1959],{},"8",[1914,1961,1962],{},"9",[1914,1964,1794],{},[1914,1966,1967],{},"moves",[1969,1970,1907,1971,1907,2029,1907,2086,1903],"tbody",{},[1909,1972,1912,1973,1912,1976,1912,1980,1912,1983,1912,1986,1912,1989,1912,1991,1912,1994,1912,1997,1912,2000,1912,2003,1912,2006,1912,2009,1912,2012,1912,2015,1912,2018,1912,2021,1912,2024,1912,2026,1907],{},[1914,1974,1975],{},"25892",[1977,1978,1979],"td",{},"37741",[1977,1981,1982],{},"212",[1977,1984,1985],{},"135",[1977,1987,1988],{},"148",[1977,1990,1985],{},[1977,1992,1993],{},"152",[1977,1995,1996],{},"119",[1977,1998,1999],{},"115",[1977,2001,2002],{},"176",[1977,2004,2005],{},"168",[1977,2007,2008],{},"129",[1977,2010,2011],{},"182",[1977,2013,2014],{},"155",[1977,2016,2017],{},"130",[1977,2019,2020],{},"162",[1977,2022,2023],{},"141",[1977,2025,48],{},[1977,2027,2028],{},"RRRLLRLRLLRLLRLL",[1909,2030,1912,2031,1912,2034,1912,2037,1912,2040,1912,2043,1912,2046,1912,2049,1912,2052,1912,2055,1912,2058,1912,2061,1912,2064,1912,2067,1912,2070,1912,2073,1912,2076,1912,2078,1912,2081,1912,2083,1907],{},[1914,2032,2033],{},"27264",[1977,2035,2036],{},"35861",[1977,2038,2039],{},"117",[1977,2041,2042],{},"444",[1977,2044,2045],{},"421",[1977,2047,2048],{},"497",[1977,2050,2051],{},"395",[1977,2053,2054],{},"327",[1977,2056,2057],{},"222",[1977,2059,2060],{},"345",[1977,2062,2063],{},"143",[1977,2065,2066],{},"126",[1977,2068,2069],{},"218",[1977,2071,2072],{},"241",[1977,2074,2075],{},"187",[1977,2077,1985],{},[1977,2079,2080],{},"321",[1977,2082,48],{},[1977,2084,2085],{},"RRRLRLRLRLLLLLLL",[1909,2087,1912,2088,1912,2091,1912,2094,1912,2097,1912,2100,1912,2102,1912,2105,1912,2107,1912,2110,1912,2113,1912,2116,1912,2119,1912,2122,1912,2124,1912,2126,1912,2129,1912,2131,1912,2134,1912,2136,1907],{},[1914,2089,2090],{},"10181",[1977,2092,2093],{},"37202",[1977,2095,2096],{},"300",[1977,2098,2099],{},"177",[1977,2101,2017],{},[1977,2103,2104],{},"150",[1977,2106,1988],{},[1977,2108,2109],{},"124",[1977,2111,2112],{},"156",[1977,2114,2115],{},"191",[1977,2117,2118],{},"217",[1977,2120,2121],{},"234",[1977,2123,2118],{},[1977,2125,2020],{},[1977,2127,2128],{},"200",[1977,2130,2057],{},[1977,2132,2133],{},"170",[1977,2135,48],{},[1977,2137,2138],{},"RLRLLRRRRRLLLRLR",[10,2140,2141,2142,2145,2146,2149],{},"There are 32768 unique instructions for 16-state termites ",[29,2143,2144],{},"(2^16)/2 = 32768",". Let's check to see how many of these are duplicates. We want to select only the state-counts and then call ",[29,2147,2148],{},".drop_duplicates"," on that DataFrame.",[106,2151,2153],{"className":108,"code":2152,"language":110,"meta":111,"style":111},"df2 = df1.iloc[:,0:16]\n",[29,2154,2155],{"__ignoreMap":111},[115,2156,2157],{"class":117,"line":118},[115,2158,2152],{},[106,2160,2162],{"className":108,"code":2161,"language":110,"meta":111,"style":111},"df2.shape[0] - df2.drop_duplicates().shape[0]\n",[29,2163,2164],{"__ignoreMap":111},[115,2165,2166],{"class":117,"line":118},[115,2167,2161],{},[106,2169,2172],{"className":2170,"code":2171,"language":1883},[1881],"1566\n",[29,2173,2171],{"__ignoreMap":111},[10,2175,2176],{},"1566 of the 16-state termites. It might be helpful to remove these termites from the DataFrame before we cluster them.",[106,2178,2180],{"className":108,"code":2179,"language":110,"meta":111,"style":111},"unique_termites_index = df2.drop_duplicates().index\n",[29,2181,2182],{"__ignoreMap":111},[115,2183,2184],{"class":117,"line":118},[115,2185,2179],{},[106,2187,2189],{"className":108,"code":2188,"language":110,"meta":111,"style":111},"df = df1.loc[unique_termites_index,:]\n",[29,2190,2191],{"__ignoreMap":111},[115,2192,2193],{"class":117,"line":118},[115,2194,2188],{},[106,2196,2198],{"className":108,"code":2197,"language":110,"meta":111,"style":111},"df['steps_taken'] = [100000 if x==0 else x for x in df.last_step]\ndf['file_names'] = [x+'.png' for x in df.moves]\ndf['move_len'] = [len(x) for x in df.moves]\n",[29,2199,2200,2205,2210],{"__ignoreMap":111},[115,2201,2202],{"class":117,"line":118},[115,2203,2204],{},"df['steps_taken'] = [100000 if x==0 else x for x in df.last_step]\n",[115,2206,2207],{"class":117,"line":124},[115,2208,2209],{},"df['file_names'] = [x+'.png' for x in df.moves]\n",[115,2211,2212],{"class":117,"line":130},[115,2213,2214],{},"df['move_len'] = [len(x) for x in df.moves]\n",[106,2216,2218],{"className":108,"code":2217,"language":110,"meta":111,"style":111},"df.head()\n",[29,2219,2220],{"__ignoreMap":111},[115,2221,2222],{"class":117,"line":118},[115,2223,2217],{},[1896,2225,2226,2564],{},[1899,2227,1903,2229,1903,2281],{"border":118,"className":2228},[1902],[1905,2230,1907,2231,1903],{},[1909,2232,1912,2233,1912,2235,1912,2237,1912,2239,1912,2241,1912,2243,1912,2245,1912,2247,1912,2249,1912,2251,1912,2253,1912,2255,1912,2258,1912,2260,1912,2262,1912,2264,1912,2266,1912,2268,1912,2270,1912,2272,1912,2275,1912,2278,1907],{"style":1911},[1914,2234],{},[1914,2236,48],{},[1914,2238,1920],{},[1914,2240,1923],{},[1914,2242,1926],{},[1914,2244,1929],{},[1914,2246,1932],{},[1914,2248,1935],{},[1914,2250,1938],{},[1914,2252,1941],{},[1914,2254,1944],{},[1914,2256,2257],{},"...",[1914,2259,1950],{},[1914,2261,1953],{},[1914,2263,1956],{},[1914,2265,1959],{},[1914,2267,1962],{},[1914,2269,1794],{},[1914,2271,1967],{},[1914,2273,2274],{},"steps_taken",[1914,2276,2277],{},"file_names",[1914,2279,2280],{},"move_len",[1969,2282,1907,2283,1907,2346,1907,2398,1907,2450,1907,2511,1903],{},[1909,2284,1912,2285,1912,2287,1912,2290,1912,2293,1912,2296,1912,2299,1912,2302,1912,2305,1912,2308,1912,2311,1912,2314,1912,2317,1912,2319,1912,2322,1912,2324,1912,2326,1912,2329,1912,2332,1912,2334,1912,2337,1912,2340,1912,2343,1907],{},[1914,2286,48],{},[1977,2288,2289],{},"36381",[1977,2291,2292],{},"584",[1977,2294,2295],{},"36",[1977,2297,2298],{},"32",[1977,2300,2301],{},"41",[1977,2303,2304],{},"85",[1977,2306,2307],{},"179",[1977,2309,2310],{},"174",[1977,2312,2313],{},"1864",[1977,2315,2316],{},"325",[1977,2318,2257],{},[1977,2320,2321],{},"45",[1977,2323,2321],{},[1977,2325,2298],{},[1977,2327,2328],{},"31",[1977,2330,2331],{},"37",[1977,2333,48],{},[1977,2335,2336],{},"RLLLLLLLLLLLLLLL",[1977,2338,2339],{},"100000",[1977,2341,2342],{},"RLLLLLLLLLLLLLLL.png",[1977,2344,2345],{},"16",[1909,2347,1912,2348,1912,2350,1912,2353,1912,2356,1912,2358,1912,2360,1912,2362,1912,2364,1912,2366,1912,2368,1912,2371,1912,2374,1912,2376,1912,2378,1912,2380,1912,2382,1912,2384,1912,2386,1912,2388,1912,2391,1912,2393,1912,2396,1907],{},[1914,2349,1920],{},[1977,2351,2352],{},"39857",[1977,2354,2355],{},"44",[1977,2357,1947],{},[1977,2359,48],{},[1977,2361,1953],{},[1977,2363,48],{},[1977,2365,48],{},[1977,2367,1947],{},[1977,2369,2370],{},"27",[1977,2372,2373],{},"17",[1977,2375,2257],{},[1977,2377,1959],{},[1977,2379,1944],{},[1977,2381,1926],{},[1977,2383,1953],{},[1977,2385,1947],{},[1977,2387,48],{},[1977,2389,2390],{},"RLLLLLLLLLLLLLLR",[1977,2392,2339],{},[1977,2394,2395],{},"RLLLLLLLLLLLLLLR.png",[1977,2397,2345],{},[1909,2399,1912,2400,1912,2402,1912,2405,1912,2408,1912,2410,1912,2412,1912,2414,1912,2416,1912,2418,1912,2420,1912,2423,1912,2425,1912,2427,1912,2429,1912,2431,1912,2433,1912,2436,1912,2438,1912,2440,1912,2443,1912,2445,1912,2448,1907],{},[1914,2401,1941],{},[1977,2403,2404],{},"39804",[1977,2406,2407],{},"48",[1977,2409,1950],{},[1977,2411,1929],{},[1977,2413,1956],{},[1977,2415,1962],{},[1977,2417,1956],{},[1977,2419,48],{},[1977,2421,2422],{},"24",[1977,2424,1929],{},[1977,2426,2257],{},[1977,2428,1926],{},[1977,2430,1962],{},[1977,2432,1956],{},[1977,2434,2435],{},"20",[1977,2437,1950],{},[1977,2439,48],{},[1977,2441,2442],{},"RLLLLLLLLLLLLLRL",[1977,2444,2339],{},[1977,2446,2447],{},"RLLLLLLLLLLLLLRL.png",[1977,2449,2345],{},[1909,2451,1912,2452,1912,2454,1912,2457,1912,2460,1912,2463,1912,2466,1912,2469,1912,2472,1912,2475,1912,2477,1912,2480,1912,2483,1912,2485,1912,2487,1912,2490,1912,2493,1912,2496,1912,2499,1912,2501,1912,2504,1912,2506,1912,2509,1907],{},[1914,2453,1944],{},[1977,2455,2456],{},"37223",[1977,2458,2459],{},"346",[1977,2461,2462],{},"70",[1977,2464,2465],{},"97",[1977,2467,2468],{},"89",[1977,2470,2471],{},"122",[1977,2473,2474],{},"100",[1977,2476,2109],{},[1977,2478,2479],{},"1150",[1977,2481,2482],{},"216",[1977,2484,2257],{},[1977,2486,2304],{},[1977,2488,2489],{},"83",[1977,2491,2492],{},"61",[1977,2494,2495],{},"60",[1977,2497,2498],{},"55",[1977,2500,48],{},[1977,2502,2503],{},"RLLLLLLLLLLLLLRR",[1977,2505,2339],{},[1977,2507,2508],{},"RLLLLLLLLLLLLLRR.png",[1977,2510,2345],{},[1909,2512,1912,2513,1912,2515,1912,2518,1912,2521,1912,2524,1912,2526,1912,2528,1912,2530,1912,2532,1912,2534,1912,2537,1912,2539,1912,2541,1912,2543,1912,2545,1912,2547,1912,2550,1912,2552,1912,2554,1912,2557,1912,2559,1912,2562,1907],{},[1914,2514,1947],{},[1977,2516,2517],{},"39678",[1977,2519,2520],{},"76",[1977,2522,2523],{},"22",[1977,2525,2345],{},[1977,2527,2373],{},[1977,2529,1959],{},[1977,2531,1920],{},[1977,2533,1941],{},[1977,2535,2536],{},"47",[1977,2538,2373],{},[1977,2540,2257],{},[1977,2542,2328],{},[1977,2544,1935],{},[1977,2546,1938],{},[1977,2548,2549],{},"26",[1977,2551,1926],{},[1977,2553,48],{},[1977,2555,2556],{},"RLLLLLLLLLLLLRLL",[1977,2558,2339],{},[1977,2560,2561],{},"RLLLLLLLLLLLLRLL.png",[1977,2563,2345],{},[10,2565,2566],{},"5 rows × 21 columns",[106,2568,2570],{"className":108,"code":2569,"language":110,"meta":111,"style":111},"df.index = df.file_names\n",[29,2571,2572],{"__ignoreMap":111},[115,2573,2574],{"class":117,"line":118},[115,2575,2569],{},[10,2577,2578],{},"Here's a quick look at the distribution of the base canvas color (red in the images below) over all of the unique termites.",[106,2580,2582],{"className":108,"code":2581,"language":110,"meta":111,"style":111},"x = '0'\nsns.set_style('whitegrid')\nplt.figure(figsize=(12,4))\ndf[(df[x]>0)][x].hist(bins=250)\nplt.xlabel('Count of Cells in state 0')\nplt.ylabel('Count')\nplt.title('Histogram Showing Termite Count by number of cells in state 0')\n",[29,2583,2584,2589,2594,2599,2604,2609,2614],{"__ignoreMap":111},[115,2585,2586],{"class":117,"line":118},[115,2587,2588],{},"x = '0'\n",[115,2590,2591],{"class":117,"line":124},[115,2592,2593],{},"sns.set_style('whitegrid')\n",[115,2595,2596],{"class":117,"line":130},[115,2597,2598],{},"plt.figure(figsize=(12,4))\n",[115,2600,2601],{"class":117,"line":136},[115,2602,2603],{},"df[(df[x]>0)][x].hist(bins=250)\n",[115,2605,2606],{"class":117,"line":142},[115,2607,2608],{},"plt.xlabel('Count of Cells in state 0')\n",[115,2610,2611],{"class":117,"line":148},[115,2612,2613],{},"plt.ylabel('Count')\n",[115,2615,2616],{"class":117,"line":154},[115,2617,2618],{},"plt.title('Histogram Showing Termite Count by number of cells in state 0')\n",[106,2620,2623],{"className":2621,"code":2622,"language":1883},[1881],"\u003Cmatplotlib.text.Text at 0x116dee10>\n",[29,2624,2622],{"__ignoreMap":111},[10,2626,2627],{},[13,2628],{"alt":15,"src":2629},"/static/ants_files/ants_20_1.png",[106,2631,2633],{"className":108,"code":2632,"language":110,"meta":111,"style":111},"df.shape\n",[29,2634,2635],{"__ignoreMap":111},[115,2636,2637],{"class":117,"line":118},[115,2638,2632],{},[106,2640,2643],{"className":2641,"code":2642,"language":1883},[1881],"(31202, 21)\n",[29,2644,2642],{"__ignoreMap":111},[10,2646,2647],{},"Now we can prepare a DataFrame that we will feed in to the clustering model. We will take only the pixel counts and the total number of steps taken.",[106,2649,2651],{"className":108,"code":2650,"language":110,"meta":111,"style":111},"X = df[df.move_len==16].iloc[:,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,18]]\n",[29,2652,2653],{"__ignoreMap":111},[115,2654,2655],{"class":117,"line":118},[115,2656,2650],{},[106,2658,2660],{"className":108,"code":2659,"language":110,"meta":111,"style":111},"X.columns\n",[29,2661,2662],{"__ignoreMap":111},[115,2663,2664],{"class":117,"line":118},[115,2665,2659],{},[106,2667,2670],{"className":2668,"code":2669,"language":1883},[1881],"Index([u'0', u'1', u'10', u'11', u'12', u'13', u'14', u'15', u'2', u'3', u'4',\n       u'5', u'6', u'7', u'8', u'9', u'steps_taken'],\n      dtype='object')\n",[29,2671,2669],{"__ignoreMap":111},[10,2673,2674],{},"Most of the termites completed all 100000 steps within the grid boundries.",[106,2676,2678],{"className":108,"code":2677,"language":110,"meta":111,"style":111},"X[X.steps_taken==100000].steps_taken.count()\n",[29,2679,2680],{"__ignoreMap":111},[115,2681,2682],{"class":117,"line":118},[115,2683,2677],{},[106,2685,2688],{"className":2686,"code":2687,"language":1883},[1881],"29955\n",[29,2689,2687],{"__ignoreMap":111},[10,2691,2692],{},"Here'a a histogram of the steps taken by ants that took less than 100000 steps.",[106,2694,2696],{"className":108,"code":2695,"language":110,"meta":111,"style":111},"X[X.steps_taken\u003C100000].steps_taken.hist()\nplt.title('Histogram of steps_taken for termites that stayed in bounds')\nplt.xlabel('steps_taken')\nplt.ylabel('Count')\n",[29,2697,2698,2703,2708,2713],{"__ignoreMap":111},[115,2699,2700],{"class":117,"line":118},[115,2701,2702],{},"X[X.steps_taken\u003C100000].steps_taken.hist()\n",[115,2704,2705],{"class":117,"line":124},[115,2706,2707],{},"plt.title('Histogram of steps_taken for termites that stayed in bounds')\n",[115,2709,2710],{"class":117,"line":130},[115,2711,2712],{},"plt.xlabel('steps_taken')\n",[115,2714,2715],{"class":117,"line":136},[115,2716,2613],{},[106,2718,2721],{"className":2719,"code":2720,"language":1883},[1881],"\u003Cmatplotlib.text.Text at 0x18aa3a58>\n",[29,2722,2720],{"__ignoreMap":111},[10,2724,2725],{},[13,2726],{"alt":15,"src":2727},"/static/ants_files/ants_28_1.png",[10,2729,2730],{},"Here's another look at the distribution of cells in state 3 over all termites:",[106,2732,2734],{"className":108,"code":2733,"language":110,"meta":111,"style":111},"x = '3' #other intereting states: 1, 7, 11, 15\nsns.set_style('whitegrid')\n#plt.figure(figsize=(12,8))\ndf[(df[x]>0)][x].hist(bins=100)\nplt.xlabel('Count of Cells in state 3')\nplt.ylabel('Count (termites)')\nplt.title('Histogram Showing Termite Count by number of cells in state 3')\n",[29,2735,2736,2741,2745,2750,2755,2760,2765],{"__ignoreMap":111},[115,2737,2738],{"class":117,"line":118},[115,2739,2740],{},"x = '3' #other intereting states: 1, 7, 11, 15\n",[115,2742,2743],{"class":117,"line":124},[115,2744,2593],{},[115,2746,2747],{"class":117,"line":130},[115,2748,2749],{},"#plt.figure(figsize=(12,8))\n",[115,2751,2752],{"class":117,"line":136},[115,2753,2754],{},"df[(df[x]>0)][x].hist(bins=100)\n",[115,2756,2757],{"class":117,"line":142},[115,2758,2759],{},"plt.xlabel('Count of Cells in state 3')\n",[115,2761,2762],{"class":117,"line":148},[115,2763,2764],{},"plt.ylabel('Count (termites)')\n",[115,2766,2767],{"class":117,"line":154},[115,2768,2769],{},"plt.title('Histogram Showing Termite Count by number of cells in state 3')\n",[106,2771,2774],{"className":2772,"code":2773,"language":1883},[1881],"\u003Cmatplotlib.text.Text at 0x15ba6630>\n",[29,2775,2773],{"__ignoreMap":111},[10,2777,2778],{},[13,2779],{"alt":15,"src":2780},"/static/ants_files/ants_30_1.png",[106,2782,2784],{"className":108,"code":2783,"language":110,"meta":111,"style":111},"X.shape\n",[29,2785,2786],{"__ignoreMap":111},[115,2787,2788],{"class":117,"line":118},[115,2789,2783],{},[106,2791,2794],{"className":2792,"code":2793,"language":1883},[1881],"(31202, 17)\n",[29,2795,2793],{"__ignoreMap":111},[10,2797,2798,2799,2803,2804,2809],{},"To cluster the different termites, we can use an unsupervised learning method called clustering. It is \"unsupervised\" because I don't explicitly tell the model what types termites should be grouped together. Instead, we will tell the model ",[2800,2801,2802],"em",{},"how many different clusters there are."," Of course, I really don't know how many clusters there should be. I do know from looking at the results that there seem to be many different types of behavior, patterns, sizes and other characteristics. We significantly reduce the complexity of clustering task by training the model on the count of pixels by what state the are in. I'm sure that the model won't be able to pick up on all of the nuances that humans can detect by looking at the images, but I have a feeling that it should be able to do a fairly good job. After we take a look at the individual clusters, we can try to find an optimal number of clusters by minimizing the total number of outliers of all the clusters. Here's ",[21,2805,2808],{"href":2806,"rel":2807},"http://papers.nips.cc/paper/5306-on-integrated-clustering-and-outlier-detection.pdf",[25],"an interesting paper"," on integrated clustering and outlier detection.",[10,2811,2812],{},"Here's how we set up the clustering model. For the numebr of clusters, let's start with 75.",[106,2814,2816],{"className":108,"code":2815,"language":110,"meta":111,"style":111},"k_means = cluster.KMeans(n_clusters=75, random_state=1)\n",[29,2817,2818],{"__ignoreMap":111},[115,2819,2820],{"class":117,"line":118},[115,2821,2815],{},[106,2823,2825],{"className":108,"code":2824,"language":110,"meta":111,"style":111},"k_means.fit(X, y=None)\n",[29,2826,2827],{"__ignoreMap":111},[115,2828,2829],{"class":117,"line":118},[115,2830,2824],{},[106,2832,2835],{"className":2833,"code":2834,"language":1883},[1881],"KMeans(algorithm='auto', copy_x=True, init='k-means++', max_iter=300,\n    n_clusters=75, n_init=10, n_jobs=1, precompute_distances='auto',\n    random_state=1, tol=0.0001, verbose=0)\n",[29,2836,2834],{"__ignoreMap":111},[10,2838,2839],{},"Then we add the cluster number to each termite:",[106,2841,2843],{"className":108,"code":2842,"language":110,"meta":111,"style":111},"X['clusters'] = k_means.labels_\n",[29,2844,2845],{"__ignoreMap":111},[115,2846,2847],{"class":117,"line":118},[115,2848,2842],{},[10,2850,2851],{},"Here's the breakdown of clusters by number of termites in each cluster:",[106,2853,2855],{"className":108,"code":2854,"language":110,"meta":111,"style":111},"plt.figure(figsize=(12,4))\nplt.bar(X.clusters.value_counts().index, X.clusters.value_counts())\nplt.xlabel('Cluster Number')\nplt.ylabel('Count')\nplt.title('Termite count by cluster')\n",[29,2856,2857,2861,2866,2871,2875],{"__ignoreMap":111},[115,2858,2859],{"class":117,"line":118},[115,2860,2598],{},[115,2862,2863],{"class":117,"line":124},[115,2864,2865],{},"plt.bar(X.clusters.value_counts().index, X.clusters.value_counts())\n",[115,2867,2868],{"class":117,"line":130},[115,2869,2870],{},"plt.xlabel('Cluster Number')\n",[115,2872,2873],{"class":117,"line":136},[115,2874,2613],{},[115,2876,2877],{"class":117,"line":142},[115,2878,2879],{},"plt.title('Termite count by cluster')\n",[106,2881,2884],{"className":2882,"code":2883,"language":1883},[1881],"\u003Cmatplotlib.text.Text at 0x15c4c358>\n",[29,2885,2883],{"__ignoreMap":111},[10,2887,2888],{},[13,2889],{"alt":15,"src":2890},"/static/ants_files/ants_38_1.png",[10,2892,2893],{},"And here is a list of the data shown above:",[106,2895,2897],{"className":108,"code":2896,"language":110,"meta":111,"style":111},"for x, y in zip(X.clusters.value_counts().index, X.clusters.value_counts()): print(' || cluster_num: ' + str(x) , 'count: ' + str(y), end='  ')\n",[29,2898,2899],{"__ignoreMap":111},[115,2900,2901],{"class":117,"line":118},[115,2902,2896],{},[106,2904,2907],{"className":2905,"code":2906,"language":1883},[1881]," || cluster_num: 16 count: 3293   || cluster_num: 71 count: 3036   || cluster_num: 46 count: 2993   || cluster_num: 0 count: 2752   || cluster_num: 23 count: 2667   || cluster_num: 52 count: 2540   || cluster_num: 50 count: 2185   || cluster_num: 5 count: 1412   || cluster_num: 19 count: 987   || cluster_num: 45 count: 816   || cluster_num: 44 count: 791   || cluster_num: 54 count: 686   || cluster_num: 42 count: 625   || cluster_num: 64 count: 603   || cluster_num: 21 count: 534   || cluster_num: 37 count: 518   || cluster_num: 38 count: 345   || cluster_num: 73 count: 315   || cluster_num: 57 count: 314   || cluster_num: 4 count: 302   || cluster_num: 22 count: 291   || cluster_num: 70 count: 285   || cluster_num: 8 count: 225   || cluster_num: 2 count: 224   || cluster_num: 9 count: 218   || cluster_num: 26 count: 182   || cluster_num: 49 count: 178   || cluster_num: 65 count: 138   || cluster_num: 29 count: 137   || cluster_num: 63 count: 123   || cluster_num: 25 count: 122   || cluster_num: 33 count: 105   || cluster_num: 1 count: 74   || cluster_num: 66 count: 71   || cluster_num: 27 count: 70   || cluster_num: 62 count: 66   || cluster_num: 69 count: 58   || cluster_num: 35 count: 56   || cluster_num: 11 count: 55   || cluster_num: 68 count: 54   || cluster_num: 14 count: 51   || cluster_num: 32 count: 49   || cluster_num: 30 count: 45   || cluster_num: 55 count: 38   || cluster_num: 6 count: 35   || cluster_num: 13 count: 34   || cluster_num: 43 count: 30   || cluster_num: 60 count: 30   || cluster_num: 58 count: 30   || cluster_num: 24 count: 29   || cluster_num: 39 count: 26   || cluster_num: 51 count: 25   || cluster_num: 3 count: 24   || cluster_num: 28 count: 24   || cluster_num: 15 count: 23   || cluster_num: 72 count: 23   || cluster_num: 17 count: 22   || cluster_num: 10 count: 22   || cluster_num: 34 count: 21   || cluster_num: 74 count: 20   || cluster_num: 36 count: 20   || cluster_num: 61 count: 19   || cluster_num: 31 count: 17   || cluster_num: 20 count: 13   || cluster_num: 18 count: 12   || cluster_num: 67 count: 12   || cluster_num: 12 count: 11   || cluster_num: 47 count: 11   || cluster_num: 59 count: 10   || cluster_num: 53 count: 8   || cluster_num: 7 count: 6   || cluster_num: 41 count: 6   || cluster_num: 40 count: 6   || cluster_num: 48 count: 3   || cluster_num: 56 count: 1\n",[29,2908,2906],{"__ignoreMap":111},[106,2910,2912],{"className":108,"code":2911,"language":110,"meta":111,"style":111},"cluster_dict = {x: y for x, y in zip(X.clusters.value_counts().index, X.clusters.value_counts())}\n",[29,2913,2914],{"__ignoreMap":111},[115,2915,2916],{"class":117,"line":118},[115,2917,2911],{},[10,2919,2920],{},"Now let's have a look at some of the termite clusters. We can use matplotlib and PIL to display multiple images using subplots.",[106,2922,2924],{"className":108,"code":2923,"language":110,"meta":111,"style":111},"#variables to manage the arrangement and spacing of cluster images\ntotal = 0\nrows = 0\nim_length = 0\n\n#set variables for cluster images based on cluster size\ndef set_spacing(files):\n    global total\n    global rows\n    global im_length\n    #columns = 6\n    total = len(files)\n    extras = len(files) % 6\n    if extras > 0:\n        total += (6 - extras)\n    rows = total/6.\n    im_length = rows*(20/9.)\n\n#use matplotlib to show images loaded with PIL\ndef show_images(cluster_num, samples = 0,  files_bool=False, files=None):\n    if files_bool==True:\n        files1 = np.random.choice(files.index, min(files.shape[0], samples), replace=False)\n    if (samples == 0) & (files_bool==False):\n        files1 = X[X.clusters==cluster_num].index\n    if (samples > 0) & (files_bool==False):\n        files1 = np.random.choice(X[X.clusters==cluster_num].index, min(cluster_dict[cluster_num],samples), replace=False)\n    set_spacing(files1)\n    plt.figure(figsize = (14,im_length))\n    os.chdir(os.path.expanduser('~/Documents/CA_1/imgs/'))\n    for num, x in enumerate(files1):\n        img = PIL.Image.open(x)\n        plt.subplot(rows,6,num+1)\n        plt.title(x.split('.')[0])\n        plt.axis('off')\n        plt.imshow(img)\n    print('Cluster #' + str(X.ix[x].clusters) + ' -- Cluster Total: ' + str(cluster_dict[X.ix[x].clusters]))\n",[29,2925,2926,2931,2936,2941,2946,2950,2955,2960,2965,2970,2975,2980,2985,2990,2995,3000,3005,3010,3014,3019,3024,3029,3034,3039,3044,3049,3054,3059,3064,3069,3074,3079,3084,3089,3094,3099],{"__ignoreMap":111},[115,2927,2928],{"class":117,"line":118},[115,2929,2930],{},"#variables to manage the arrangement and spacing of cluster images\n",[115,2932,2933],{"class":117,"line":124},[115,2934,2935],{},"total = 0\n",[115,2937,2938],{"class":117,"line":130},[115,2939,2940],{},"rows = 0\n",[115,2942,2943],{"class":117,"line":136},[115,2944,2945],{},"im_length = 0\n",[115,2947,2948],{"class":117,"line":142},[115,2949,208],{"emptyLinePlaceholder":51},[115,2951,2952],{"class":117,"line":148},[115,2953,2954],{},"#set variables for cluster images based on cluster size\n",[115,2956,2957],{"class":117,"line":154},[115,2958,2959],{},"def set_spacing(files):\n",[115,2961,2962],{"class":117,"line":160},[115,2963,2964],{},"    global total\n",[115,2966,2967],{"class":117,"line":166},[115,2968,2969],{},"    global rows\n",[115,2971,2972],{"class":117,"line":172},[115,2973,2974],{},"    global im_length\n",[115,2976,2977],{"class":117,"line":178},[115,2978,2979],{},"    #columns = 6\n",[115,2981,2982],{"class":117,"line":184},[115,2983,2984],{},"    total = len(files)\n",[115,2986,2987],{"class":117,"line":190},[115,2988,2989],{},"    extras = len(files) % 6\n",[115,2991,2992],{"class":117,"line":264},[115,2993,2994],{},"    if extras > 0:\n",[115,2996,2997],{"class":117,"line":269},[115,2998,2999],{},"        total += (6 - extras)\n",[115,3001,3002],{"class":117,"line":275},[115,3003,3004],{},"    rows = total/6.\n",[115,3006,3007],{"class":117,"line":281},[115,3008,3009],{},"    im_length = rows*(20/9.)\n",[115,3011,3012],{"class":117,"line":286},[115,3013,208],{"emptyLinePlaceholder":51},[115,3015,3016],{"class":117,"line":292},[115,3017,3018],{},"#use matplotlib to show images loaded with PIL\n",[115,3020,3021],{"class":117,"line":298},[115,3022,3023],{},"def show_images(cluster_num, samples = 0,  files_bool=False, files=None):\n",[115,3025,3026],{"class":117,"line":304},[115,3027,3028],{},"    if files_bool==True:\n",[115,3030,3031],{"class":117,"line":309},[115,3032,3033],{},"        files1 = np.random.choice(files.index, min(files.shape[0], samples), replace=False)\n",[115,3035,3036],{"class":117,"line":315},[115,3037,3038],{},"    if (samples == 0) & (files_bool==False):\n",[115,3040,3041],{"class":117,"line":321},[115,3042,3043],{},"        files1 = X[X.clusters==cluster_num].index\n",[115,3045,3046],{"class":117,"line":327},[115,3047,3048],{},"    if (samples > 0) & (files_bool==False):\n",[115,3050,3051],{"class":117,"line":332},[115,3052,3053],{},"        files1 = np.random.choice(X[X.clusters==cluster_num].index, min(cluster_dict[cluster_num],samples), replace=False)\n",[115,3055,3056],{"class":117,"line":338},[115,3057,3058],{},"    set_spacing(files1)\n",[115,3060,3061],{"class":117,"line":344},[115,3062,3063],{},"    plt.figure(figsize = (14,im_length))\n",[115,3065,3066],{"class":117,"line":349},[115,3067,3068],{},"    os.chdir(os.path.expanduser('~/Documents/CA_1/imgs/'))\n",[115,3070,3071],{"class":117,"line":355},[115,3072,3073],{},"    for num, x in enumerate(files1):\n",[115,3075,3076],{"class":117,"line":361},[115,3077,3078],{},"        img = PIL.Image.open(x)\n",[115,3080,3081],{"class":117,"line":366},[115,3082,3083],{},"        plt.subplot(rows,6,num+1)\n",[115,3085,3086],{"class":117,"line":372},[115,3087,3088],{},"        plt.title(x.split('.')[0])\n",[115,3090,3091],{"class":117,"line":378},[115,3092,3093],{},"        plt.axis('off')\n",[115,3095,3096],{"class":117,"line":383},[115,3097,3098],{},"        plt.imshow(img)\n",[115,3100,3101],{"class":117,"line":389},[115,3102,3103],{},"    print('Cluster #' + str(X.ix[x].clusters) + ' -- Cluster Total: ' + str(cluster_dict[X.ix[x].clusters]))\n",[106,3105,3107],{"className":108,"code":3106,"language":110,"meta":111,"style":111},"show_images(16, samples=12)\n",[29,3108,3109],{"__ignoreMap":111},[115,3110,3111],{"class":117,"line":118},[115,3112,3106],{},[106,3114,3117],{"className":3115,"code":3116,"language":1883},[1881],"Cluster #16 -- Cluster Total: 3293\n",[29,3118,3116],{"__ignoreMap":111},[10,3120,3121],{},[13,3122],{"alt":15,"src":3123},"/static/ants_files/ants_44_1.png",[106,3125,3127],{"className":108,"code":3126,"language":110,"meta":111,"style":111},"show_images(46, samples=12)\n",[29,3128,3129],{"__ignoreMap":111},[115,3130,3131],{"class":117,"line":118},[115,3132,3126],{},[106,3134,3137],{"className":3135,"code":3136,"language":1883},[1881],"Cluster #46 -- Cluster Total: 2993\n",[29,3138,3136],{"__ignoreMap":111},[10,3140,3141],{},[13,3142],{"alt":15,"src":3143},"/static/ants_files/ants_45_1.png",[106,3145,3147],{"className":108,"code":3146,"language":110,"meta":111,"style":111},"show_images(51, samples=12)\n",[29,3148,3149],{"__ignoreMap":111},[115,3150,3151],{"class":117,"line":118},[115,3152,3146],{},[106,3154,3157],{"className":3155,"code":3156,"language":1883},[1881],"Cluster #51 -- Cluster Total: 25\n",[29,3158,3156],{"__ignoreMap":111},[10,3160,3161],{},[13,3162],{"alt":15,"src":3163},"/static/ants_files/ants_46_1.png",[106,3165,3167],{"className":108,"code":3166,"language":110,"meta":111,"style":111},"show_images(18, samples=12)\n",[29,3168,3169],{"__ignoreMap":111},[115,3170,3171],{"class":117,"line":118},[115,3172,3166],{},[106,3174,3177],{"className":3175,"code":3176,"language":1883},[1881],"Cluster #18 -- Cluster Total: 12\n",[29,3178,3176],{"__ignoreMap":111},[10,3180,3181],{},[13,3182],{"alt":15,"src":3183},"/static/ants_files/ants_47_1.png",[106,3185,3187],{"className":108,"code":3186,"language":110,"meta":111,"style":111},"show_images(4, samples=12)\n",[29,3188,3189],{"__ignoreMap":111},[115,3190,3191],{"class":117,"line":118},[115,3192,3186],{},[106,3194,3197],{"className":3195,"code":3196,"language":1883},[1881],"Cluster #4 -- Cluster Total: 302\n",[29,3198,3196],{"__ignoreMap":111},[10,3200,3201],{},[13,3202],{"alt":15,"src":3203},"/static/ants_files/ants_48_1.png",[106,3205,3207],{"className":108,"code":3206,"language":110,"meta":111,"style":111},"show_images(5, samples=12)\n",[29,3208,3209],{"__ignoreMap":111},[115,3210,3211],{"class":117,"line":118},[115,3212,3206],{},[106,3214,3217],{"className":3215,"code":3216,"language":1883},[1881],"Cluster #5 -- Cluster Total: 1412\n",[29,3218,3216],{"__ignoreMap":111},[10,3220,3221],{},[13,3222],{"alt":15,"src":3223},"/static/ants_files/ants_49_1.png",[106,3225,3227],{"className":108,"code":3226,"language":110,"meta":111,"style":111},"show_images(6, samples=12)\n",[29,3228,3229],{"__ignoreMap":111},[115,3230,3231],{"class":117,"line":118},[115,3232,3226],{},[106,3234,3237],{"className":3235,"code":3236,"language":1883},[1881],"Cluster #6 -- Cluster Total: 35\n",[29,3238,3236],{"__ignoreMap":111},[10,3240,3241],{},[13,3242],{"alt":15,"src":3243},"/static/ants_files/ants_50_1.png",[106,3245,3247],{"className":108,"code":3246,"language":110,"meta":111,"style":111},"show_images(9, samples=12)\n",[29,3248,3249],{"__ignoreMap":111},[115,3250,3251],{"class":117,"line":118},[115,3252,3246],{},[106,3254,3257],{"className":3255,"code":3256,"language":1883},[1881],"Cluster #9 -- Cluster Total: 218\n",[29,3258,3256],{"__ignoreMap":111},[10,3260,3261],{},[13,3262],{"alt":15,"src":3263},"/static/ants_files/ants_51_1.png",[106,3265,3267],{"className":108,"code":3266,"language":110,"meta":111,"style":111},"show_images(12, samples=12)\n",[29,3268,3269],{"__ignoreMap":111},[115,3270,3271],{"class":117,"line":118},[115,3272,3266],{},[106,3274,3277],{"className":3275,"code":3276,"language":1883},[1881],"Cluster #12 -- Cluster Total: 11\n",[29,3278,3276],{"__ignoreMap":111},[10,3280,3281],{},[13,3282],{"alt":15,"src":3283},"/static/ants_files/ants_52_1.png",[10,3285,3286],{},"The next four cluster samples are the largest clusters:",[106,3288,3290],{"className":108,"code":3289,"language":110,"meta":111,"style":111},"show_images(30, samples=12)\n",[29,3291,3292],{"__ignoreMap":111},[115,3293,3294],{"class":117,"line":118},[115,3295,3289],{},[106,3297,3300],{"className":3298,"code":3299,"language":1883},[1881],"Cluster #30 -- Cluster Total: 45\n",[29,3301,3299],{"__ignoreMap":111},[10,3303,3304],{},[13,3305],{"alt":15,"src":3306},"/static/ants_files/ants_54_1.png",[106,3308,3309],{"className":108,"code":3289,"language":110,"meta":111,"style":111},[29,3310,3311],{"__ignoreMap":111},[115,3312,3313],{"class":117,"line":118},[115,3314,3289],{},[106,3316,3318],{"className":3317,"code":3299,"language":1883},[1881],[29,3319,3299],{"__ignoreMap":111},[10,3321,3322],{},[13,3323],{"alt":15,"src":3324},"/static/ants_files/ants_55_1.png",[106,3326,3328],{"className":108,"code":3327,"language":110,"meta":111,"style":111},"show_images(0, samples=12)\n",[29,3329,3330],{"__ignoreMap":111},[115,3331,3332],{"class":117,"line":118},[115,3333,3327],{},[106,3335,3338],{"className":3336,"code":3337,"language":1883},[1881],"Cluster #0 -- Cluster Total: 2752\n",[29,3339,3337],{"__ignoreMap":111},[10,3341,3342],{},[13,3343],{"alt":15,"src":3344},"/static/ants_files/ants_56_1.png",[106,3346,3348],{"className":108,"code":3347,"language":110,"meta":111,"style":111},"show_images(30, samples=15)\n",[29,3349,3350],{"__ignoreMap":111},[115,3351,3352],{"class":117,"line":118},[115,3353,3347],{},[106,3355,3357],{"className":3356,"code":3299,"language":1883},[1881],[29,3358,3299],{"__ignoreMap":111},[10,3360,3361],{},[13,3362],{"alt":15,"src":3363},"/static/ants_files/ants_57_1.png",[106,3365,3367],{"className":108,"code":3366,"language":110,"meta":111,"style":111},"show_images(63, samples=12)\n",[29,3368,3369],{"__ignoreMap":111},[115,3370,3371],{"class":117,"line":118},[115,3372,3366],{},[106,3374,3377],{"className":3375,"code":3376,"language":1883},[1881],"Cluster #63 -- Cluster Total: 123\n",[29,3378,3376],{"__ignoreMap":111},[10,3380,3381],{},[13,3382],{"alt":15,"src":3383},"/static/ants_files/ants_58_1.png",[106,3385,3387],{"className":108,"code":3386,"language":110,"meta":111,"style":111},"show_images(60, samples=12)\n",[29,3388,3389],{"__ignoreMap":111},[115,3390,3391],{"class":117,"line":118},[115,3392,3386],{},[106,3394,3397],{"className":3395,"code":3396,"language":1883},[1881],"Cluster #60 -- Cluster Total: 30\n",[29,3398,3396],{"__ignoreMap":111},[10,3400,3401],{},[13,3402],{"alt":15,"src":3403},"/static/ants_files/ants_59_1.png",[106,3405,3407],{"className":108,"code":3406,"language":110,"meta":111,"style":111},"show_images(59, samples=12)\n",[29,3408,3409],{"__ignoreMap":111},[115,3410,3411],{"class":117,"line":118},[115,3412,3406],{},[106,3414,3417],{"className":3415,"code":3416,"language":1883},[1881],"Cluster #59 -- Cluster Total: 10\n",[29,3418,3416],{"__ignoreMap":111},[10,3420,3421],{},[13,3422],{"alt":15,"src":3423},"/static/ants_files/ants_60_1.png",[106,3425,3427],{"className":108,"code":3426,"language":110,"meta":111,"style":111},"show_images(57, samples=12)\n",[29,3428,3429],{"__ignoreMap":111},[115,3430,3431],{"class":117,"line":118},[115,3432,3426],{},[106,3434,3437],{"className":3435,"code":3436,"language":1883},[1881],"Cluster #57 -- Cluster Total: 314\n",[29,3438,3436],{"__ignoreMap":111},[10,3440,3441],{},[13,3442],{"alt":15,"src":3443},"/static/ants_files/ants_61_1.png",[106,3445,3447],{"className":108,"code":3446,"language":110,"meta":111,"style":111},"show_images(56, samples=12)\n",[29,3448,3449],{"__ignoreMap":111},[115,3450,3451],{"class":117,"line":118},[115,3452,3446],{},[106,3454,3457],{"className":3455,"code":3456,"language":1883},[1881],"Cluster #56 -- Cluster Total: 1\n",[29,3458,3456],{"__ignoreMap":111},[10,3460,3461],{},[13,3462],{"alt":15,"src":3463},"/static/ants_files/ants_62_1.png",[106,3465,3467],{"className":108,"code":3466,"language":110,"meta":111,"style":111},"show_images(55, samples=12)\n",[29,3468,3469],{"__ignoreMap":111},[115,3470,3471],{"class":117,"line":118},[115,3472,3466],{},[106,3474,3477],{"className":3475,"code":3476,"language":1883},[1881],"Cluster #55 -- Cluster Total: 38\n",[29,3478,3476],{"__ignoreMap":111},[10,3480,3481],{},[13,3482],{"alt":15,"src":3483},"/static/ants_files/ants_63_1.png",[106,3485,3487],{"className":108,"code":3486,"language":110,"meta":111,"style":111},"show_images(54, samples=12)\n",[29,3488,3489],{"__ignoreMap":111},[115,3490,3491],{"class":117,"line":118},[115,3492,3486],{},[106,3494,3497],{"className":3495,"code":3496,"language":1883},[1881],"Cluster #54 -- Cluster Total: 686\n",[29,3498,3496],{"__ignoreMap":111},[10,3500,3501],{},[13,3502],{"alt":15,"src":3503},"/static/ants_files/ants_64_1.png",[106,3505,3507],{"className":108,"code":3506,"language":110,"meta":111,"style":111},"show_images(53, samples=12)\n",[29,3508,3509],{"__ignoreMap":111},[115,3510,3511],{"class":117,"line":118},[115,3512,3506],{},[106,3514,3517],{"className":3515,"code":3516,"language":1883},[1881],"Cluster #53 -- Cluster Total: 8\n",[29,3518,3516],{"__ignoreMap":111},[10,3520,3521],{},[13,3522],{"alt":15,"src":3523},"/static/ants_files/ants_65_1.png",[106,3525,3527],{"className":108,"code":3526,"language":110,"meta":111,"style":111},"show_images(52, samples=12)\n",[29,3528,3529],{"__ignoreMap":111},[115,3530,3531],{"class":117,"line":118},[115,3532,3526],{},[106,3534,3537],{"className":3535,"code":3536,"language":1883},[1881],"Cluster #52 -- Cluster Total: 2540\n",[29,3538,3536],{"__ignoreMap":111},[10,3540,3541],{},[13,3542],{"alt":15,"src":3543},"/static/ants_files/ants_66_1.png",[106,3545,3546],{"className":108,"code":3146,"language":110,"meta":111,"style":111},[29,3547,3548],{"__ignoreMap":111},[115,3549,3550],{"class":117,"line":118},[115,3551,3146],{},[106,3553,3555],{"className":3554,"code":3156,"language":1883},[1881],[29,3556,3156],{"__ignoreMap":111},[10,3558,3559],{},[13,3560],{"alt":15,"src":3561},"/static/ants_files/ants_67_1.png",[106,3563,3565],{"className":108,"code":3564,"language":110,"meta":111,"style":111},"show_images(50, samples=12)\n",[29,3566,3567],{"__ignoreMap":111},[115,3568,3569],{"class":117,"line":118},[115,3570,3564],{},[106,3572,3575],{"className":3573,"code":3574,"language":1883},[1881],"Cluster #50 -- Cluster Total: 2185\n",[29,3576,3574],{"__ignoreMap":111},[10,3578,3579],{},[13,3580],{"alt":15,"src":3581},"/static/ants_files/ants_68_1.png",[106,3583,3585],{"className":108,"code":3584,"language":110,"meta":111,"style":111},"show_images(49, samples=12)\n",[29,3586,3587],{"__ignoreMap":111},[115,3588,3589],{"class":117,"line":118},[115,3590,3584],{},[106,3592,3595],{"className":3593,"code":3594,"language":1883},[1881],"Cluster #49 -- Cluster Total: 178\n",[29,3596,3594],{"__ignoreMap":111},[10,3598,3599],{},[13,3600],{"alt":15,"src":3601},"/static/ants_files/ants_69_1.png",[106,3603,3605],{"className":108,"code":3604,"language":110,"meta":111,"style":111},"show_images(48, samples=12)\n",[29,3606,3607],{"__ignoreMap":111},[115,3608,3609],{"class":117,"line":118},[115,3610,3604],{},[106,3612,3615],{"className":3613,"code":3614,"language":1883},[1881],"Cluster #48 -- Cluster Total: 3\n",[29,3616,3614],{"__ignoreMap":111},[10,3618,3619],{},[13,3620],{"alt":15,"src":3621},"/static/ants_files/ants_70_1.png",[106,3623,3625],{"className":108,"code":3624,"language":110,"meta":111,"style":111},"show_images(47, samples=12)\n",[29,3626,3627],{"__ignoreMap":111},[115,3628,3629],{"class":117,"line":118},[115,3630,3624],{},[106,3632,3635],{"className":3633,"code":3634,"language":1883},[1881],"Cluster #47 -- Cluster Total: 11\n",[29,3636,3634],{"__ignoreMap":111},[10,3638,3639],{},[13,3640],{"alt":15,"src":3641},"/static/ants_files/ants_71_1.png",[106,3643,3644],{"className":108,"code":3126,"language":110,"meta":111,"style":111},[29,3645,3646],{"__ignoreMap":111},[115,3647,3648],{"class":117,"line":118},[115,3649,3126],{},[106,3651,3653],{"className":3652,"code":3136,"language":1883},[1881],[29,3654,3136],{"__ignoreMap":111},[10,3656,3657],{},[13,3658],{"alt":15,"src":3659},"/static/ants_files/ants_72_1.png",[106,3661,3663],{"className":108,"code":3662,"language":110,"meta":111,"style":111},"show_images(45, samples=12)\n",[29,3664,3665],{"__ignoreMap":111},[115,3666,3667],{"class":117,"line":118},[115,3668,3662],{},[106,3670,3673],{"className":3671,"code":3672,"language":1883},[1881],"Cluster #45 -- Cluster Total: 816\n",[29,3674,3672],{"__ignoreMap":111},[10,3676,3677],{},[13,3678],{"alt":15,"src":3679},"/static/ants_files/ants_73_1.png",[106,3681,3683],{"className":108,"code":3682,"language":110,"meta":111,"style":111},"show_images(44, samples=12)\n",[29,3684,3685],{"__ignoreMap":111},[115,3686,3687],{"class":117,"line":118},[115,3688,3682],{},[106,3690,3693],{"className":3691,"code":3692,"language":1883},[1881],"Cluster #44 -- Cluster Total: 791\n",[29,3694,3692],{"__ignoreMap":111},[10,3696,3697],{},[13,3698],{"alt":15,"src":3699},"/static/ants_files/ants_74_1.png",[106,3701,3703],{"className":108,"code":3702,"language":110,"meta":111,"style":111},"show_images(43, samples=12)\n",[29,3704,3705],{"__ignoreMap":111},[115,3706,3707],{"class":117,"line":118},[115,3708,3702],{},[106,3710,3713],{"className":3711,"code":3712,"language":1883},[1881],"Cluster #43 -- Cluster Total: 30\n",[29,3714,3712],{"__ignoreMap":111},[10,3716,3717],{},[13,3718],{"alt":15,"src":3719},"/static/ants_files/ants_75_1.png",[106,3721,3723],{"className":108,"code":3722,"language":110,"meta":111,"style":111},"show_images(42, samples=12)\n",[29,3724,3725],{"__ignoreMap":111},[115,3726,3727],{"class":117,"line":118},[115,3728,3722],{},[106,3730,3733],{"className":3731,"code":3732,"language":1883},[1881],"Cluster #42 -- Cluster Total: 625\n",[29,3734,3732],{"__ignoreMap":111},[10,3736,3737],{},[13,3738],{"alt":15,"src":3739},"/static/ants_files/ants_76_1.png",[106,3741,3743],{"className":108,"code":3742,"language":110,"meta":111,"style":111},"show_images(41, samples=12)\n",[29,3744,3745],{"__ignoreMap":111},[115,3746,3747],{"class":117,"line":118},[115,3748,3742],{},[106,3750,3753],{"className":3751,"code":3752,"language":1883},[1881],"Cluster #41 -- Cluster Total: 6\n",[29,3754,3752],{"__ignoreMap":111},[10,3756,3757],{},[13,3758],{"alt":15,"src":3759},"/static/ants_files/ants_77_1.png",[106,3761,3763],{"className":108,"code":3762,"language":110,"meta":111,"style":111},"show_images(40, samples=12)\n",[29,3764,3765],{"__ignoreMap":111},[115,3766,3767],{"class":117,"line":118},[115,3768,3762],{},[106,3770,3773],{"className":3771,"code":3772,"language":1883},[1881],"Cluster #40 -- Cluster Total: 6\n",[29,3774,3772],{"__ignoreMap":111},[10,3776,3777],{},[13,3778],{"alt":15,"src":3779},"/static/ants_files/ants_78_1.png",[106,3781,3783],{"className":108,"code":3782,"language":110,"meta":111,"style":111},"show_images(39, samples=12)\n",[29,3784,3785],{"__ignoreMap":111},[115,3786,3787],{"class":117,"line":118},[115,3788,3782],{},[106,3790,3793],{"className":3791,"code":3792,"language":1883},[1881],"Cluster #39 -- Cluster Total: 26\n",[29,3794,3792],{"__ignoreMap":111},[10,3796,3797],{},[13,3798],{"alt":15,"src":3799},"/static/ants_files/ants_79_1.png",[106,3801,3803],{"className":108,"code":3802,"language":110,"meta":111,"style":111},"show_images(38, samples=12)\n",[29,3804,3805],{"__ignoreMap":111},[115,3806,3807],{"class":117,"line":118},[115,3808,3802],{},[106,3810,3813],{"className":3811,"code":3812,"language":1883},[1881],"Cluster #38 -- Cluster Total: 345\n",[29,3814,3812],{"__ignoreMap":111},[10,3816,3817],{},[13,3818],{"alt":15,"src":3819},"/static/ants_files/ants_80_1.png",[106,3821,3823],{"className":108,"code":3822,"language":110,"meta":111,"style":111},"show_images(37, samples=12)\n",[29,3824,3825],{"__ignoreMap":111},[115,3826,3827],{"class":117,"line":118},[115,3828,3822],{},[106,3830,3833],{"className":3831,"code":3832,"language":1883},[1881],"Cluster #37 -- Cluster Total: 518\n",[29,3834,3832],{"__ignoreMap":111},[10,3836,3837],{},[13,3838],{"alt":15,"src":3839},"/static/ants_files/ants_81_1.png",[10,3841,3842],{},"The vast majority of termites seem to form nondescript blobs after 100000 steps. There are perhaps many thousands of termites that didn't yet reach a . Setting the clusters parameter to 75 is probably too high. Many of the groups have similar behaviour. There were several cluster groups that formed 'highways'. It may make more sense to filter out these termites and cluster termites that didn't form highways.",[1785,3844,3846],{"id":3845},"outlier-detection","Outlier Detection",[10,3848,3849],{},"It could also be interesting to see how many outliers are present in each cluster for various values of k in the k-means algorithm. This may help us choose a more fitting number of clusters by which the termites can be grouped. here's how we could do that:",[106,3851,3853],{"className":108,"code":3852,"language":110,"meta":111,"style":111},"from sklearn.ensemble import IsolationForest\n",[29,3854,3855],{"__ignoreMap":111},[115,3856,3857],{"class":117,"line":118},[115,3858,3852],{},[106,3860,3862],{"className":108,"code":3861,"language":110,"meta":111,"style":111},"X_ = X.loc[X.clusters==37, :] #16\n",[29,3863,3864],{"__ignoreMap":111},[115,3865,3866],{"class":117,"line":118},[115,3867,3861],{},[106,3869,3871],{"className":108,"code":3870,"language":110,"meta":111,"style":111},"X_ = X.loc[X.clusters==37, :]\n",[29,3872,3873],{"__ignoreMap":111},[115,3874,3875],{"class":117,"line":118},[115,3876,3870],{},[106,3878,3880],{"className":108,"code":3879,"language":110,"meta":111,"style":111},"clf = IsolationForest(max_samples=100, random_state=rng)\nclf.fit(X_)\n\ny_pred_train = clf.predict(X_)\n\n",[29,3881,3882,3887,3892,3896],{"__ignoreMap":111},[115,3883,3884],{"class":117,"line":118},[115,3885,3886],{},"clf = IsolationForest(max_samples=100, random_state=rng)\n",[115,3888,3889],{"class":117,"line":124},[115,3890,3891],{},"clf.fit(X_)\n",[115,3893,3894],{"class":117,"line":130},[115,3895,208],{"emptyLinePlaceholder":51},[115,3897,3898],{"class":117,"line":136},[115,3899,3900],{},"y_pred_train = clf.predict(X_)\n",[106,3902,3904],{"className":108,"code":3903,"language":110,"meta":111,"style":111},"y_pred_train.mean()\n",[29,3905,3906],{"__ignoreMap":111},[115,3907,3908],{"class":117,"line":118},[115,3909,3903],{},[106,3911,3914],{"className":3912,"code":3913,"language":1883},[1881],"0.79922779922779918\n",[29,3915,3913],{"__ignoreMap":111},[10,3917,3918],{},"The following values gives us the average of the predicted values (1 for inlier, -1 for outlier), so this value doesn't correspond to a percentage accuracy. The accuracy is about 89% (the model determined that 89% of termites in cluster 37 are inliers and the remaining 11% are outliers.",[106,3920,3922],{"className":108,"code":3921,"language":110,"meta":111,"style":111},"X_['anom'] = y_pred_train\n",[29,3923,3924],{"__ignoreMap":111},[115,3925,3926],{"class":117,"line":118},[115,3927,3921],{},[106,3929,3931],{"className":108,"code":3930,"language":110,"meta":111,"style":111},"X_.anom.value_counts()\n",[29,3932,3933],{"__ignoreMap":111},[115,3934,3935],{"class":117,"line":118},[115,3936,3930],{},[106,3938,3941],{"className":3939,"code":3940,"language":1883},[1881]," 1    466\n-1     52\nName: anom, dtype: int64\n",[29,3942,3940],{"__ignoreMap":111},[10,3944,3945],{},"Let's compare some of the inliers with the outliers:",[106,3947,3949],{"className":108,"code":3948,"language":110,"meta":111,"style":111},"files_normal = X_[X_.anom==(1)]\nshow_images(0, samples = 24, files_bool=True, files=files_normal)\n",[29,3950,3951,3956],{"__ignoreMap":111},[115,3952,3953],{"class":117,"line":118},[115,3954,3955],{},"files_normal = X_[X_.anom==(1)]\n",[115,3957,3958],{"class":117,"line":124},[115,3959,3960],{},"show_images(0, samples = 24, files_bool=True, files=files_normal)\n",[106,3962,3964],{"className":3963,"code":3832,"language":1883},[1881],[29,3965,3832],{"__ignoreMap":111},[10,3967,3968],{},[13,3969],{"alt":15,"src":3970},"/static/ants_files/ants_92_1.png",[106,3972,3974],{"className":108,"code":3973,"language":110,"meta":111,"style":111},"files_abnormal = X_[X_.anom==(-1)]\nshow_images(0, samples = 24, files_bool=True, files=files_abnormal)\n",[29,3975,3976,3981],{"__ignoreMap":111},[115,3977,3978],{"class":117,"line":118},[115,3979,3980],{},"files_abnormal = X_[X_.anom==(-1)]\n",[115,3982,3983],{"class":117,"line":124},[115,3984,3985],{},"show_images(0, samples = 24, files_bool=True, files=files_abnormal)\n",[106,3987,3989],{"className":3988,"code":3832,"language":1883},[1881],[29,3990,3832],{"__ignoreMap":111},[10,3992,3993],{},[13,3994],{"alt":15,"src":3995},"/static/ants_files/ants_93_1.png",[10,3997,3998],{},"This sample of outliers seems to have slightly different characteristics compared with the inlier sample. This can be seen in the patches of solid colors (pink, purple, teal, grey).",[1785,4000,4002],{"id":4001},"conclusion","Conclusion",[10,4004,4005],{},"Using k-means and Isolation Forests with this set of over 30,000 termites offers a quick and easy way to sort out major trends that these deterministic systems display. As you can see in the cluster samples above, the classification is far from perfect. Some near-identical termites are in different clusters. It would be interesting to tweak some aspects of this experiment in the future:",[4007,4008,4009,4013,4016,4019,4022],"ul",{},[4010,4011,4012],"li",{},"Larger number of states (>16)",[4010,4014,4015],{},"More steps (>100000) / bigger grid",[4010,4017,4018],{},"Random \"noise\" on the grid at step 0",[4010,4020,4021],{},"Variation on the rules",[4010,4023,4024],{},"Segmenting 'highway' termites before clustering",[4026,4027,4028],"style",{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":111,"searchDepth":124,"depth":124,"links":4030},[],"2017-04-02","Visualizing variations of the classic Langton's Ant cellular automata",false,"md",null,"/static/ant.png",{"layout":4038},"post","/2017/04/02/langton-ant-notebook",{"title":5,"description":4032},"2017/04/02/langton-ant-notebook",[110,4043],"cellular-automata","9L-g-36gKrOKSXBi5q-6lD8oIyZbucVRMaotpNzQvHM",1753130138177]