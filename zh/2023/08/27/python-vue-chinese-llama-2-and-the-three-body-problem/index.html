<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Python, Vue, Chinese-LLaMA-2 and The Three-Body Problem</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Brian Caffey's personal website"><meta data-n-head="ssr" name="robots" content="all"><meta data-n-head="ssr" property="twitter:creator" content="@briancaffey"><meta data-n-head="ssr" property="twitter:site" content="@briancaffey"><meta data-n-head="ssr" property="og:title" content="Python, Vue, Chinese-LLaMA-2 and The Three-Body Problem"><meta data-n-head="ssr" property="og:description" content="null"><meta data-n-head="ssr" property="og:image" content="https://briancaffey.github.io/img/three-body-problem/cover.png"><meta data-n-head="ssr" property="twitter:image" content="https://briancaffey.github.io/img/three-body-problem/cover.png"><meta data-n-head="ssr" property="twitter:card" content="summary_large_image"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/0bde903.js" as="script"><link rel="preload" href="/_nuxt/8bfa011.js" as="script"><link rel="preload" href="/_nuxt/b575c49.js" as="script"><link rel="preload" href="/_nuxt/691d3dd.js" as="script"><link rel="preload" href="/_nuxt/c259e4a.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 f52d43e0:0 9592d830:0 517a8dd7:0 072b2f8a:0 fa7ff0ca:0 56b15182:0 507279a1:0 32d0cba6:0 a0fa61ae:0 68e9f29f:0 00a52ce3:0 23961490:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-black{--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity))}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-red-300{--bg-opacity:1;background-color:#feb2b2;background-color:rgba(254,178,178,var(--bg-opacity))}.bg-green-100{--bg-opacity:1;background-color:#f0fff4;background-color:rgba(240,255,244,var(--bg-opacity))}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border{border-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.flex-1{flex:1 1 0%}.flex-grow{flex-grow:1}.flex-shrink{flex-shrink:1}.float-right{float:right}.font-bold{font-weight:700}.h-3{height:.75rem}.h-4{height:1rem}.h-12{height:3rem}.h-32{height:8rem}.h-64{height:16rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.text-4xl{font-size:2.25rem}.leading-8{line-height:2rem}.leading-9{line-height:2.25rem}.m-2{margin:.5rem}.m-4{margin:1rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mb-1{margin-bottom:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-8{margin-top:2rem}.mb-8{margin-bottom:2rem}.-ml-1{margin-left:-.25rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.object-cover{-o-object-fit:cover;object-fit:cover}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.px-16{padding-left:4rem;padding-right:4rem}.py-32{padding-top:8rem;padding-bottom:8rem}.pt-2{padding-top:.5rem}.pb-2{padding-bottom:.5rem}.pt-4{padding-top:1rem}.pr-4{padding-right:1rem}.pb-4{padding-bottom:1rem}.pt-8{padding-top:2rem}.pb-8{padding-bottom:2rem}.pt-16{padding-top:4rem}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.resize{resize:both}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-red-400{--text-opacity:1;color:#fc8181;color:rgba(252,129,129,var(--text-opacity))}.text-red-600{--text-opacity:1;color:#e53e3e;color:rgba(229,62,62,var(--text-opacity))}.uppercase{text-transform:uppercase}.visible{visibility:visible}.w-3{width:.75rem}.w-4{width:1rem}.w-12{width:3rem}.w-32{width:8rem}.w-full{width:100%}.z-10{z-index:10}.gap-4{grid-gap:1rem;gap:1rem}.gap-6{grid-gap:1.5rem;gap:1.5rem}.gap-16{grid-gap:4rem;gap:4rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition-all{transition-property:all}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.duration-150{transition-duration:.15s}.delay-150{transition-delay:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:inline{display:inline}.sm\:hidden{display:none}.sm\:p-16{padding:4rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:py-16{padding-top:4rem;padding-bottom:4rem}.sm\:w-2\/3{width:66.666667%}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:px-1{padding-left:.25rem;padding-right:.25rem}.md\:px-4{padding-left:1rem;padding-right:1rem}.md\:w-1\/2{width:50%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:1024px){.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pl-64{padding-left:16rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1280px){.xl\:pb-16{padding-bottom:4rem}}:root{--color:#243746;--color-primary:#158876;--color-secondary:#0e2233;--bg:#f3f5f4;--bg-secondary:#fff;--bg-code:#ddd;--border-color:#ddd}.dark-mode{--color:#ebf4f1;--color-primary:#41b38a;--color-secondary:#fdf9f3;--bg:#091a28;--bg-secondary:#071521;--bg-code:#ddd;--border-color:#0d2538}.sepia-mode{--color:#433422;--color-primary:#504231;--color-secondary:#504231;--bg:#f1e7d0;--bg-code:#ddd;--bg-secondary:#eae0c9;--border-color:#ded0bf}body{font-family:Montserrat,Arial,Sans Serif;background-color:#f3f5f4;background-color:var(--bg);color:#243746;color:var(--color);transition:background-color .7s}a{color:#158876;color:var(--color-primary)}.py-05{padding-top:.125rem;padding-bottom:.125rem}.markdown{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity));line-height:1.5;color:#0e2233;color:var(--color-secondary)}.markdown .token.operator{background:0 0}.markdown>*+*{margin-top:0;margin-bottom:1rem}.markdown li+li{margin-top:.25rem}.markdown li>p+p{margin-top:1.5rem;color:#158876;color:var(--color-primary)}.markdown img{margin:auto;margin-top:1.5rem;margin-bottom:1.5rem}.markdown a,.markdown strong{font-weight:600}.markdown strong a{font-weight:700}.markdown h1{font-size:2.25rem}.markdown h1,.markdown h2{border-color:#158876;border-color:var(--color-primary);line-height:1.25;border-bottom-width:1px;font-weight:600;margin-bottom:1rem;margin-top:1.5rem;padding-bottom:.5rem}.markdown h2{font-size:1.5rem}.markdown h3{line-height:1.375;font-size:1.125rem}.markdown h3,.markdown h4{border-color:#158876;border-color:var(--color-primary);font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown h4{line-height:1;font-size:1rem}.markdown h5{border-color:#158876;border-color:var(--color-primary)}.markdown h5,.markdown h6{line-height:1.25;font-size:.875rem;font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown blockquote,.markdown h6{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.markdown blockquote{font-size:1rem;border-left-width:4px;--border-opacity:1;border-color:#e2e8f0;border-color:rgba(226,232,240,var(--border-opacity));padding-left:1rem;padding-right:1rem;border-color:#158876;border-color:var(--color-primary)}.markdown code{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875rem;display:inline;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity));padding:.125rem .25rem;background-color:#ddd;background-color:var(--bg-code);color:#000}.markdown code,.markdown pre{--bg-opacity:1;border-radius:.25rem}.markdown pre{background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity));padding:1rem}.markdown pre code{display:block;background-color:transparent;padding:0;overflow:visible;border-radius:0;color:#000}.markdown p{margin-bottom:10px}code[class*=language-],pre[class*=language-]{background:#ddd!important;background:var(--bg-code)!important;text-shadow:none!important}.markdown ul{list-style-type:disc}.markdown ol,.markdown ul{font-size:1rem;padding-left:2rem}.markdown ol{list-style-type:decimal}.markdown kbd{font-size:.75rem;display:inline-block;border-radius:.25rem;border-width:1px;padding:.125rem .25rem;vertical-align:middle;font-weight:400;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.markdown table,td,th{font-size:1rem;border:1px solid #243746;border-color:var(--color)}.markdown table{overflow-x:scroll}.markdown td,.markdown th{border-width:1px;padding:.25rem .75rem}.markdown .highlight pre{--bg-opacity:1!important;background-color:#f7fafc!important;background-color:rgba(247,250,252,var(--bg-opacity))!important}.article-card{box-shadow:0 0 0 0 #0e2233;box-shadow:0 0 0 0 var(--color-secondary);transition:box-shadow .2s,transform .2s;height:100%}.article-card:hover{box-shadow:0 0 30px 2px #0e2233;box-shadow:0 0 30px 2px var(--color-secondary);transform:scale(1.025)}.blog-card-description,.blog-date{color:#0e2233;color:var(--color-secondary)}.blog-date{font-size:smaller}hr{background-color:#243746;background-color:var(--color);border:none;height:1px}.menu-icon{background-color:#ddd;background-color:var(--border-color)}.menu-icon,.mobile-menu{color:#243746;color:var(--color)}.mobile-menu{background-color:#fff;background-color:var(--bg-secondary)}.btn{border-radius:1;border-color:#158876;border-color:var(--color-primary)}.btn:hover{background-color:#fff;background-color:var(--bg-secondary)}.hero{border-color:#158876;border-color:var(--color-primary);color:#158876;color:var(--color-primary)}.markdown{word-wrap:break-word}.markdown h2:before,.markdown h3:before{content:" ";margin-top:-85px;pointer-events:none}.markdown h2>a,.markdown h3>a{margin-left:1.25rem}.markdown h2>a:before,.markdown h3>a:before{content:"#";font-weight:400;font-size:1.25rem;line-height:2rem;margin-left:-1.25rem;padding-right:.5rem;position:absolute;opacity:1}@media (min-width:1024px){.markdown h2>a,.markdown h3>a{margin-left:0}.markdown h2>a:before,.markdown h3>a:before{opacity:0}}.markdown h2:hover>a:before,.markdown h3:hover>a:before{opacity:1}& pre[class*=language-]{--bg-opacity:1;background-color:#2d3748;background-color:rgba(45,55,72,var(--bg-opacity));position:static}.mc{background-color:#f3f5f4;background-color:var(--bg);border-color:#158876;border-color:var(--color-primary);border-width:1px;color:#158876;color:var(--color-primary);justify-content:center;padding:5px 10px;border-radius:5px;width:100%}.mc-btn{color:#fff;color:var(--bg-secondary);background-color:#0e2233;background-color:var(--color-secondary);cursor:pointer}.page-enter-active,.page-leave-active{transition:filter 2s linear;transition:margin-top .15s,opacity .15s}.page-enter,.page-leave-to{opacity:0;margin-top:5px}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.emoji-mart,.emoji-mart *{-webkit-box-sizing:border-box;box-sizing:border-box;line-height:1.15}.emoji-mart{font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif;font-size:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:420px;color:#222427;border:1px solid #d9d9d9;border-radius:5px;background:#fff}.emoji-mart-emoji{padding:6px;border:none;background:0 0;-webkit-box-shadow:none;box-shadow:none}.emoji-mart-emoji span{display:inline-block}.emoji-mart-preview-emoji .emoji-mart-emoji span{width:38px;height:38px;font-size:32px}.emoji-type-native{font-family:"Segoe UI Emoji","Segoe UI Symbol","Segoe UI","Apple Color Emoji","Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji";word-break:keep-all}.emoji-type-image{background-size:5700%}.emoji-type-image.emoji-set-apple{background-image:url(https://unpkg.com/emoji-datasource-apple@6.0.1/img/apple/sheets-256/64.png)}.emoji-type-image.emoji-set-facebook{background-image:url(https://unpkg.com/emoji-datasource-facebook@6.0.1/img/facebook/sheets-256/64.png)}.emoji-type-image.emoji-set-google{background-image:url(https://unpkg.com/emoji-datasource-google@6.0.1/img/google/sheets-256/64.png)}.emoji-type-image.emoji-set-twitter{background-image:url(https://unpkg.com/emoji-datasource-twitter@6.0.1/img/twitter/sheets-256/64.png)}.emoji-mart-bar{border:0 solid #d9d9d9}.emoji-mart-bar:first-child{border-bottom-width:1px;border-top-left-radius:5px;border-top-right-radius:5px}.emoji-mart-bar:last-child{border-top-width:1px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.emoji-mart-scroll{position:relative;overflow-y:scroll;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-anchors{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 6px;color:#858585;line-height:0}.emoji-mart-anchor{position:relative;display:block;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;text-align:center;padding:12px 4px;overflow:hidden;-webkit-transition:color .1s ease-out;-o-transition:color .1s ease-out;transition:color .1s ease-out;border:none;background:0 0;-webkit-box-shadow:none;box-shadow:none}.emoji-mart-anchor-selected,.emoji-mart-anchor:hover{color:#464646}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0}.emoji-mart-anchor-bar{position:absolute;bottom:-3px;left:0;width:100%;height:3px;background-color:#464646}.emoji-mart-anchors i{display:inline-block;width:100%;max-width:22px}.emoji-mart-anchors svg{fill:currentColor;max-height:18px}.emoji-mart .scroller{height:250px;position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 6px 6px;z-index:0;will-change:transform;-webkit-overflow-scrolling:touch}.emoji-mart-search{margin-top:6px;padding:0 6px}.emoji-mart-search input{font-size:16px;display:block;width:100%;padding:.2em .6em;border-radius:25px;border:1px solid #d9d9d9;outline:0}.emoji-mart-search-results{height:250px;overflow-y:scroll}.emoji-mart-category{position:relative}.emoji-mart-category .emoji-mart-emoji span{z-index:1;position:relative;text-align:center;cursor:default}.emoji-mart-category .emoji-mart-emoji:hover:before,.emoji-mart-emoji-selected:before{z-index:0;content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;border-radius:100%;opacity:0;opacity:1}.emoji-mart-category-label{position:-webkit-sticky;position:sticky;top:0}.emoji-mart-static .emoji-mart-category-label{z-index:2;position:relative}.emoji-mart-category-label h3{display:block;font-size:16px;width:100%;font-weight:500;padding:5px 6px;background-color:#fff;background-color:hsla(0,0%,100%,.95)}.emoji-mart-emoji{position:relative;display:inline-block;font-size:0}.emoji-mart-no-results{font-size:14px;text-align:center;padding-top:70px;color:#858585}.emoji-mart-no-results .emoji-mart-category-label{display:none}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:.2em}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none}.emoji-mart-preview{position:relative;height:70px}.emoji-mart-preview-data,.emoji-mart-preview-emoji,.emoji-mart-preview-skins{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.emoji-mart-preview-emoji{left:12px}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all}.emoji-mart-preview-skins{right:30px;text-align:right}.emoji-mart-preview-name{font-size:14px}.emoji-mart-preview-shortname{font-size:12px;color:#888}.emoji-mart-preview-emoticon+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-emoticon,.emoji-mart-preview-shortname+.emoji-mart-preview-shortname{margin-left:.5em}.emoji-mart-preview-emoticon{font-size:11px;color:#bbb}.emoji-mart-title span{display:inline-block;vertical-align:middle}.emoji-mart-title .emoji-mart-emoji{padding:0}.emoji-mart-title-label{color:#999a9c;font-size:21px;font-weight:300}.emoji-mart-skin-swatches{font-size:0;padding:2px 0;border:1px solid #d9d9d9;border-radius:12px;background-color:#fff}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch{width:16px;padding:0 2px}.emoji-mart-skin-swatches-opened .emoji-mart-skin-swatch-selected:after{opacity:.75}.emoji-mart-skin-swatch{display:inline-block;width:0;vertical-align:middle;-webkit-transition-property:width,padding;-o-transition-property:width,padding;transition-property:width,padding;-webkit-transition-duration:.125s;-o-transition-duration:.125s;transition-duration:.125s;-webkit-transition-timing-function:ease-out;-o-transition-timing-function:ease-out;transition-timing-function:ease-out}.emoji-mart-skin-swatch:first-child{-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s}.emoji-mart-skin-swatch:nth-child(2){-webkit-transition-delay:.03s;-o-transition-delay:.03s;transition-delay:.03s}.emoji-mart-skin-swatch:nth-child(3){-webkit-transition-delay:.06s;-o-transition-delay:.06s;transition-delay:.06s}.emoji-mart-skin-swatch:nth-child(4){-webkit-transition-delay:.09s;-o-transition-delay:.09s;transition-delay:.09s}.emoji-mart-skin-swatch:nth-child(5){-webkit-transition-delay:.12s;-o-transition-delay:.12s;transition-delay:.12s}.emoji-mart-skin-swatch:nth-child(6){-webkit-transition-delay:.15s;-o-transition-delay:.15s;transition-delay:.15s}.emoji-mart-skin-swatch-selected{position:relative;width:16px;padding:0 2px}.emoji-mart-skin-swatch-selected:after{content:"";position:absolute;top:50%;left:50%;width:4px;height:4px;margin:-2px 0 0 -2px;background-color:#fff;border-radius:100%;pointer-events:none;opacity:0;-webkit-transition:opacity .2s ease-out;-o-transition:opacity .2s ease-out;transition:opacity .2s ease-out}.emoji-mart-skin{display:inline-block;width:100%;padding-top:100%;max-width:12px;border-radius:100%}.emoji-mart-skin-tone-1{background-color:#ffc93a}.emoji-mart-skin-tone-2{background-color:#fadcbc}.emoji-mart-skin-tone-3{background-color:#e0bb95}.emoji-mart-skin-tone-4{background-color:#bf8f68}.emoji-mart-skin-tone-5{background-color:#9b643d}.emoji-mart-skin-tone-6{background-color:#594539}.emoji-mart .vue-recycle-scroller{position:relative}.emoji-mart .vue-recycle-scroller.direction-vertical:not(.page-mode){overflow-y:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal:not(.page-mode){overflow-x:auto}.emoji-mart .vue-recycle-scroller.direction-horizontal{display:-webkit-box;display:-ms-flexbox;display:flex}.emoji-mart .vue-recycle-scroller__slot{-webkit-box-flex:1;-ms-flex:auto 0 0px;flex:auto 0 0}.emoji-mart .vue-recycle-scroller__item-wrapper{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;position:relative}.emoji-mart .vue-recycle-scroller.ready .vue-recycle-scroller__item-view{position:absolute;top:0;left:0;will-change:transform}.emoji-mart .vue-recycle-scroller.direction-vertical .vue-recycle-scroller__item-wrapper{width:100%}.emoji-mart .vue-recycle-scroller.direction-horizontal .vue-recycle-scroller__item-wrapper{height:100%}.emoji-mart .vue-recycle-scroller.ready.direction-vertical .vue-recycle-scroller__item-view{width:100%}.emoji-mart .vue-recycle-scroller.ready.direction-horizontal .vue-recycle-scroller__item-view{height:100%}.emoji-mart .resize-observer[data-v-b329ee4c]{border:none;background-color:transparent;opacity:0}.emoji-mart .resize-observer[data-v-b329ee4c],.emoji-mart .resize-observer[data-v-b329ee4c] object{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;pointer-events:none;display:block;overflow:hidden}.emoji-mart-search .hidden{display:none;visibility:hidden}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:Montserrat,Arial,Sans Serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}span.emoji-mart-emoji[data-v-913fe8d6]{padding:0}.selected[data-v-913fe8d6]{text-shadow:.25px 0 0 #000}.picker[data-v-913fe8d6]{position:absolute;top:10px;margin-left:auto;margin-right:auto;transform:translate(50%,50%)}.top[data-v-913fe8d6]{width:100%;background-color:var(--color-primary);height:3px}.selected[data-v-4365f19e]{text-shadow:.9px 0 0}span.emoji-mart-emoji[data-v-288717a6]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-288717a6]:hover{transform:scale(1.3)}.centered[data-v-288717a6]{position:absolute;left:50vw;right:50vw;margin-left:auto;margin-right:auto}span.emoji-mart-emoji[data-v-40f34933]{padding:0;transition:transform .2s}span.emoji-mart-emoji[data-v-40f34933]:hover{transform:scale(1.3)}.modal[data-v-40f34933]{z-index:100000000;top:0;-webkit-backdrop-filter:blur(.4px);backdrop-filter:blur(.4px);background-color:rgba(0,0,0,.2)}.modal[data-v-40f34933],.picker[data-v-40f34933]{position:absolute;left:0}.picker[data-v-40f34933]{z-index:10000000000;right:0;margin-left:auto;margin-right:auto}.tag[data-v-d8ade784]{background-color:var(--color-primary);transition:transform .2s}.tag[data-v-d8ade784]:hover{transform:scale(1.05)}</style><link rel="preload" href="/_nuxt/static/1708690618/zh/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem/state.js" as="script"><link rel="preload" href="/_nuxt/static/1708690618/zh/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1708690618/manifest.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function(){"use strict";var t=window,r=document,s=r.documentElement,n=["dark","light"],e=function(){for(var e="nuxt-color-mode=",t=r.cookie.split(";"),s=0;s<t.length;s++){for(var n=t[s];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null}()||"system",a="system"===e?l():e;function c(e){e+="-mode";s.classList?s.classList.add(e):s.className+=" "+e}function o(e){return t.matchMedia("(prefers-color-scheme"+e+")")}function l(){if(t.matchMedia&&"not all"!==o("").media)for(var e of n)if(o(":"+e).matches)return e;return"light"}c(a),t.__NUXT_COLOR_MODE__={preference:e,value:a,getColorScheme:l,addClass:c,removeClass:function(e){e+="-mode";s.classList?s.classList.remove(e):s.className=s.className.replace(new RegExp(e,"g"),"")}}}()</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div data-v-913fe8d6><div class="mx-auto flex py-2 px-2 sm:px-4 items-center max-w-6xl justify-center" data-v-913fe8d6><div class="justify-left flex-grow flex-cols-4" data-v-913fe8d6><a href="/zh" class="text-xl nuxt-link-active" data-v-913fe8d6><span class="hidden sm:inline text-2xl" data-v-913fe8d6>Â∏ÉËé±ÊÅ©</span><span class="inline sm:hidden" data-v-913fe8d6>JBC</span></a></div> <div class="flex-grow relative" data-v-913fe8d6><nav z-index="10000" data-v-4365f19e data-v-913fe8d6><div data-v-4365f19e><ul class="items-right float-right hidden md:flex" data-v-4365f19e><li class="px-4 text-lg" data-v-4365f19e><a href="/zh/blog/1" data-v-4365f19e>
          ÂçöÂÆ¢
        </a></li> <li class="px-4 text-lg" data-v-4365f19e><a href="/zh/contact" data-v-4365f19e>
          ËÅîÁ≥ª
        </a></li></ul> <div class="flex justify-end md:hidden z-1000" data-v-4365f19e><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-4365f19e><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current h-3 w-3" data-v-4365f19e><title data-v-4365f19e>Menu</title> <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-4365f19e></path></svg></button></div> <!----></div></nav></div></div> <div class="picker" data-v-913fe8d6><div class="centered" data-v-288717a6 data-v-913fe8d6><div class="grid items-center justify-center" data-v-288717a6><ul class="flex px-4" data-v-288717a6><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="üñ•Ô∏è, desktop_computer" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:52.63% 12.28%;width:32px;height:32px"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="üåû, sun_with_face" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:8.77% 77.19%;width:32px;height:32px"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="üåö, new_moon_with_face" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:8.77% 70.18%;width:32px;height:32px"></span></span></li><li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><span aria-label="‚òï, coffee" class="emoji-mart-emoji" data-v-288717a6><span class="emoji-set-apple emoji-type-image" style="background-position:94.74% 8.77%;width:32px;height:32px"></span></span></li> <li class="md:px-1 px-1 cursor-pointer" data-v-288717a6><div data-v-40f34933 data-v-288717a6><!----> <ul data-v-40f34933><li class="md:px-1 px-1 cursor-pointer" data-v-40f34933><span aria-label="üá®üá≥, cn, flag-cn" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:1.75% 36.84%;width:32px;height:32px"></span></span></li></ul> <div class="rounded-md z-10 picker" data-v-40f34933><div class="bg-white shadow-md rounded px-4 py-2 w-32 text" style="display:none" data-v-40f34933><a href="/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem" data-v-40f34933><span aria-label="üá∫üá∏, us, flag-us" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:7.02% 68.42%;width:16px;height:16px"></span></span> English <br data-v-40f34933></a><a href="/fr/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem" data-v-40f34933><span aria-label="üá´üá∑, fr, flag-fr" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:1.75% 91.23%;width:16px;height:16px"></span></span> Fran√ßais <br data-v-40f34933></a><a href="/zh/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem" aria-current="page" class="nuxt-link-exact-active nuxt-link-active" data-v-40f34933><span aria-label="üá®üá≥, cn, flag-cn" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:1.75% 36.84%;width:16px;height:16px"></span></span> ÁÆÄ‰Ωì‰∏≠Êñá <br data-v-40f34933></a><a href="/ru/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem" data-v-40f34933><span aria-label="üá∑üá∫, ru, flag-ru" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:5.26% 92.98%;width:16px;height:16px"></span></span> –†—É—Å—Å–∫–∏–π <br data-v-40f34933></a><a href="/jp/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem" data-v-40f34933><span aria-label="üáØüáµ, jp, flag-jp" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:3.51% 59.65%;width:16px;height:16px"></span></span> Êó•Êú¨Ë™û <br data-v-40f34933></a><a href="/in/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem" data-v-40f34933><span aria-label="üáÆüá≥, flag-in" class="emoji-mart-emoji" data-v-40f34933><span class="emoji-set-apple emoji-type-image" style="background-position:3.51% 43.86%;width:16px;height:16px"></span></span> ‡§π‡§ø‡§Ç‡§¶‡•Ä <br data-v-40f34933></a></div></div></div></li></ul></div></div></div></div> <article data-v-142b09b6><img src="/img/three-body-problem/cover.png" class="pt-2 w-full object-cover cover-image" style="height:32rem" data-v-142b09b6> <div class="mx-auto max-w-5xl px-2 sm:px-4 md:px-4 lg:px-16 mt-2" data-v-142b09b6><h1 class="prose text-4xl leading-9 py-4 font-bold" data-v-142b09b6>
      Python, Vue, Chinese-LLaMA-2 and The Three-Body Problem
    </h1> <div class="flex flex-wrap -ml-1 py-2" data-v-21780fb6 data-v-142b09b6><a href="/zh/blog/tags/three-body-problem" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    three-body-problem üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/llama" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    llama üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/llm" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    llm üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/ai" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    ai üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/chinese" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    chinese üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/python" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    python üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/nvidia" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    nvidia üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/cuda" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    cuda üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/gpu" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    gpu üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/stable-diffusion" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    stable-diffusion üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/langchain" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    langchain üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/vue" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    vue üè∑Ô∏è
    <!----></div></a><a href="/zh/blog/tags/three.js" data-v-d8ade784 data-v-21780fb6><div class="px-2 text-lg text-white shadow rounded-lg bg-black mx-1 mb-1 uppercase cursor-pointer tag" data-v-d8ade784>
    three.js üè∑Ô∏è
    <!----></div></a></div> <div class="flex py-2" data-v-23cbc744 data-v-142b09b6><div class="pr-4 rounded" data-v-86c576ca data-v-23cbc744><a href="https://news.ycombinator.com/item?id=38393757" data-v-86c576ca><img src="/icons/hn.png" alt="https://news.ycombinator.com/item?id=38393757" width="25" class="rounded" data-v-86c576ca></a></div><div class="pr-4 rounded" data-v-86c576ca data-v-23cbc744><a href="https://www.reddit.com/r/threebodyproblem/comments/1823l5j/python_vue_chinesellama2_and_the_threebody_problem/" data-v-86c576ca><img src="/icons/reddit.png" alt="https://www.reddit.com/r/threebodyproblem/comments/1823l5j/python_vue_chinesellama2_and_the_threebody_problem/" width="25" class="rounded" data-v-86c576ca></a></div><div class="pr-4 rounded" data-v-86c576ca data-v-23cbc744><a href="https://twitter.com/briancaffey/status/1727710878349332614" data-v-86c576ca><img src="/icons/x.png" alt="https://twitter.com/briancaffey/status/1727710878349332614" width="25" class="rounded" data-v-86c576ca></a></div></div> <p class="blog-date text-gray-500 mb-4" data-v-142b09b6>
      Êõ¥Êñ∞Êó•Êúü
      2023Âπ¥11Êúà23Êó•
    </p> <!----> <div class="markdown nuxt-content" data-v-142b09b6 data-v-142b09b6><h1 id="tldr" data-v-142b09b6 data-v-142b09b6><a href="#tldr" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>tl;dr</h1>
<p data-v-142b09b6 data-v-142b09b6>This articles brings together several of my interest, both old and new:</p>
<ul data-v-142b09b6 data-v-142b09b6>
<li data-v-142b09b6 data-v-142b09b6>The Sci-Fi book series 'Three-Body Problem' by Liu Cixun</li>
<li data-v-142b09b6 data-v-142b09b6>Chinese language</li>
<li data-v-142b09b6 data-v-142b09b6>NLP techniques</li>
<li data-v-142b09b6 data-v-142b09b6>Large Language Models (LLMs)</li>
<li data-v-142b09b6 data-v-142b09b6>Stable Diffusion</li>
<li data-v-142b09b6 data-v-142b09b6>Data visualization and 3D graphics</li>
<li data-v-142b09b6 data-v-142b09b6>Mathematics</li>
<li data-v-142b09b6 data-v-142b09b6>NVIDIA / CUDA</li>
</ul>
<p data-v-142b09b6 data-v-142b09b6>This is a linguistic, artistic and computational experiment with the two big AI algorithms of 2023: large language models (LLMs) and Stable Diffusion. I used the leading open-source LLMs from China‚Äôs tech sector to translate and summarize the text of Chinese author Liu Cixin‚Äôs award-winning science fiction novel: The Three-Body Problem. The book's storyline is based on a simple yet elusive problem from classical physics: predicting the movement of three gravitationally-attracted objects in space. I generated code for simulations and visualizations of this physics problem to present my own solutions to the three-body problem based on parallel computation. I also used Stable Diffusion to portray the imaginitive solutions to the three-body physics problem from one of the book‚Äôs main settings: an immersive virtual-reality game that spans centries of world history.</p>
<p data-v-142b09b6 data-v-142b09b6>I also share some of my experiences in China as an exchange student and research manager in the renewable energy technology sector. I wrote this article in English and translated it into Chinese using the same large language models I used to translate the Chinese text of the sci-fi novel into English. Warning: this article contains spoilers for the first book in the trilogy!</p>
<h2 id="back-story" data-v-142b09b6 data-v-142b09b6><a href="#back-story" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Back story</h2>
<p data-v-142b09b6 data-v-142b09b6>A few months ago my company announced that another round of layoffs was to come the following week. I'm on an engineering team that had already been impacted by a few rounds of layoffs in the past year, and I was expecting to be let go. On an impulse I bought a book at the top of my reading list from Amazon: "Three-Body Problem". It is an award-winning Sci-Fi trilogy written by Liu Cixin, a Chinese computer engineer who started writing the book as a series of essays that were published in China's "World of Sci-Fi" magazine.</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="Images of Three Body Problem Book Series" src="/img/three-body-problem/books.png" data-v-142b09b6 data-v-142b09b6></p>
<p data-v-142b09b6 data-v-142b09b6>I started learning Chinese in college, adding a major in Chinese Language to the mathematics major I decided on in my freshman year after taking vector calculus and linear algebra. In my sophmore year I did a semester abroad at Fudan University's <a href="https://ices.fudan.edu.cn/6628/list.htm" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>International Cultural Exchange School</a>. In 2007, living and studying Chinese in Shanghai as a 19 year old American was a really fun time. I was placed in an advanced-level course with a diverse group of students where English was not the lowest common linguistic denominator. We had a demanding cirriculum that emphasized reading, listening and speaking Chinese, but most of the language learning came through extracirricular activities: exploring Shanghai's food scene, bartering with vendors at the fabric markets, late night clubbing, walking around the Bund and the French Concession and chatting with my taxi cab drivers. It is hard to imagine how I did this without an iPhone, but I was able to get pretty far with an old Nokia 3310.</p>
<p data-v-142b09b6 data-v-142b09b6>At the end of one night of particularly heavy drinking, some of my classmates and I dropped in on an wangba (internet cafe) before heading back to the international dorm. Chinese internet cafes in 2007 were an expansive underground dens of computers, monitors, MMORPGs, FPSs, cigarets, and on-demand instant noodles delivered directly to your seat through an app on the desktop. That night our game of choice was Counter-Strike. In one of the lowest points of my gaming career, my classmates and I were crushed by our Chinese counterterrorist opponent.</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="Chinese internet cafe" src="/img/three-body-problem/wangba.webp" data-v-142b09b6 data-v-142b09b6></p>
<p data-v-142b09b6 data-v-142b09b6>My favorite memory of that semester at Fudan University was travelling on an epic over-night sleeper train from Shanghai to Guangxi province with a school-sponsored class trip to see Guilin. Multiple games of sam-yuk-gu (3-6-9) ran in parallel across the matrix of 3-by-2 sleeper car bunk beds lining the train car like workloads distributed across multiple GPU cores. The rules of 3-6-9 are simple: a group of people go around in a circle counting up from 1. If your number contains a 3, 6 or 9, you clap once for each occurance of the number instead of saying your number. The first person to break the rules takes a drink. Then repeat indefinitely. The next morning we all boarded a boat cruise in a daze to see the Lijiang river's stunning limestone peaks featured on the 20 yuan note:</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="20 yuan note with Guilin rock formations" src="/img/three-body-problem/twenty_small.gif" data-v-142b09b6 data-v-142b09b6></p>
<p data-v-142b09b6 data-v-142b09b6>My second job after college took me back to China where I specialized in the technologies, policies and applications of large scale battery projects as a research manager for China's energy storage industry association. The job exposed me to the power industry and cutting-edge battery projects, and also sharpened my technical Chinese as I was frequently reading, translating in a bi-linguagl environment. It was fun  I didn't realize it at the time, but that job was great preperation for reading Chinese Sci-Fi novels.</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="State Grid HQ in Xi Cheng" src="/img/three-body-problem/invokeai/castles.png" data-v-142b09b6 data-v-142b09b6></p>
<p data-v-142b09b6 data-v-142b09b6>My first introduction to the 'Three-Body Problem' book came from one of my best friends from college. He lived at the inner-most leaf-node of one of Beijing's most labrythnian hutongs next to a family that trained racing pigeons. My friend and I bonded over our study of Chinese language, classical guitar and our experiences in Beijing. I strongly considered his recommendation to check out ‰∏â‰Ωì (Three Body), the Chinese Sci-Fi novel about alien life in a solar system with three stars as he described it, but I never had the chance to read the book.</p>
<iframe width="100%" height="315" src="https://www.youtube.com/embed/5lj99Uz1d50?si=TwrypbY4vTfeWGRf" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen data-v-142b09b6 data-v-142b09b6></iframe>
<p data-v-142b09b6 data-v-142b09b6>Almost 10 years later I came across across a preview for the Netflix production of "3 Body Problem" scheduled to come out in early 2024. With the possibility of loosing my job weighing heavily on me, I picked up the books on Amazon hoping to have something to if I was going to be layed off. Over the weekend I was able to read a few of the chapters on my Kindle. I had not completely forgotten how to speak Chinese, and I could easily look up words and translate entire paragraphs with Google Translate.</p>
<h2 id="chinese-in-numbers" data-v-142b09b6 data-v-142b09b6><a href="#chinese-in-numbers" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Chinese in numbers</h2>
<p data-v-142b09b6 data-v-142b09b6>Here's a quick primer on the Chinese language from a mathematical perspective. This will be helpful before jumping into using NLP and LLMs with Chinese text later in this article.</p>
<p data-v-142b09b6 data-v-142b09b6>First, how many Chinese characters are there? This question isn't specific enough to have a single answer. A common rule of thumb that I have heard before says that there are over 50,000 characters in total with roughly 10,000 characters in use and about 3,000 characters frequently used in Chinese media and newspapers (<a href="https://en.wikipedia.org/wiki/Chinese_language#Vocabulary" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>source</a>). <a href="https://stackoverflow.com/a/1366113/6084948" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>This answer</a> from StackOverflow's legendary #1 ranked user VonC gives a good answer based on the number of Unicode characters in the CJK Unified Ideographs block: 20,992.</p>
<p data-v-142b09b6 data-v-142b09b6>Here are some numbers and statistics to be better understand the text of the Three-Body Problem Chinese text:</p>
<ul data-v-142b09b6 data-v-142b09b6>
<li data-v-142b09b6 data-v-142b09b6>188,380 total charactes in the book</li>
<li data-v-142b09b6 data-v-142b09b6>2,859 unique characters in the book</li>
<li data-v-142b09b6 data-v-142b09b6>36 chapters in the book</li>
<li data-v-142b09b6 data-v-142b09b6>average of 69.78 paragraphs per chapter</li>
<li data-v-142b09b6 data-v-142b09b6>total of 2,512 paragraphs in the book</li>
<li data-v-142b09b6 data-v-142b09b6>average of 74.99 characters per paragraph</li>
</ul>
<h3 id="character-frequency" data-v-142b09b6 data-v-142b09b6><a href="#character-frequency" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Character Frequency</h3>
<p data-v-142b09b6 data-v-142b09b6>Let's look at how frequently each character in the book is used. We can also combine this with some data on the overall frequency of Chinese characters. The best measurement I found for overall character frequency is from <a href="https://lingua.mtsu.edu/chinese-computing/statistics/char/list.php?Which=MO" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>Middle Tennessee State University</a>. Here's a visualization that shows of all of unique characters in the book. The height of a column represents how frequently a character occurs in the book, and the color represents the relatively frequency of the character in Chinese language overall.</p>
<div class="wrap" data-v-142b09b6 data-v-142b09b6>
<iframe class="p-4" src="https://briancaffey.github.io/three-body-problem/tjs/load.html" width="100%" height="550" data-v-142b09b6 data-v-142b09b6></iframe>
</div>
<h2 id="meta-llms-and-grass-mud-horse" data-v-142b09b6 data-v-142b09b6><a href="#meta-llms-and-grass-mud-horse" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Meta, LLMs, and Grass Mud Horse</h2>
<p data-v-142b09b6 data-v-142b09b6>In recent months I have been following the development of big open source AI projects. Two projects in particular are InvokeAI, an image generation tool based on Stable Diffusion, and <a href="https://ai.meta.com/llama/" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>LLaMA 2</a>, the latest generation of Meta's open source LLM. The name LLaMA stands for 'Large Language Model Meta AI', which happens to be the same spelling as the word for the domesticated South American camelid: llama. Before going deeper into LLMs we need a quick Chinese lesson.</p>
<p data-v-142b09b6 data-v-142b09b6>ËçâÊ≥•È©¨ is a non-technical word that referes to animals like Llama or Alpaca. It can be directly translated as "Grass Mud Horse" and it is phonetically similar to the most common Chinese profanity: Êìç‰Ω†Â¶à, which literally means "f*** your mother". The characters in these two words are nearly synonymous: the sounds of both words are "cao ni ma", but the tones are different, which in Chinese changes the meaning completely. The llama is basically a legendary Chinese internet meme subversive in the face of government censorship. ü¶ô was approved as part of Unicode 11.0 in 2018. The extended version of this profanity is ËçâÊ≥•È©¨ÊààÂ£Å (C«éon√≠m«é Gƒìb√¨: Grass Mud Horse Gobi), refering to the geographical origin of this mythical creature: the Gobi Dessert. This term is more explicit as it synonymous with "f*** your mother's c***". Coincidentally, the Gobi Desert is a region of Inner Mongolia which borders the mountainous region of Greater Khingan Range (Â§ßÂÖ¥ÂÆâÂ≤≠), the location of Red Coast and Radar Peak in Three-Body Problem where Ye Wenjie makes first contact with the Trisolarians.</p>
<p data-v-142b09b6 data-v-142b09b6>I requested access to Meta's LLaMa 2 models as soon as they came out and I was able to get it to run on my NVIDIA RTX 4090 GPU. I also joined a subreddit called <a href="https://www.reddit.com/r/LocalLLaMA/" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>r/LocalLLaMa</code></a> with over seventy thousand members discussing how to run large language models on consumer hardware. Another annoucement that caught my attention in July was the release of <a href="https://github.com/ymcui/Chinese-LLaMA-Alpaca-2" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>Chinese LLaMa 2</a>, an open-source large language model trained on Chinese and English which does very well against Chinese Language LLM Benchmarks such as the CMMCU: Chinese Massive Multitask Language Understanding.</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="image of CMMLU" src="/img/three-body-problem/cmmlu.jpeg" data-v-142b09b6 data-v-142b09b6></p>
<h2 id="translation-in-and-of-the-three-body-problem" data-v-142b09b6 data-v-142b09b6><a href="#translation-in-and-of-the-three-body-problem" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Translation in and of The Three-Body Problem</h2>
<p data-v-142b09b6 data-v-142b09b6>There are two important plot developments related to language translation in the Three-Body Problem novel, both of which involve book‚Äôs main female protagonist Ye Wenjie. First, copying the translation of Rachel Carson's 'Silent Spring' leads to her being relegated to the Red Coast project. At the Red Coast Ye Wenjie communicates with extraterrestrial life through a universal translation technology developed by the top-secret project.</p>
<p data-v-142b09b6 data-v-142b09b6>Ken Liu‚Äôs translation of the Three-Body Problem book from Chinese to English places the events during the Cultural Revolution at the beginning of the book rather than in the middle of the book. According to Liu, this was done in order to avoid attention of government censors, and his original intention was to tell the story in this way, starting with the events of the late 1960's in China.</p>
<p data-v-142b09b6 data-v-142b09b6>I tried translating the Chinese text of the Three-Body Problem book using LLMs. I started with the Chinese-LLaMA-2 model and then tried Qwen-7B-Chat, Baichuan-13B-Chat when these models came out. I found that the Qwen-7B-Chat model worked best for my translation tasks. Qwen is short for Qian Wen (ÂçÉÈóÆ, or "one thousand questions") and is developed by Alibaba Cloud.</p>
<p data-v-142b09b6 data-v-142b09b6>How do you get an LLM to translate text? Ultimately the quality of the translation returned by the LLM depends on the prompt and other parameters used for inference. I experimented with both chat and completion approaches and tried lots of different kinds of prompts. The models I worked with have a 4K context window (the number of tokens the model can take as input when generating responses), so for translation tasks I had the LLM work on one paragraph at a time. Here's the prompt I used with the Qwen-7B-Chat model:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-text" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>"‰Ω†ÊòØ‰∏ÄÂêçÁøªËØë„ÄÇËØ∑Â∞ÜÊØèÊù°Ê∂àÊÅØ‰ªé‰∏≠ÊñáÁøªËØëÊàêËã±Êñá„ÄÇ"
(You are a translator. Please translate each message from Chinese to English.)
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>I did some basic prompt engineering to get the LLM to translate the books in the Three-Body problem paragraph by paragraph. My computer was able to translate the first book overnight in under 500 minutes. Here are the results of my translation of Three-Body Problem with Qwen-7B-Chat model:</p>
<iframe class="p-4" src="https://briancaffey.github.io/three-body-problem/reader/?book=three_body&chapterNumber=1" width="100%" height="550" data-v-142b09b6 data-v-142b09b6></iframe>
<p data-v-142b09b6 data-v-142b09b6>It was interesting to see the failure modes of translation tasks for the different models. Most of the time the LLM was able to provided accurate translations. Some of the failure modes I observed were:</p>
<ul data-v-142b09b6 data-v-142b09b6>
<li data-v-142b09b6 data-v-142b09b6>a few Chinese characters would show up in the English translations</li>
<li data-v-142b09b6 data-v-142b09b6>a complete Chinese sentence would show up in an otherwise complete translation of a paragraph</li>
<li data-v-142b09b6 data-v-142b09b6>The LLM refused to translate certain paragraphs that included violent imagery, such as the violent scenes from the Cultural Revolution chapters</li>
<li data-v-142b09b6 data-v-142b09b6>If the sentence it was asked to translate was a question, the LLM would respond in Chinese to the question rather than providing a translation of the question itself</li>
</ul>
<h3 id="tokenization" data-v-142b09b6 data-v-142b09b6><a href="#tokenization" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Tokenization</h3>
<p data-v-142b09b6 data-v-142b09b6>When you feed a prompt to an LLM, it first puts the prompt through a process called tokenization. Tokenization takes a string of text and breaks it down into tokens (defined by the Large Language Model you are using). The process of tokenization is similar to the tokenization done by spaCy mentioned earlier. These tokens produced by LLM tokenization are numbers. Here's an example of tokenization in action using the Chinese-Llama-2 model:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6><span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> json
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> os
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>from</span> llama_cpp <span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> Llama<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> LlamaTokenizer

llm <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> Llama<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>
    model_path<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token string" data-v-142b09b6 data-v-142b09b6>"/path/to/models/ggml-model-q4_0.bin"</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
    n_ctx<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>4096</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
    n_gpu_layers<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>30</span>
<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

tokenizer <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> LlamaTokenizer<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>llama<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span>llm<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

TEXT<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token string" data-v-142b09b6 data-v-142b09b6>"Âú®ÈÇ£‰∏™Â∑≤Ë¢´ÂøòÂç¥ÁöÑÊó•Â≠êÈáåÔºåÂÆÉÁöÑ‰∏ñÁïåÈ¢†Ë¶Ü‰∫Ü„ÄÇÊ≥•ÂúüÈ£ûËµ∞ÔºåÂá∫Áé∞‰∫Ü‰∏ÄÊù°ÂèàÊ∑±ÂèàÂÆΩÁöÑÂ≥°Ë∞∑ÔºåÁÑ∂ÂêéÊ≥•ÂúüÂèàËΩ∞ÈöÜÈöÜÂú∞È£ûÂõûÊù•ÔºåÂ≥°Ë∞∑Ê∂àÂ§±‰∫ÜÔºåÂú®ÂéüÊù•Â≥°Ë∞∑ÁöÑÂ∞ΩÂ§¥Âá∫Áé∞‰∫Ü‰∏ÄÂ∫ßÈªëËâ≤ÁöÑÂ≠§Â≥∞„ÄÇÂÖ∂ÂÆûÔºåÂú®ËøôÁâáÂπøÈòîÁöÑÁñÜÂüü‰∏äÔºåËøôÁßç‰∫ãÂ∏∏Â∏∏ÂèëÁîüÔºåÊ≥•ÂúüÈ£ûËµ∞ÂèàÈ£ûÂõûÔºåÂ≥°Ë∞∑Âá∫Áé∞ÂèàÊ∂àÂ§±ÔºåÁÑ∂ÂêéÊòØÂ≠§Â≥∞Èôç‰∏¥ÔºåÂ•ΩÂÉèÊòØÁªôÊØèÊ¨°ÁÅæÂèòÊâì‰∏ä‰∏Ä‰∏™ÈÜíÁõÆÁöÑÊ†áËÆ∞„ÄÇË§êËöÅÂíåÂá†Áôæ‰∏™ÂêåÊóèÂ∏¶ÁùÄÂπ∏Â≠òÁöÑËöÅÂêéÂêëÂ§™Èò≥ËêΩ‰∏ãÁöÑÊñπÂêëËµ∞‰∫Ü‰∏ÄÊÆµË∑ØÔºåÂª∫Á´ã‰∫ÜÊñ∞ÁöÑÂ∏ùÂõΩ„ÄÇ"</span>
tokens <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> tokenizer<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>encode<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>TEXT<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-text" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>print(str(tokens[:4]) + " ...")
</code></pre></div>
<blockquote data-v-142b09b6 data-v-142b09b6>
<p data-v-142b09b6 data-v-142b09b6>[1, 30505, 32380, 36812] ...</p>
</blockquote>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-text" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>for token in tokens:
    text = tokenizer.decode([token])
    print(text, end=" ")
</code></pre></div>
<blockquote data-v-142b09b6 data-v-142b09b6>
<p data-v-142b09b6 data-v-142b09b6>Âú® ÈÇ£‰∏™ Â∑≤Ë¢´ Âøò Âç¥ ÁöÑÊó•Â≠ê Èáå Ôºå ÂÆÉÁöÑ ‰∏ñÁïå È¢†Ë¶Ü ‰∫Ü „ÄÇ Ê≥• Âúü È£û Ëµ∞ Ôºå Âá∫Áé∞‰∫Ü ‰∏ÄÊù° Âèà Ê∑± Âèà ÂÆΩ ÁöÑ Â≥°Ë∞∑ Ôºå ÁÑ∂Âêé Ê≥• Âúü Âèà ËΩ∞ ÈöÜ ÈöÜ Âú∞ È£û ÂõûÊù• Ôºå Â≥°Ë∞∑ Ê∂àÂ§± ‰∫Ü Ôºå Âú® ÂéüÊù• Â≥°Ë∞∑ ÁöÑ Â∞ΩÂ§¥ Âá∫Áé∞‰∫Ü ‰∏ÄÂ∫ß ÈªëËâ≤ ÁöÑ Â≠§ Â≥∞ „ÄÇ ÂÖ∂ÂÆû Ôºå Âú®Ëøô Áâá ÂπøÈòî ÁöÑ ÁñÜ Âüü ‰∏ä Ôºå ËøôÁßç‰∫ã Â∏∏Â∏∏ ÂèëÁîü Ôºå Ê≥• Âúü È£û Ëµ∞ Âèà È£û Âõû Ôºå Â≥°Ë∞∑ Âá∫Áé∞ Âèà Ê∂àÂ§± Ôºå ÁÑ∂Âêé ÊòØ Â≠§ Â≥∞ Èôç‰∏¥ Ôºå Â•ΩÂÉèÊòØ Áªô ÊØèÊ¨° ÁÅæ Âèò Êâì ‰∏ä ‰∏Ä‰∏™ ÈÜíÁõÆ ÁöÑ Ê†áËÆ∞ „ÄÇ Ë§ê ËöÅ Âíå Âá†Áôæ ‰∏™ Âêå Êóè Â∏¶ÁùÄ Âπ∏ Â≠ò ÁöÑ ËöÅ Âêé Âêë Â§™Èò≥ ËêΩ ‰∏ãÁöÑ ÊñπÂêë Ëµ∞‰∫Ü ‰∏ÄÊÆµ Ë∑Ø Ôºå Âª∫Á´ã‰∫Ü Êñ∞ÁöÑ Â∏ùÂõΩ „ÄÇ</p>
</blockquote>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>english_text <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token string" data-v-142b09b6 data-v-142b09b6>"This is an example of tokenization using a large language model."</span>
english_tokens <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> tokenizer<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>encode<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>english_text<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>print</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token builtin" data-v-142b09b6 data-v-142b09b6>str</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>english_tokens<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token number" data-v-142b09b6 data-v-142b09b6>4</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>+</span> <span class="token string" data-v-142b09b6 data-v-142b09b6>" ..."</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

<span class="token keyword" data-v-142b09b6 data-v-142b09b6>for</span> token <span class="token keyword" data-v-142b09b6 data-v-142b09b6>in</span> english_tokens<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span>
    text <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> tokenizer<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>decode<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span>token<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
    <span class="token keyword" data-v-142b09b6 data-v-142b09b6>print</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token string-interpolation" data-v-142b09b6 data-v-142b09b6><span class="token string" data-v-142b09b6 data-v-142b09b6>f"'</span><span class="token interpolation" data-v-142b09b6 data-v-142b09b6><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>{</span>text<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>}</span></span><span class="token string" data-v-142b09b6 data-v-142b09b6>'"</span></span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> end<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token string" data-v-142b09b6 data-v-142b09b6>" "</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<blockquote data-v-142b09b6 data-v-142b09b6>
<p data-v-142b09b6 data-v-142b09b6>[1, 4013, 338, 385] ...</p>
</blockquote>
<blockquote data-v-142b09b6 data-v-142b09b6>
<p data-v-142b09b6 data-v-142b09b6>'' 'This' ' is' ' an' ' example' ' of' ' token' 'ization' ' using' ' a' ' large' ' language' ' model' '.'</p>
</blockquote>
<p data-v-142b09b6 data-v-142b09b6>Here are some key differences between English and Chinese that have implications for how the language is tokenized by large language models:</p>
<ul data-v-142b09b6 data-v-142b09b6>
<li data-v-142b09b6 data-v-142b09b6>Chinese does not use spaces between words like English does</li>
<li data-v-142b09b6 data-v-142b09b6>Chinese words are typically formed from 2 or more characters</li>
<li data-v-142b09b6 data-v-142b09b6>Chinese verbs are not conjugated and do not have different tenses</li>
<li data-v-142b09b6 data-v-142b09b6>Chinese words don't have singular and plural variants</li>
<li data-v-142b09b6 data-v-142b09b6>Chinese grammar is very simple and is similar to English</li>
<li data-v-142b09b6 data-v-142b09b6>Chinese characters do not have capitization like ASCII characters</li>
<li data-v-142b09b6 data-v-142b09b6>The token represented by the number 1 encodes a starting token</li>
</ul>
<h2 id="imagining-scenes-from-three-body-problem-with-stable-diffusion" data-v-142b09b6 data-v-142b09b6><a href="#imagining-scenes-from-three-body-problem-with-stable-diffusion" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Imagining scenes from Three-Body Problem with Stable Diffusion</h2>
<p data-v-142b09b6 data-v-142b09b6>Here are some images I generated using Stable Diffusion with InvokeAI that depict scenes from the Three-Body Problem book. These scenes portray solutions to the Three-Body Problem that players in the Three-Body game devised. The first is a Confucian system of etiquette for predicting the movement of the three suns. The second is a human-powered computer that Qin Shi Huang used to try to predict the movement of the three suns.</p>
<blockquote data-v-142b09b6 data-v-142b09b6>
<p data-v-142b09b6 data-v-142b09b6>Prompt: Ceremonies and etiquette system related to the sun and multiple celestial++ bodies Confucius artistic style</p>
</blockquote>
<!----><!---->
<blockquote data-v-142b09b6 data-v-142b09b6>
<p data-v-142b09b6 data-v-142b09b6>array of chinese++ warriors++ on a electronics+ circuit+ board qing+ dynasty style art logic puzzle</p>
</blockquote>
<!----><!---->
<p data-v-142b09b6 data-v-142b09b6>Congrats to the InvokeAI team on the 3.0 release. It has been awesome to use and the current docker compose setup is a huge improvement on the 2.x version.</p>
<h2 id="n-body-simulations-cuda-and-threejs" data-v-142b09b6 data-v-142b09b6><a href="#n-body-simulations-cuda-and-threejs" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>n-body simulations, CUDA and Three.js</h2>
<p data-v-142b09b6 data-v-142b09b6>The nbody problem has no closed-form analytical solution, but it is possible to do a basic simulation of the three-body problem on consumer hardware and open source software, like NVIDIA and CUDA.</p>
<h3 id="three-body-cuda-simulation" data-v-142b09b6 data-v-142b09b6><a href="#three-body-cuda-simulation" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Three-Body CUDA simulation</h3>
<p data-v-142b09b6 data-v-142b09b6>I wrote a simple program with the help of ChatGPT for running nbody problem simulations. The program uses CuPy, a Python library that exposes APIs for doing matrix multiplication to predict the position of three bodies using Euclidian Integration. Here's the script:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-py" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6><span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> numpy <span class="token keyword" data-v-142b09b6 data-v-142b09b6>as</span> np
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> cupy <span class="token keyword" data-v-142b09b6 data-v-142b09b6>as</span> cp
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> time
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>import</span> json

<span class="token comment" data-v-142b09b6 data-v-142b09b6># Simulation parameters</span>
NUM_PARTICLES <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span>
DIMENSIONS <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span> <span class="token comment" data-v-142b09b6 data-v-142b09b6># 3D space</span>
NUM_STEPS <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>30</span>
DT <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0.1</span>

<span class="token comment" data-v-142b09b6 data-v-142b09b6># Generate initial positions and velocities</span>
np_positions <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> np<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>random<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>randn<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>NUM_PARTICLES<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> DIMENSIONS<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
np_velocities <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> np<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>random<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>randn<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>NUM_PARTICLES<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> DIMENSIONS<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

cp_positions <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>np_positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
cp_velocities <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>np_velocities<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

np_ticks <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> np<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>expand_dims<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>np_positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> axis<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
cp_ticks <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>np_ticks<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

<span class="token comment" data-v-142b09b6 data-v-142b09b6># nbody simulation loop</span>
start_time <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> time<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>time<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>for</span> step <span class="token keyword" data-v-142b09b6 data-v-142b09b6>in</span> <span class="token builtin" data-v-142b09b6 data-v-142b09b6>range</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>NUM_STEPS<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span>

    <span class="token comment" data-v-142b09b6 data-v-142b09b6># this gets pairwise differences</span>
    diff <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp_positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token boolean" data-v-142b09b6 data-v-142b09b6>None</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span> cp_positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token boolean" data-v-142b09b6 data-v-142b09b6>None</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span>
    distances <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>sqrt<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span><span class="token builtin" data-v-142b09b6 data-v-142b09b6>sum</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>diff<span class="token operator" data-v-142b09b6 data-v-142b09b6>**</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> axis<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

    <span class="token comment" data-v-142b09b6 data-v-142b09b6># avoid division by zero</span>
    epsilon <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1e-5</span>
    inv_distances <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1.0</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>/</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>maximum<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>distances<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> epsilon<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

    <span class="token comment" data-v-142b09b6 data-v-142b09b6># calculate forces</span>
    cp_forces <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span><span class="token builtin" data-v-142b09b6 data-v-142b09b6>sum</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>diff<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>T <span class="token operator" data-v-142b09b6 data-v-142b09b6>*</span> inv_distances<span class="token operator" data-v-142b09b6 data-v-142b09b6>**</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>T<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> axis<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>1</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

    <span class="token comment" data-v-142b09b6 data-v-142b09b6># update velocities and positions</span>
    cp_velocities <span class="token operator" data-v-142b09b6 data-v-142b09b6>+=</span> DT <span class="token operator" data-v-142b09b6 data-v-142b09b6>*</span> cp_forces
    cp_positions <span class="token operator" data-v-142b09b6 data-v-142b09b6>+=</span> DT <span class="token operator" data-v-142b09b6 data-v-142b09b6>*</span> cp_velocities
    cp_ticks <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>append<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>cp_ticks<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>expand_dims<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>cp_positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

sim_time <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> time<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>time<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span> start_time
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>print</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token string" data-v-142b09b6 data-v-142b09b6>"Simulation time:"</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> sim_time<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>


<span class="token keyword" data-v-142b09b6 data-v-142b09b6>class</span> <span class="token class-name" data-v-142b09b6 data-v-142b09b6>NumpyArrayEncoder</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>json<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>JSONEncoder<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span>
    <span class="token keyword" data-v-142b09b6 data-v-142b09b6>def</span> <span class="token function" data-v-142b09b6 data-v-142b09b6>default</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>self<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> obj<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span>
        <span class="token keyword" data-v-142b09b6 data-v-142b09b6>if</span> <span class="token builtin" data-v-142b09b6 data-v-142b09b6>isinstance</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>obj<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> np<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>ndarray<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span>
            <span class="token keyword" data-v-142b09b6 data-v-142b09b6>return</span> obj<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>tolist<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
        <span class="token keyword" data-v-142b09b6 data-v-142b09b6>return</span> json<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>JSONEncoder<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>default<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>self<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> obj<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>


np_ticks <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp_ticks<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>get<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>


<span class="token comment" data-v-142b09b6 data-v-142b09b6># this is data we can work with in python and write to a file</span>
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>with</span> <span class="token builtin" data-v-142b09b6 data-v-142b09b6>open</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token string" data-v-142b09b6 data-v-142b09b6>"ticks.json"</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token string" data-v-142b09b6 data-v-142b09b6>"w"</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span> <span class="token keyword" data-v-142b09b6 data-v-142b09b6>as</span> f<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span>
    f<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>write<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>json<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>dumps<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>np_ticks<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> cls<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span>NumpyArrayEncoder<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>To better understand the matrix math here I walked through a simple example of what each step does:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-py" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6><span class="token comment" data-v-142b09b6 data-v-142b09b6># particle coordinates (x,y,z) in 3D space</span>
positions <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>1</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2.5</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>4</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span><span class="token number" data-v-142b09b6 data-v-142b09b6>5</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span><span class="token number" data-v-142b09b6 data-v-142b09b6>6</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>7</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span><span class="token number" data-v-142b09b6 data-v-142b09b6>8</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span><span class="token number" data-v-142b09b6 data-v-142b09b6>9</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>The first operation creates an array for pairwise distances for each dimension:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>diff <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token boolean" data-v-142b09b6 data-v-142b09b6>None</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span> positions<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token boolean" data-v-142b09b6 data-v-142b09b6>None</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>:</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span>
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>print</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>diff<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>2.5</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>6</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>5.5</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>6</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>

       <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2.5</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>

       <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>6</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>5.5</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>6</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>-</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>The rows of zeros correspond to a particle's <code data-v-142b09b6 data-v-142b09b6>x</code>, <code data-v-142b09b6 data-v-142b09b6>y</code> and <code data-v-142b09b6 data-v-142b09b6>z</code> distances to itself, which are all zero by axioms of Euclidian vector spaces.</p>
<p data-v-142b09b6 data-v-142b09b6>The next operation calculates the distance between each particle:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>distances <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>sqrt<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span><span class="token builtin" data-v-142b09b6 data-v-142b09b6>sum</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>diff<span class="token operator" data-v-142b09b6 data-v-142b09b6>**</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> axis<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>print</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>distances<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>4.9244289</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>10.11187421</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
       <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>4.9244289</span> <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>5.19615242</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
       <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>10.11187421</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>5.19615242</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>  <span class="token number" data-v-142b09b6 data-v-142b09b6>0</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>        <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>The diagonal or zeros represents that fact that a particle <code data-v-142b09b6 data-v-142b09b6>n</code> has a distance of zero to iself.</p>
<p data-v-142b09b6 data-v-142b09b6>The next step calculates inverse distances and uses a small <code data-v-142b09b6 data-v-142b09b6>epsilon</code> value to avoid division by 0:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>epsilon <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1e-5</span>
inv_distances <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1.0</span> <span class="token operator" data-v-142b09b6 data-v-142b09b6>/</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>maximum<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>distances<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> epsilon<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
<span class="token keyword" data-v-142b09b6 data-v-142b09b6>print</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>inv_distances<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>

array<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>1.00000000e+05</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>2.03069233e-01</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>9.88936353e-02</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
       <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>2.03069233e-01</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1.00000000e+05</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1.92450090e-01</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span>
       <span class="token punctuation" data-v-142b09b6 data-v-142b09b6>[</span><span class="token number" data-v-142b09b6 data-v-142b09b6>9.88936353e-02</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1.92450090e-01</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> <span class="token number" data-v-142b09b6 data-v-142b09b6>1.00000000e+05</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>]</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>The next step is the most elegant part of the simulation and really flexes the GPU's parallel compute capabilities:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6>cp_forces <span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span> cp<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span><span class="token builtin" data-v-142b09b6 data-v-142b09b6>sum</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>(</span>diff<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>T <span class="token operator" data-v-142b09b6 data-v-142b09b6>*</span> inv_distances<span class="token operator" data-v-142b09b6 data-v-142b09b6>**</span><span class="token number" data-v-142b09b6 data-v-142b09b6>3</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>.</span>T<span class="token punctuation" data-v-142b09b6 data-v-142b09b6>,</span> axis<span class="token operator" data-v-142b09b6 data-v-142b09b6>=</span><span class="token number" data-v-142b09b6 data-v-142b09b6>1</span><span class="token punctuation" data-v-142b09b6 data-v-142b09b6>)</span>
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>The <code data-v-142b09b6 data-v-142b09b6>.T</code> operation transposes a matrix, multiplies by the cube of inverse distances, then transposes the matrix again before summing along the first axis. Transposing a matrix basically swaps rows and columns.</p>
<p data-v-142b09b6 data-v-142b09b6>The next two steps are also pretty elegant:</p>
<div class="nuxt-content-highlight" data-v-142b09b6 data-v-142b09b6><pre class="line-numbers language-python" data-v-142b09b6 data-v-142b09b6><code data-v-142b09b6 data-v-142b09b6><span class="token comment" data-v-142b09b6 data-v-142b09b6># update velocities and positions</span>
cp_velocities <span class="token operator" data-v-142b09b6 data-v-142b09b6>+=</span> DT <span class="token operator" data-v-142b09b6 data-v-142b09b6>*</span> cp_forces
cp_positions <span class="token operator" data-v-142b09b6 data-v-142b09b6>+=</span> DT <span class="token operator" data-v-142b09b6 data-v-142b09b6>*</span> cp_velocities
</code></pre></div>
<p data-v-142b09b6 data-v-142b09b6>In the last step I append the updated positions to an array that holds every "tick" (the positions of each particle between each time interval, <code data-v-142b09b6 data-v-142b09b6>DT</code> - "delta time")</p>
<p data-v-142b09b6 data-v-142b09b6>Here's the formula for the mathematical equation used to calculate the force on any given body in an n-body system:</p>
<iframe src="https://briancaffey.github.io/three-body-problem/iframe/formula.html" width="100%" height="110" data-v-142b09b6 data-v-142b09b6></iframe>
<p data-v-142b09b6 data-v-142b09b6>To test that the simulation was working correctly I used ChatGPT again to construct a 3D scene in Blender with a Python script:</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="Blender Animation" src="/img/three-body-problem/blender.png" data-v-142b09b6 data-v-142b09b6></p>
<h3 id="threejs" data-v-142b09b6 data-v-142b09b6><a href="#threejs" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Three.js</h3>
<p data-v-142b09b6 data-v-142b09b6>Imagine that we are working for a Chinese startup called the Qin Dynasty. The founder, Qin Shi Huang, is a brutal tyrant with an obsessive fear of assassination. Let's put on our product hat for a minute and think about how we can impress him with a clean solution to the three-body problem. A recent attempt involved building a 30,000-person analog computer that was destroyed in tri-solar syzygy. Failing to accurately predict the movement of the suns could mean execution by live-burial, a fiery death or worse. Using CUDA and Blender is a good MVP but doesn't make for the best technical demo since it involves so many different steps: running the simulation in CUDA, exporting data to JSON, loading data into a visualuzation and then finally rendering a video of the simulation. With a popular Javascript library called Three.js we can run an interactive three-body problem simulation in real-time right in the browser. Here's the three-body simulation I also co-authored with ChatGPT-4 using Three.js:</p>
<iframe src="https://briancaffey.github.io/three-body-problem/three/" width="100%" height="350" data-v-142b09b6 data-v-142b09b6></iframe>
<h2 id="screen-adaptations-the-gaming-industry-and-the-ccp" data-v-142b09b6 data-v-142b09b6><a href="#screen-adaptations-the-gaming-industry-and-the-ccp" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>Screen adaptations, the gaming industry and the CCP</h2>
<p data-v-142b09b6 data-v-142b09b6>Dream of the Red Chamber is one of China's Four Great Classical Novels and is often seen as the pinacle of Chinese fiction. It was written in the mid 18th century and first published in 1791. It is a long saga that totals 960,000 characters in length, on similar scale to the length of the Three-Body Problem trilogy. Sun Wen, a Qing dynasty artist, spent 36 years of his life doing a series of 230 paintings depicting scenes from the Dream of the Red Chamber: dream sequences, demons, goddesses, nuns, nobles, beggars, raging fires, landscapes, interiors, wildlife, gardens, temples, funerals, battles, processions, banquets, trials, operas, marriages.</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="Sun Wen paintings sample" src="/img/three-body-problem/dorc.png" data-v-142b09b6 data-v-142b09b6></p>
<p data-v-142b09b6 data-v-142b09b6>Following in this tradition of celebrating great literature, Tencent Video and China Central Television produced a 30-episode adaptation of the Three-Body Problem that was released in Feburary 2023. It is a surprisingly faithful reproduction of the book that is worth checking out. The portrayal of Shi Qiang (Da Shi) was easily my favorite part of the series. I was also impressed by how the Three-Body VR game scenes were done with computer graphics. It got me thinking about how China is represented in some of the worlds most popular video games.</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="games" src="/static/three-body/game.png" data-v-142b09b6 data-v-142b09b6></p>
<p data-v-142b09b6 data-v-142b09b6>This is Rocket League, a competitive vehicular soccer game where players, like in the Three-Body game, must master the laws of gravity. The Chinese-themed Forbiden Temple arena shown here is one of many virtual international venues in the game. Epic Games (creator of Fortnite) bought Rocket League in 2019 for an estimated $250 to $300 million.</p>
<p data-v-142b09b6 data-v-142b09b6>Like Rocket League, Overwatch is a highly-competitive eSport on a global scale. It features a large roster of 38 players from all over the world. Dr. Mei-Ling Zhou (Âë®ÁæéÁÅµ) is a Chinese climatologist who uses ice both to attack opponents and to defend herself. Mei became controversial in China due to her adoption as a symbolic figure in the 2019 Hong Kong protests.</p>
<p data-v-142b09b6 data-v-142b09b6>Three college friends combined their interest in anime, comics and games (ACG) and literature to publish one of the most successful games created by a Chinese company and arguably one of China's most important cultural exports: Genshin Impact. miHoYo, the Shanghai-based company that develops Genshin Impact, grossed $4 billion of revenue globally in the game's first year setting a new record in the gaming industry. Like other companies of its size, miHoYo has a party committee under the Chinese Communist Party that influences the company's operations.</p>
<h2 id="ai-and-layoffs-in-the-tech-industry" data-v-142b09b6 data-v-142b09b6><a href="#ai-and-layoffs-in-the-tech-industry" aria-hidden="true" tabindex="-1" data-v-142b09b6 data-v-142b09b6><span class="icon icon-link" data-v-142b09b6 data-v-142b09b6></span></a>AI and layoffs in the tech industry</h2>
<p data-v-142b09b6 data-v-142b09b6>I have a positive attitude toward AI and its ability to supercharge the creative work we do, but I also think that replacing humans and AI-related layoffs should should be a part of the conversation. I wasn't impacted by the recent round of layoffs at my company, and I'm grateful to have the opportunity to work with a talented team on interesting problems in the health tech industry. I do have some solid references for folks in DevOps, product and backend and frontend engineering, and I‚Äôm happy to <a href="https://www.linkedin.com/in/brian-caffey-06b22a18/" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>connect and share via LinkedIn</a>.</p>
<p data-v-142b09b6 data-v-142b09b6>Layoffs in both China and the U.S. have been pummled the tech sector over the last two years. New graduates in China are also facing a difficult job market. There are some popular expressions that paint a picture of the job market in China:</p>
<ul data-v-142b09b6 data-v-142b09b6>
<li data-v-142b09b6 data-v-142b09b6>Ë∫∫Âπ≥ Lying flat: avoiding relentless work</li>
<li data-v-142b09b6 data-v-142b09b6>‰πù‰πùÂÖ≠ 996 Work culture: describes working from 9AM to 9PM, 6 days a week, a common work schedule for many Chinese employees</li>
<li data-v-142b09b6 data-v-142b09b6>ÂÖ®ËÅåÂÑøÂ•≥ Full-time Children: <a href="https://www.cnn.com/2023/07/26/economy/china-youth-unemployment-intl-hnk/index.html" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>Young Chinese are getting paid to be ‚Äòfull-time children‚Äô as jobs become harder to find</a></li>
<li data-v-142b09b6 data-v-142b09b6>35Â≤ÅËØÖÂíí The curse of 35: <a href="https://www.marketplace.org/shows/marketplace-tech/chinas-tech-workers-ageism-the-curse-of-35/" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>Ageism in China‚Äôs tech sector has workers fearing the ‚Äúcurse of 35‚Äù</a>. Shout out to my fellow Year of the Dragon 35 year olds! üê≤</li>
<li data-v-142b09b6 data-v-142b09b6>ÂêÉËã¶ Eat Bitterness: <a href="https://www.nytimes.com/2023/05/30/business/china-youth-unemployment.html" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>China‚Äôs Young People Can‚Äôt Find Jobs. Xi Jinping Says to ‚ÄòEat Bitterness.‚Äô</a></li>
</ul>
<p data-v-142b09b6 data-v-142b09b6>It is an exciting time for AI. Elon Musk and Kaifu Lee have both recently released open-source large language models: Grok and Yi. Sam Altman was fired as CEO of OpenAI, then came back. Stable Diffusion just released a text to video model. AGI might already be here. In the U.S., we are going into our first presidential election cycle with AI fully turned on. Here's a <a href="https://www.amazon.com/Three-Body-Problem-Cixin-Liu/dp/0765382032" rel="nofollow noopener noreferrer" target="_blank" data-v-142b09b6 data-v-142b09b6>link to The Three-Body Problem book on Amazon</a>. Thanks for reading and Happy Thanksgiving!</p>
<p data-v-142b09b6 data-v-142b09b6><img alt="Happy Thanksgiving" src="/img/three-body-problem/thanksgiving.png" data-v-142b09b6 data-v-142b09b6></p></div> <div class="text-center pb-4 pt-8" data-v-142b09b6><button class="mc-btn rounded py-1 px-2" data-v-142b09b6>
        Show Disqus Comments üí¨
      </button></div> <!----> <h1 data-v-142b09b6></h1></div></article> <div class="mx-auto max-w-6xl p-4 lg:px-16 text-center" data-v-7718c60c><hr class="mt-4" data-v-7718c60c> <div class="align-center py-4" data-v-7718c60c><div class="pb-4" data-v-7718c60c>
      Âä†ÂÖ•ÊàëÁöÑÈÄöËÆØÂêçÂçï
    </div> <div class="flex align-center justify-center" data-v-5690d13b data-v-7718c60c><div id="mc_embed_signup" class="w-full md:w-1/2 flex-shrink justify-center" data-v-5690d13b><form id="mc-embedded-subscribe-form" action="https://github.us2.list-manage.com/subscribe/post?u=43a795784ca963e25903a0da6&id=9937fe4fc5" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate" data-v-5690d13b><div id="mc_embed_signup_scroll" class="grid grid-cols-1 sm:grid-cols-2 gap-4" data-v-5690d13b><input id="mce-EMAIL" type="email" name="EMAIL" placeholder="ËæìÂÖ•ÊÇ®ÁöÑÁîµÂ≠êÈÇÆÁÆ±" class="rounded mc text-center" data-v-5690d13b> <div aria-hidden="true" style="position:absolute;left:-5000px" data-v-5690d13b><input name="b_43a795784ca963e25903a0da6_9937fe4fc5" tabindex="-1" data-v-5690d13b></div> <div class="text-right" style="width:100%" data-v-5690d13b><input id="mc-embedded-subscribe" type="submit" name="subscribe" value="ËÆ¢ÈòÖ" class="mc-btn rounded px-2 py-1 w-full" data-v-5690d13b></div></div></form></div></div></div> <hr data-v-7718c60c> <div class="py-4" data-v-7718c60c>
    ÊÑüË∞¢ÊÇ®ËÆøÈóÆÊàëÁöÑÁΩëÁ´ôÔºÅ
  </div> <div class="pb-4" data-v-7718c60c>
    ¬© 2024 Brian Caffey
  </div></div></div></div></div><script defer src="/_nuxt/static/1708690618/zh/2023/08/27/python-vue-chinese-llama-2-and-the-three-body-problem/state.js"></script><script src="/_nuxt/0bde903.js" defer></script><script src="/_nuxt/c259e4a.js" defer></script><script src="/_nuxt/8bfa011.js" defer></script><script src="/_nuxt/b575c49.js" defer></script><script src="/_nuxt/691d3dd.js" defer></script>
  </body>
</html>
