<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Building web applications with Django, Django REST Framework, Nuxt.js and docker</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Brian Caffey's personal website"><meta data-n-head="ssr" name="robots" content="all"><meta data-n-head="ssr" property="og:title" content="Building web applications with Django, Django REST Framework, Nuxt.js and docker"><meta data-n-head="ssr" property="og:description" content="This article documents my progress combining the Django web framework with Nuxt JS to build applications that have both great SEO and a smooth SPA user experience."><meta data-n-head="ssr" property="og:image" content="https://briancaffey.github.io/static/django_nuxt_app_diagram.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/5a9dfc9.js" as="script"><link rel="preload" href="/_nuxt/3489e1f.js" as="script"><link rel="preload" href="/_nuxt/ebf439e.js" as="script"><link rel="preload" href="/_nuxt/5539925.js" as="script"><link rel="preload" href="/_nuxt/4c325ce.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 f52d43e0:0 9592d830:0 517a8dd7:0 fa7ff0ca:0 56b15182:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-red-300{--bg-opacity:1;background-color:#feb2b2;background-color:rgba(254,178,178,var(--bg-opacity))}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.flex-1{flex:1 1 0%}.font-bold{font-weight:700}.h-3{height:.75rem}.h-4{height:1rem}.h-12{height:3rem}.h-32{height:8rem}.h-64{height:16rem}.text-sm{font-size:.875rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-8{line-height:2rem}.leading-9{line-height:2.25rem}.m-2{margin:.5rem}.m-4{margin:1rem}.mx-1{margin-left:.25rem;margin-right:.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.-ml-1{margin-left:-.25rem}.-ml-3{margin-left:-.75rem}.-ml-20{margin-left:-5rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.object-cover{-o-object-fit:cover;object-fit:cover}.p-3{padding:.75rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-32{padding-top:8rem;padding-bottom:8rem}.pt-4{padding-top:1rem}.pr-4{padding-right:1rem}.pb-4{padding-bottom:1rem}.pt-8{padding-top:2rem}.pb-8{padding-bottom:2rem}.pt-16{padding-top:4rem}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.resize{resize:both}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-red-400{--text-opacity:1;color:#fc8181;color:rgba(252,129,129,var(--text-opacity))}.text-red-600{--text-opacity:1;color:#e53e3e;color:rgba(229,62,62,var(--text-opacity))}.uppercase{text-transform:uppercase}.visible{visibility:visible}.w-3{width:.75rem}.w-4{width:1rem}.w-12{width:3rem}.w-32{width:8rem}.w-full{width:100%}.z-10{z-index:10}.gap-4{grid-gap:1rem;gap:1rem}.gap-6{grid-gap:1.5rem;gap:1.5rem}.gap-8{grid-gap:2rem;gap:2rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition-all{transition-property:all}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.duration-150{transition-duration:.15s}.delay-150{transition-delay:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:inline{display:inline}.sm\:hidden{display:none}.sm\:p-16{padding:4rem}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:w-2\/3{width:66.666667%}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:px-4{padding-left:1rem;padding-right:1rem}.md\:w-1\/2{width:50%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:1024px){.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pl-64{padding-left:16rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1280px){.xl\:pb-16{padding-bottom:4rem}}:root{--color:#243746;--color-primary:#158876;--color-secondary:#0e2233;--bg:#f3f5f4;--bg-secondary:#fff;--bg-code:#ddd;--border-color:#ddd}.dark-mode{--color:#ebf4f1;--color-primary:#41b38a;--color-secondary:#fdf9f3;--bg:#091a28;--bg-secondary:#071521;--bg-code:#ddd;--border-color:#0d2538}.sepia-mode{--color:#433422;--color-primary:#504231;--color-secondary:#504231;--bg:#f1e7d0;--bg-code:#ddd;--bg-secondary:#eae0c9;--border-color:#ded0bf}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;background-color:#f3f5f4;background-color:var(--bg);color:#243746;color:var(--color);transition:background-color .7s}a{color:#158876;color:var(--color-primary)}.py-05{padding-top:.125rem;padding-bottom:.125rem}.markdown{--text-opacity:1;color:#1a202c;color:rgba(26,32,44,var(--text-opacity));line-height:1.5;color:#0e2233;color:var(--color-secondary)}.markdown .token.operator{background:0 0}.markdown>*+*{margin-top:0;margin-bottom:1rem}.markdown li+li{margin-top:.25rem}.markdown li>p+p{margin-top:1.5rem;color:#158876;color:var(--color-primary)}.markdown img{margin:auto}.markdown a,.markdown strong{font-weight:600}.markdown strong a{font-weight:700}.markdown h1{font-size:2.25rem}.markdown h1,.markdown h2{border-color:#158876;border-color:var(--color-primary);line-height:1.25;border-bottom-width:1px;font-weight:600;margin-bottom:1rem;margin-top:1.5rem;padding-bottom:.5rem}.markdown h2{font-size:1.5rem}.markdown h3{line-height:1.375;font-size:1.125rem}.markdown h3,.markdown h4{border-color:#158876;border-color:var(--color-primary);font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown h4{line-height:1;font-size:1rem}.markdown h5{border-color:#158876;border-color:var(--color-primary)}.markdown h5,.markdown h6{line-height:1.25;font-size:.875rem;font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown blockquote,.markdown h6{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.markdown blockquote{font-size:1rem;border-left-width:4px;--border-opacity:1;border-color:#e2e8f0;border-color:rgba(226,232,240,var(--border-opacity));padding-left:1rem;padding-right:1rem;border-color:#158876;border-color:var(--color-primary)}.markdown code{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.875rem;display:inline;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity));padding:.125rem .25rem;background-color:#ddd;background-color:var(--bg-code);color:#000}.markdown code,.markdown pre{--bg-opacity:1;border-radius:.25rem}.markdown pre{background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity));padding:1rem}.markdown pre code{display:block;background-color:transparent;padding:0;overflow:visible;border-radius:0;color:#000}.markdown p{margin-bottom:10px}code[class*=language-],pre[class*=language-]{background:#ddd!important;background:var(--bg-code)!important;text-shadow:none!important}.markdown ul{list-style-type:disc}.markdown ol,.markdown ul{font-size:1rem;padding-left:2rem}.markdown ol{list-style-type:decimal}.markdown kbd{font-size:.75rem;display:inline-block;border-radius:.25rem;border-width:1px;padding:.125rem .25rem;vertical-align:middle;font-weight:400;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.markdown table,td,th{font-size:1rem;border:1px solid #243746;border-color:var(--color)}.markdown table{overflow-x:scroll}.markdown td,.markdown th{border-width:1px;padding:.25rem .75rem}.markdown .highlight pre{--bg-opacity:1!important;background-color:#f7fafc!important;background-color:rgba(247,250,252,var(--bg-opacity))!important}.article-card{box-shadow:0 5px 10px 1px #0e2233;box-shadow:0 5px 10px 1px var(--color-secondary);height:100%}.article-card:hover{box-shadow:0 5px 15px 5px #0e2233;box-shadow:0 5px 15px 5px var(--color-secondary)}.blog-card-description,.blog-date{color:#0e2233;color:var(--color-secondary)}.blog-date{font-style:italic}hr{background-color:#243746;background-color:var(--color);border:none;height:1px}.menu-icon{background-color:#ddd;background-color:var(--border-color)}.menu-icon,.mobile-menu{color:#243746;color:var(--color)}.mobile-menu{background-color:#fff;background-color:var(--bg-secondary)}.btn{border-radius:1;border-color:#158876;border-color:var(--color-primary)}.btn:hover{background-color:#fff;background-color:var(--bg-secondary)}.hero{border-color:#158876;border-color:var(--color-primary)}.markdown{word-wrap:break-word}.markdown h2:before,.markdown h3:before{display:block;content:" ";margin-top:-85px;height:85px;visibility:hidden;pointer-events:none}.markdown h2>a,.markdown h3>a{margin-left:1.25rem}.markdown h2>a:before,.markdown h3>a:before{content:"#";font-weight:400;font-size:1.25rem;line-height:2rem;margin-left:-1.25rem;padding-right:.5rem;position:absolute;opacity:1}@media (min-width:1024px){.markdown h2>a,.markdown h3>a{margin-left:0}.markdown h2>a:before,.markdown h3>a:before{opacity:0}}.markdown h2:hover>a:before,.markdown h3:hover>a:before{opacity:1}& pre[class*=language-]{--bg-opacity:1;background-color:#2d3748;background-color:rgba(45,55,72,var(--bg-opacity));position:static}.mc{background-color:#f3f5f4;background-color:var(--bg);border-color:#158876;border-color:var(--color-primary);border-width:1px;color:#158876;color:var(--color-primary);justify-content:center;padding:5px 10px;border-radius:5px;width:100%}.mc-btn{color:#fff;color:var(--bg-secondary);background-color:#0e2233;background-color:var(--color-secondary);cursor:pointer}.page-enter-active,.page-leave-active{transition:filter 2s linear;transition:margin-top .15s,opacity .15s}.page-enter,.page-leave-to{opacity:0;margin-top:5px}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}</style><link rel="preload" href="/_nuxt/static/1632449529/zh/2020/12/27/building-web-applications-with-django-drf-and-nuxt/state.js" as="script"><link rel="preload" href="/_nuxt/static/1632449529/zh/2020/12/27/building-web-applications-with-django-drf-and-nuxt/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1632449529/manifest.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function(){"use strict";var t=window,r=document,s=r.documentElement,n=["dark","light"],e=function(){for(var e="nuxt-color-mode=",t=r.cookie.split(";"),s=0;s<t.length;s++){for(var n=t[s];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null}()||"system",a="system"===e?l():e;function c(e){e+="-mode";s.classList?s.classList.add(e):s.className+=" "+e}function o(e){return t.matchMedia("(prefers-color-scheme"+e+")")}function l(){if(t.matchMedia&&"not all"!==o("").media)for(var e of n)if(o(":"+e).matches)return e;return"light"}c(a),t.__NUXT_COLOR_MODE__={preference:e,value:a,getColorScheme:l,addClass:c,removeClass:function(e){e+="-mode";s.classList?s.classList.remove(e):s.className=s.className.replace(new RegExp(e,"g"),"")}}}()</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="mx-auto grid grid-cols-3 py-2 px-2 sm:px-4 items-center max-w-6xl" data-v-28cb19c6><div class="justify-left" data-v-28cb19c6><a href="/zh" class="text-xl nuxt-link-active" data-v-28cb19c6><span class="hidden sm:inline" data-v-28cb19c6>布莱恩</span><span class="inline sm:hidden" data-v-28cb19c6>JBC</span></a></div> <div class="justify-center flex" data-v-28cb19c6><div class="grid items-center justify-center" data-v-28cb19c6><ul class="flex px-4"><li class="md:px-4 px-1 cursor-pointer">
      🖥️
    </li><li class="md:px-4 px-1 cursor-pointer">
      🌞
    </li><li class="md:px-4 px-1 cursor-pointer">
      🌚
    </li><li class="md:px-4 px-1 cursor-pointer">
      ☕
    </li></ul></div></div> <div class="flex justify-end relative" data-v-28cb19c6><div class="grid items-center justify-center" data-v-28cb19c6><ul><li class="md:px-4 px-1 cursor-pointer">
      🇨🇳
    </li></ul> <div class="relative rounded-md -ml-3"><div class="absolute left-0 bg-white shadow-md rounded px-4 py-2 w-32 text mt-4 -ml-20" style="display:none"><a href="/2020/12/27/building-web-applications-with-django-drf-and-nuxt">
        🇺🇸 English
      </a><a href="/fr/2020/12/27/building-web-applications-with-django-drf-and-nuxt">
        🇫🇷 Français
      </a><a href="/zh/2020/12/27/building-web-applications-with-django-drf-and-nuxt" aria-current="page" class="nuxt-link-exact-active nuxt-link-active">
        🇨🇳 简体中文
      </a><a href="/ru/2020/12/27/building-web-applications-with-django-drf-and-nuxt">
        🇷🇺 Русский
      </a><a href="/jp/2020/12/27/building-web-applications-with-django-drf-and-nuxt">
        🇯🇵 日本語
      </a></div></div></div>  
    <nav data-v-4a722fd0 data-v-28cb19c6><ul class="items-right justify-end hidden md:flex" data-v-4a722fd0><li class="px-4" data-v-4a722fd0><a href="/zh/blog" data-v-4a722fd0>
        博客
      </a></li> <li class="px-4" data-v-4a722fd0><a href="/zh/projects" data-v-4a722fd0>
        项目
      </a></li> <li class="px-4" data-v-4a722fd0><a href="/zh/contact" data-v-4a722fd0>
        联系
      </a></li></ul> <div class="flex justify-end md:hidden z-1000" data-v-4a722fd0><button class="flex items-center px-3 py-2 border rounded menu-icon" data-v-4a722fd0><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current h-3 w-3" data-v-4a722fd0><title data-v-4a722fd0>Menu</title> <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" data-v-4a722fd0></path></svg></button></div> <!----></nav></div></div> <article><img src="/static/django_nuxt_app_diagram.png" class="h-64 w-full object-cover"> <div class="mx-auto max-w-5xl px-2 sm:px-4 md:px-4 lg:px-16 mt-2"><h1 class="prose text-3xl leading-9">
      Building web applications with Django, Django REST Framework, Nuxt.js and docker
    </h1> <div class="flex flex-wrap -ml-1 py-2" data-v-21780fb6><a href="/zh/blog/tags/django" data-v-1bdccd32 data-v-21780fb6><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-1bdccd32>
    django 🏷️
    <!----></div></a><a href="/zh/blog/tags/vue" data-v-1bdccd32 data-v-21780fb6><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-1bdccd32>
    vue 🏷️
    <!----></div></a><a href="/zh/blog/tags/nuxt" data-v-1bdccd32 data-v-21780fb6><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-1bdccd32>
    nuxt 🏷️
    <!----></div></a><a href="/zh/blog/tags/drf" data-v-1bdccd32 data-v-21780fb6><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-1bdccd32>
    drf 🏷️
    <!----></div></a><a href="/zh/blog/tags/docker" data-v-1bdccd32 data-v-21780fb6><div class="px-2 text-sm shadow rounded-lg bg-white mx-1 mt-1 uppercase cursor-pointer" data-v-1bdccd32>
    docker 🏷️
    <!----></div></a></div> <!----> <p class="blog-date text-gray-500 mb-4">
      更新日期
      2020年12月27日
    </p> <!----> <div class="markdown nuxt-content"><p>Over the holidays between lots of big meals and many naps, I tried to tackle one more goal of mine before this year come to an end: building an application with Django and Nuxt.js.</p>
<p>This year I rebuilt my personal blog (<a href="https://briancaffey.github.io/" rel="nofollow noopener noreferrer" target="_blank">briancaffey.github.io</a>) with Nuxt.js, the <code>@nuxt/content</code> headless git-based CMS and TailwindCSS. It is statically generated with Nuxt's full-static mode and has been really enjoyable to work with. I have also learned a lot more about SEO and how Nuxt helps improve Vue applications' SEO. I have also been working a lot with Django and Vue.js applications where Django serves as an API to a Vue.js SPA. This combination of technologies works well for a lot of use cases, but it falls short in SEO. Nuxt also provides a great way to organize large Vue.js projects which I have been finding very helpful. For these reasons, combining Django and Nuxt has been something that I have wanted to try for a while, so this article will share some of my experiences in recent efforts to build with these two frameworks. I took <a href="https://gitlab.com/briancaffey/django-nuxt-starter/-/blob/develop/STEP_BY_STEP.md" rel="nofollow noopener noreferrer" target="_blank">detailed notes of each step of the project setup</a> starting from an empty repository, and I put together a diagram of my understanding of how data flows in the application.</p>
<p>Here's the link to the project repository that I'll be referencing: <a href="https://gitlab.com/briancaffey/django-nuxt-starter" rel="nofollow noopener noreferrer" target="_blank">https://gitlab.com/briancaffey/django-nuxt-starter</a></p>
<p>This article will focus on explaining the project through the diagram shown below. I added two types of labels: letters and numbers. The letters will introduce each component of the application and its role in the application as a whole. The numbers summarize how data flows through the different components in my sample blog application.</p>
<p><img alt="Diagram" src="/static/django_nuxt_app_diagram.png"></p>
<h2 id="diagram-components"><a href="#diagram-components" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Diagram components</h2>
<p>A. Your computer - Possibly also your development machine which is running the application in docker containers with docker-compose.</p>
<p>B. NGINX - This is the "front desk" of the application that does a few different things. It is the first component that web requests come to. It serves as a reverse proxy which does path-based routing. It looks at the URL request and determines where to send it. For example: <code>/api/posts/1</code>, <code>/dashboard/</code>, <code>/admin/</code> could all be routed differently depending on the NGINX configuration file. We will look at this again in the next section. This  component, like most of the other things in the diagram, runs in a container. NGINX can also serve static files for our Django app and do TLS termination to make our application available over a secure HTTPS connection.</p>
<p>C. Nuxt.JS server - The first "S" in SSR (server side rendering). It is a Node.js process that renders HTML from Vue components that we define in our Nuxt app, as well as data fetched from other servers/APIs before returning HTML back to the client.</p>
<p>D. Django server - This runs the WSGI application with a gunicorn process in a container.</p>
<p>E. Django REST Framework is a Django package the facilitates the creation of REST API endpoints. This is part of the Django application, it primarily takes care of data serialization (which can be thought of as translating between JSON and Python objects that represent rows of data in our Postgres database)</p>
<p>F. This is the Postgres database, also a containerized service. It is on the same docker network as the Django/gunicorn application, so the Django application can connect to the Postgres database using the hostname <code>postgres</code>.</p>
<p>G. docker-compose is used to orchestrate the docker network, containers and volumes that make up the application.</p>
<p>H. This box represents the docker network that allows for easy networking between services. We will come back to this the significance of this in the next section.</p>
<h2 id="data-flow-in-the-application"><a href="#data-flow-in-the-application" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Data flow in the application</h2>
<p>The simple application I have built for this demonstration is a blog. There is only a list view and a detail view for simple blog post model with three fields: title, body and created date. For the list view, the frontend (Nuxt) route is <code>/posts/</code> and the backend route is <code>/api/posts/</code> for the detail view the frontend route is <code>/posts/_id</code> and the API route is <code>/api/posts/_id/</code>.</p>
<p>The data flow shown here will walk through what happens when a user visits <code>http://localhost/posts/</code>, and then show what happens when the user clicks on one of the listed posts to see the detail view of the post (<code>http://localhost/posts/2</code>).</p>
<ol start="0">
<li>
<p><code>docker-compose up</code> is one command that is used to start the entire application in local development. This exposes the NGINX process on port 80 of the host machine (your laptop).</p>
</li>
<li>
<p>When the application is running on your machine and you navigate to <code>http://localhost/posts/</code>, the request is first handled by NGINX.</p>
</li>
<li>
<p>As we mentioned earlier, NGINX's path-based routing sends all requests that do not start with <code>/api/*</code> or <code>/admin/*</code> to the Nuxt.js server.</p>
</li>
<li>
<p>When the request gets to the Nuxt server, the Nuxt lifecycle methods start. The important one that I'm using so far is <code>asyncData</code>. This property is used to request data that will be used in the rendering of our HTML response.</p>
</li>
<li>
<p>Inside of <code>asyncData</code>, the application uses axios to make a request to <code>/api/posts/</code> (for example). In <code>nuxt.config.js</code>, the <code>privateRuntimeConfig</code> sets a baseUrl value for axios to <code>http://backend:8000</code>. Since the Nuxt server is on the same docker network as the backend Django/gunicorn server, the Nuxt server is able to resolve <code>http://backend</code> to the address of the backend server.</p>
</li>
<li>
<p>Django processes this endpoint, using the <code>PostViewSet</code>, the views of which have been added to <code>urlpatterns</code> in <code>blog/urls.py</code>.</p>
</li>
<li>
<p>The <code>PostViewSet</code> makes a database query on the <code>posts</code> which is used to serialize the data.</p>
</li>
<li>
<p>The Django server returns the response to the original axios call.</p>
</li>
<li>
<p>The data returned from Django is used to render the HTML response.</p>
</li>
<li>
<p>The HTML response from the Nuxt server is sent back to the browser that originally navigated to <code>http://localhost/posts/</code>.</p>
</li>
<li>
<p>The user is presented with page that lists blog posts. Each blog posts lists to a detail view. When a blog post (let's say the post with <code>id</code> of 2) is clicked on, a request for <code>/posts/2/</code> is made directly to the Django backend. The <code>browserBaseURL</code> value in the <code>axios</code> settings under <code>publicRuntimeConfig</code> defined in <code>nuxt.config.js</code> is set to <code>http://localhost</code>, so the request is made to <code>http://localhost/api/posts/2/</code>. To clarify, since we are making this request using axios in the browser, we can't make a request to <code>http://backend:8000/api/posts/2/</code> like we did in step 4 (<code>http://backend:8000/api/posts/</code>) because the browser doesn't know how to resolve the <code>backend</code> hostname.</p>
</li>
<li>
<p>This request to <code>http://localhost/api/posts/2/</code>, like all others, first goes to NGINX which sends it to the backend since the path starts with <code>/api/</code>. At this point the application functions like a regular Vue SPA making axios calls to a backend service. This is because we used <code>&lt;nuxt-link></code> for the posts listed in the posts list view. If we used <code>&lt;a></code> tags, we would go through the same process as in step 4 where the HTML is rendered on the Nuxt server and sent back to the browser all at once.</p>
</li>
</ol>
<h2 id="discussion"><a href="#discussion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Discussion</h2>
<p>My main takeaway is that using Nuxt and Django together can give you good SEO and a great SPA experience at the same time. Using Django alone, or Django with traditional non SSR Vue makes this harder to do. Being a progressive framework, there are a lot of ways to use Vue with any other backend. From what I have heard, most people use Vue via CDN similar to how jQuery was and still is delivered for use in the browser.</p>
<p>There is additional work in setting up 3 servers for a single application (Nuxt, Django and NGINX), but the tradeoff is that I am (at least I feel) very productive writing frontend logic in Vue and backend logic with DRF. I have never liked working with Django templates and I used to know a lot more about them than I do now.</p>
<h2 id="spotlight-for-baserowios-awesome-open-source-django-nuxt-application"><a href="#spotlight-for-baserowios-awesome-open-source-django-nuxt-application" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Spotlight for baserow.io's awesome open-source Django Nuxt application</h2>
<p>Lastly I want to mention that there are some great resources in the <a href="https://github.com/nuxt-community/awesome-nuxt" rel="nofollow noopener noreferrer" target="_blank">nuxt-community/awesome-nuxt</a> GitHub repo. There's one project that really stood out to me when I searched for "django" projects in the README, and that project is called <a href="https://baserow.io/" rel="nofollow noopener noreferrer" target="_blank">baserow.io</a> (repo: <a href="https://gitlab.com/bramw/baserow" rel="nofollow noopener noreferrer" target="_blank">https://gitlab.com/bramw/baserow</a>). Please check this repo our if you are interested in Django and Nuxt. This company is building an open source no-code database, similar to Airtable which I have worked with before.</p>
<p>Their entire product is open source and I have been very impressed with what I have seen. Please go give that project a star or consider becoming a Github sponsor if you are interested. I'm not affiliated with that project in any way, but I'll be referencing how they use Django and Nuxt to build their application.</p>
<h2 id="next-steps"><a href="#next-steps" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Next steps</h2>
<p>There is a still a lot I have to learn about Nuxt. I'm still very new to the Framework and this is my first time using Nuxt's SSR mode. Nuxt seems to have its own way of doing lots of things that I'm used to doing in Vue. There is a very supportive community and well-maintained official packages to help with lots of things, like the <code>@nuxt/axios</code> package that I'm using.</p>
<p>My next step is to keep expanding my blog application. One thing I didn't mention is authentication. I plan on using Django session authentication for authenticating request to Django. It seems that it already works correctly in my application (logging in through Django admin and then navigating to Nuxt routes that make Django requests are working only when I'm logged in.) I think I have an idea about how Vuex, authentication and route guards will work together, but I haven't gotten there yet. If anyone has some good reference projects or recommendations on how to expand on what I already have, please let me know!</p>
<p>I know that Nuxt has an auth module, so I need to see if that is relevant for what I want need in my application. I also need to continue reading the Nuxt documentation. I still don't know what I don't know about Nuxt and the plugins and modules that it makes available. I also noticed that Nuxt has it's own version of the Vue 3 Composition API, something I am just now starting to learn more about, so that it another area I'll need to dig into eventually.</p></div> <div class="text-center pb-4 pt-8"><button class="mc-btn rounded py-1 px-2">
        Show Disqus Comments 💬
      </button></div> <!----> <h1></h1></div></article> <div class="mx-auto max-w-6xl p-4 lg:px-16 text-center" data-v-27f2d9d4><hr class="mt-4" data-v-27f2d9d4> <div class="mx-auto py-4" data-v-27f2d9d4><div class="pb-4" data-v-27f2d9d4>
      加入我的新闻通讯
    </div> <div class="mx-auto" data-v-89248ae4 data-v-27f2d9d4><div id="mc_embed_signup" class="mx-auto w-full md:w-1/2" data-v-89248ae4><form id="mc-embedded-subscribe-form" action="https://github.us2.list-manage.com/subscribe/post?u=43a795784ca963e25903a0da6&id=9937fe4fc5" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate" data-v-89248ae4><div id="mc_embed_signup_scroll" class="grid grid-cols-1 sm:grid-cols-2 gap-4 items-center" data-v-89248ae4><input id="mce-EMAIL" type="email" name="EMAIL" placeholder="输入你的电子邮箱地址" class="rounded mc text-center" data-v-89248ae4> <div aria-hidden="true" style="position:absolute;left:-5000px" data-v-89248ae4><input name="b_43a795784ca963e25903a0da6_9937fe4fc5" tabindex="-1" data-v-89248ae4></div> <div data-v-89248ae4><input id="mc-embedded-subscribe" type="submit" name="subscribe" value="订阅" class="mc-btn rounded px-2 py-1 w-full" data-v-89248ae4></div></div></form></div></div></div> <hr data-v-27f2d9d4> <div class="py-4" data-v-27f2d9d4>
    感谢您访问我的网站！
  </div> <div class="pb-4" data-v-27f2d9d4>
    © 2021 Brian Caffey
  </div></div></div></div></div><script defer src="/_nuxt/static/1632449529/zh/2020/12/27/building-web-applications-with-django-drf-and-nuxt/state.js"></script><script src="/_nuxt/5a9dfc9.js" defer></script><script src="/_nuxt/4c325ce.js" defer></script><script src="/_nuxt/3489e1f.js" defer></script><script src="/_nuxt/ebf439e.js" defer></script><script src="/_nuxt/5539925.js" defer></script>
  </body>
</html>
